/*!  2021-07-29 8:58:26 AM */
angular.module("templates-adunit",[]).run(["$templateCache",function(a){a.put("ssa-templates",'<script type=text/ng-template id=ssaCallToActionTemplate.html><div id="callToActionContainer">\n        <div class="cta-btn" ng-click="callToActionClick()"\n             ng-style="{\'animation-delay\': \'0s, \' + callToActionDelay + \'s\',\n             \'animation-iteration-count\': callToActionDelay + \', 1\'}">\n            <div class="cta-text" ng-style="{\'animation-delay\': (callToActionDelay + 0.2) + \'s\'}">{{callToActionText}}</div>\n            <div class="cta-icon" ng-style="{\'animation-delay\': callToActionDelay + \'s\'}">\n                <ssa-icon app-data="appData"></ssa-icon>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=carouselTemplate.html><div class="adUnitGalleryWrap">\n        <div class="adUnitGalleryScroll" scroll-only="x" ssa-scroll-position>\n            <div class="adUnitGallery">\n                <div class="adUnitGalleryItemWrapper">\n                    <div class="adUnitGalleryItem" ng-repeat="img in carouselImages track by $index">\n                        <img ng-src="{{img}}" imageonload ng-class="{\'hidden\': \'img-hidden\', \'visible\': \'img-visible\'}[carouselLoaded]">\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=clickWrapper.html><div id="clickWrapper" class="displayNone">\n        <div class="transparentBg" ng-click="onBackgroundPressed($event)"></div>\n        <div id="wrapperContent" ng-click="onWrapperPressed()">\n            <div class="headerWrapper">\n                <div class="label">{{headerText}}</div>\n                <a class="dismissBtn" ng-click="onDismissPressed()" ng-if="displayDismissBtn">{{dismissBtnText}}</a>\n            </div>\n            <div class="line"></div>\n            <div class="appDataWrapper">\n                <div class="appName">{{appTitle}}</div>\n                <a class="acceptBtn" ng-click="onAcceptPressed($event)">{{acceptBtnText}}</a>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=closeButton.html><div class="closeWrapper" ng-click="closeAdUnit($event)" ng-class="{\n    closeREB: isRightButton,\n    closeLEB: !isRightButton,\n    faded: fadeMode,\n    closeButtonFadeIn: fadeInMode}">\n        <ssa-close-logo close-data="closeData" ng-class="closeData.class" ng-hide="closeData.hideClose"></ssa-close-logo>\n    </div></script><script type=text/ng-template id=closeSimple.html><div id="closeBtn" ng-class="closeData.class" ng-hide="closeData.hideClose"></div></script><script type=text/ng-template id=ssaDialogBoxTemplate.html><div>\n      <div id="dialogBoxOverlay" ng-show="dialogShouldBeDisplayed" class="dialogBoxOverlay"></div>\n      <div class="dialogBox {{mode}}" ng-show="dialogShouldBeDisplayed">\n         <div class="textDialogBox" ng-show="dialogBoxBodyText" > {{dialogBoxBodyText}} </div>\n         <div id="btnDialogBoxContainer" class="btnDialogBoxContainer" >\n            <div id="ssaDialogConfirmBtn" class="dialogBoxBtns" ng-show="dialogBoxConfirmLabel" ng-click="confirmDialogBoxClicked()"> {{dialogBoxConfirmLabel}} </div>\n            <div id="ssaDialogCancelBtn" class="dialogBoxBtns" ng-show="dialogBoxCancelLabel" ng-click="cancelDialogBoxClicked()"> {{dialogBoxCancelLabel}} </div>\n         </div>\n      </div>\n   </div></script><script type=text/ng-template id=ssaEaClickHere.html><div class="ea-click-here-button">\n    </div></script><script type=text/ng-template id=extraOffer.html><div class="extraOffer" ng-click="handleExtraOfferClick();">\n            <img ng-src="{{img}}">\n            <span>{{adTitle}}</span>\n        </div></script><script type=text/ng-template id=extraOffersContainer.html><div ng-show="extraOfferAds" id="extraOffers"\n         in-view="onExtraOffersContainerInview($inview)" in-view-options="extraOffersContainerInviewOptions">\n        <div class="extraOffersLabel">\n            Trending Games\n        </div>\n        <ul class="extraOffersList">\n            <li ng-repeat="extraOffer in extraOfferAds">\n                <ssa-extra-offer ad-data="extraOffer"\n                                 host-frame-name="hostFrameName"\n                                 in-view="onExtraOfferInview($inview, $index)"\n                                 in-view-options="extraOfferInviewOptions">\n                </ssa-extra-offer>\n            </li>\n        </ul>\n    </div></script><script type=text/ng-template id=ssaGenericButtonTemplate.html><div class="ssaGenericButtonContainer" ng-click="clickAction()">\n      <div class="ssaGenericButton {{style}}">{{title}}</div>\n   </div></script><script type=text/ng-template id=ssaIconTemplate.html><img class="appIcon" ng-src="{{appData.icon}}" ng-hide="imageVisibilityHidden"></script><script type=text/ng-template id=ssaInstallButtonTemplate.html><div class="installActions" ng-class="{\'wiggle\': isWiggle}" ng-click="postActionFunction(); $event.stopPropagation()">\n        <div class="downloadButton">\n            <div class="text">\n                {{postActionTitle}}\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=installClickableTemplate.html><div class="outterInstall" swipe-prevent-directive ssa-mobile-click="postActionFunction(); $event.stopPropagation()">\n        <div class="middleInstall">\n            <div class="installActionsWrapper horizontalLayout">\n                <div class="installActions left">\n                    <div class="appDetails">\n                        <ssa-icon component-custom-config="componentCustomConfig" app-data="appData"></ssa-icon>\n                        <div class="appExtraDetails">\n                            <div class="appTitle">\n                                <div class="text alignTitleToTop" text="appData.title" text-clamp-config="textClampConfig" ssa-line-clamp>{{appData.title}}</div>\n                            </div>\n                            <div class="appRatingContainer">\n                                <div class="appStars" ssa-stars stars-data="appData" stars-image-name="{{appData.starsImageName}}"></div>\n                                <ssa-rate></ssa-rate>\n                                <div class="reviewersIcon">\n                                <div class="sprite-images-ssa-reviewers-icon"></div>\n                            </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                <ssa-install-button post-action-function="postActionFunction"\n                                    post-action-title="postActionTitle"\n                                    is-wiggle="isWiggle"\n                                    class="right">\n                </ssa-install-button>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaLogoTemplate.html><div id="ssaLogo" class="sprite-images-ssaLogo {{::deviceType}}"></div></script><script type=text/ng-template id=muteButton.html><div class="muteWrapper" ng-click="muteClick($event)">\n        <div id="muteBtn" ng-class="muteBtnIcon? muteClassName : unMuteClassName"></div>\n    </div></script><script type=text/ng-template id=notificationTemplate.html><div class="notification" ng-class="{largeText: notificationData.isLargeText}">\n        <div class="notificationOverlay" ng-style="{\'background-color\': notificationBGColor}"></div>\n        <div class="notificationText" ng-style="{color: notificationColor}" reduce-notification-font-size\n             tf-text-config="textConfig">{{notificationData.data}}\n        </div>\n    </div></script><script type=text/ng-template id=ssaPrivacyLinkTemplate.html><div id="privacyLinkContainer" ng-class="{\n    privacyLinkContainer: !bannerPrivacy,\n    privacyLinkContainerBanner: bannerPrivacy,\n    mostLeft: privacyOnLeft,\n    secondLeft: !privacyOnLeft}" ng-click="handlePrivacyLink($event)">\n        <div class="privacyCircle {{privacyCircleClassName}}" >\n            <div class="privacyCircleTextClass">{{privacyCircleText}}</div>\n        </div>\n       <div class="privacyFlachContainer">\n           <div class="privacyFlach">\n               <div>{{privacyFlachText}}</div>\n           </div>\n       </div>\n    </div></script><script type=text/ng-template id=ssaRateTemplate.html><div class="appRating">{{generateBigRandomNumber() | number:0}}</div></script><script type=text/ng-template id=ssaRefreshButtonTemplate.html><div id="refreshButton" ng-click="refreshActionFunction()">\n        <div class="refreshIcon" class="sprite-images-ssaRefreshBtn"></div>\n        <div class="text" ng-if="refreshButtonTitle">\n            {{refreshButtonTitle}}\n        </div>\n    </div></script><script type=text/ng-template id=ssaRewardsStatusLinkTemplate.html><div id="rewardsLinkContainer" ng-show="showInfoButton" ng-click="handleRewardedStatusLinkClicked($event)">\n        <div class="rewardsCircle {{rewardsStatusCircleClassName}}" >\n            <div>i</div>\n        </div>\n    </div></script><script type=text/ng-template id=skipInTemplate.html><ssa-close-button class="closeButton" close-data="skipInData" post-action="postAction" close-by-adunit="closeByAdunit" ng-class="xButtonClass" layout-shows-privacy-link="layoutShowsPrivacyLink"></ssa-close-button>\n    <div class="skipInDisplay" ng-class="skipInClass">\n        <div class="skipInText">{{skipInRemainingTime}}</div>\n    </div></script><script type=text/ng-template id=socialButtonsTemplate.html><ul class="ssa-social">\n    \t<li ng-repeat="social in socialData" ng-click="onClick($event, social);" >\n            <a href="javascript:void(0);" ng-style="{\'background-image\':\'url(\'+ social.icon +\')\'}"></a>\n        </li>\n    </ul></script><script type=text/ng-template id=spinnerTemplate.html><div id="spin" class="container" ng-class="{spinnerOverlay: showOverlay}" ng-show="showSpinner">\n        <ssa-close-button close-data="closeData" ng-if="showSpinner && showOverlay"></ssa-close-button>\n        <div class="spinner">\n            <div class="bar1"></div>\n            <div class="bar2"></div>\n            <div class="bar3"></div>\n            <div class="bar4"></div>\n            <div class="bar5"></div>\n            <div class="bar6"></div>\n            <div class="bar7"></div>\n            <div class="bar8"></div>\n            <div class="bar9"></div>\n            <div class="bar10"></div>\n            <div class="bar11"></div>\n            <div class="bar12"></div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaStatusBarTemplate.html><div class="ssaStatusBarContainer">\n        <div class="bar {{barConfig.theme}}">\n            <span class="{{barConfig.progressValue}}"></span>\n        </div>\n    </div></script><script type=text/ng-template id=progressBarTemplate.html><div class="fontLoader">.</div>\n    <canvas class="timer-canvas"></canvas>\n    <div class="progress">\n        <canvas class="progress-bar-canvas"></canvas>\n        <div class="sprite-images-ssaRisGift"></div>\n        <div class="sprite-images-ssaRisGiftBlue"></div>\n    </div></script><script type=text/ng-template id=timerTemplate.html><canvas class="timer-canvas"></canvas></script><script type=text/ng-template id=internal360PlayerTemplate.html><div class="video-wrapper">\n        <div id="overlay" style="position:absolute!important;top:0;left:0;width:100%;height:100%;background-color:black;z-index:980;">\n            <div id="overlayContent" style="visibility: hidden;position:absolute!important;z-index:990;">\n                <img width="140" height="140"  style="padding: 6px 0 0 3px;" src="https://networksdk.ssacdn.com/test/360/assets/360_spinner_org.jpg">\n                <div class="animationLoader"></div>\n            </div>\n        </div>\n        <video id="videojs-panorama-player" class="video-js vjs-default-skin vjs-fluid video-full-screen" webkit-playsinline playsinline crossorigin="anonymous">\n            <source id="mp4" ng-src="{{ videoDataUrlMp4 }}" type="video/mp4">\n            <p>Your device does not support the HTML5 Video element.</p>\n        </video>\n        <img id="watermark360" width="55" height="55"  style="visibility: hidden; position: absolute; top: 0;left: 0;z-index: 999;margin: -11px 0 0 -5px;" src="https://networksdk.ssacdn.com/test/360/assets/360_spinner_org.jpg">\n    </div></script><script type=text/ng-template id=externalUnifiedPlayerTemplate.html><div class="externalUnifiedPlayerContainer" ssa-external-player-progress video-data="videoData" is-replay-video="isReplayVideo" timer-data="timerData" post-action="postAction">\n        <iframe id="adContainer" class="obfuscationIframe"></iframe>\n    </div></script><script type=text/ng-template id=externalPlayerTemplate.html><div class="video-wrapper">\n        <div class="external-player" ng-bind-html="externalVideoHtml" ssa-external-player-progress video-data="videoData" is-replay-video="isReplayVideo" timer-data="timerData" post-action="postAction"></div>\n        <!--<div id="pixel" class="pixel"></div>-->\n    </div></script><script type=text/ng-template id=internalPlayerTemplate.html><div id="videoWrapper" class="video-wrapper" ssa-moat video-data="scope.videoData">\n        <video id="video" class="video-full-screen" preload="none" webkit-playsinline playsinline swipe-prevent-directive>\n            <source id="mp4" ng-src="{{ videoDataUrlMp4 }}" type="video/mp4">\n            <p>Your user agent does not support the HTML5 Video element.</p>\n        </video>\n        <ssa-call-to-action app-data="appData" call-to-action-click="callToActionClick" ng-if="isCallToActionEnabled"></ssa-call-to-action>\n    </div></script><script type=text/ng-template id=ssaBannerInstallDefaultTemplate.html><div class="ssaBannerInstall fullHeight" ng-click="vm.postActionFunction();" ng-class="vm.deviceOs">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-link="vm.privacyLink" privacy-on-left="true" banner-privacy="true"></ssa-privacy-link>\n        <ssa-install-clickable tpl="installClickableTemplate" post-action-function="vm.postActionFunction" text-clamp-config="vm.textClampConfig"\n               post-action-title="vm.postActionTitle" component-custom-config="vm.componentCustomConfig" app-data="vm.appData" is-wiggle="vm.isWiggle"\n               class="installClickableBannerLayout"></ssa-install-clickable>\n    </div></script><script type=text/ng-template id=ssaCarouselEndCardTemplate.html><div class="carouselWrapper">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-on-left="true"></ssa-privacy-link>\n        <ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick" layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-close-button>\n\n        <div class="topBlock"></div>\n        <div class="middleBottomSection">\n            <div class="middleBlock" stretch-to-fit stf-exceptions="ssa-close-button" stf-stretch-last="true"\n                 click-on-scrollable cos-on-click="vm.carouselActionFunction">\n                <div class="carouselBlock">\n                    <ssa-carousel carousel-images="vm.carouselImages"  on-load-action="vm.onLoadAction()" on-error-action="vm.onErrorAction()" class="carousel"></ssa-carousel>\n                </div>\n            </div>\n            <div class="bottomBlock">\n                <ssa-install-clickable tpl="installClickableTemplate" post-action-function="vm.postActionFunction" text-config="vm.textConfig"\n                                       post-action-title="vm.postActionTitle" app-data="vm.appData" is-wiggle="vm.isWiggle"\n                                       class="installClickable"></ssa-install-clickable>\n                <ssa-logo device-type="vm.deviceType"></ssa-logo>\n            </div>\n        </div>\n\n    </div></script><script type=text/ng-template id=ssaCustomAdContainerTemplate.html><ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick" ng-hide="vm.usedCustomClose"></ssa-close-button>\n    <iframe class="customAdFrame" width="100%" height="100%" frameborder="0" scrolling="no"></iframe></script><script type=text/ng-template id=ssaEmvTemplate.html><div class="emvDefaultLayout {{::vm.deviceType}} {{::vm.layoutType}}" ng-click="vm.postActionFunction()">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-on-left="!vm.muteBtnShouldDisplay"></ssa-privacy-link>\n\n        <ssa-skip-in skip-in-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick" layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-skip-in>\n\n        <div class="appDataSection">\n            <div class="appDataSectionWrapper">\n                <ssa-icon app-data="vm.appData" class="appDataRowItem"></ssa-icon>\n                <div class="wrapper appDataRowItem">\n                    <div class="appTitle">\n                        <div class="text">{{vm.appData.title}}</div>\n                    </div>\n                    <div class="row">\n                        <div class="appStars rowItem" ssa-stars stars-data="vm.appData" stars-image-name="stars-gray-background"></div>\n                        <ssa-rate class="rowItem"></ssa-rate>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n        <div class="videoSection">\n            <ssa-video-player video-data="vm.videoData" device-details="vm.deviceDetails" is-pre-cache="vm.isPreCache" is-preload="vm.isPreload"\n                              product-type="vm.productType" close-click="vm.closeClick" post-action="vm.postAction" hybrid="vm.hybrid"\n                              completion-countdown="vm.timerCompletionCountdown" features-model="vm.featuresModel" should-mute="vm.isVideoMute">\n            </ssa-video-player>\n            <ssa-mute-button ng-if="vm.muteBtnShouldDisplay" mute-btn-icon="vm.muteBtnIconOff" video-id="\'video\'"></ssa-mute-button>\n        </div>\n\n        <div class="installSection">\n            <ssa-install-button post-action-function="vm.postActionFunction"\n                                post-action-title="vm.postActionTitle"\n                                is-wiggle="vm.isWiggle">\n            </ssa-install-button>\n        </div>\n    </div></script><script type=text/ng-template id=ssaFullScreenEndCardTemplate.html><div class="ssaFullScreenEndCard" swipe-prevent-directive ng-click="vm.postActionFunction();">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-on-left="true"></ssa-privacy-link>\n        <ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick" layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-close-button>\n    </div></script><script type=text/ng-template id=ssaIncentBrandedActionTemplate.html><div ng-click="vm.click($event);" class="incentBrandedAction" ng-style="vm.postActionStyle">\n        <ssa-close-button close-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick"></ssa-close-button>\n        <div class="social-bottom">\n            <div class="ea-click-here-container">\n                <ssa-ea-click-here ng-if="vm.shouldShowEAClickHereButton"\n                                   ng-click="vm.click($event)"></ssa-ea-click-here>\n            </div>\n            <ssa-social-buttons ng-if="vm.shouldShowSocialButtons"\n                                ux-template="vm.uxTemplate"\n                                social-data="vm.socialData"\n                                on-click="vm.socialClick;"\n                                ng-click="vm.preventClick($event)">\n\n            </ssa-social-buttons>\n        </div>\n    </div></script><script type=text/ng-template id=ssaIncentVideoTemplate.html><div class="fullSize">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-on-left="!vm.muteBtnShouldDisplay"></ssa-privacy-link>\n        <ssa-skip-in skip-in-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick"></ssa-skip-in>\n\n        <ssa-script-loader script-data="vm.scriptData"></ssa-script-loader>\n\n        <ssa-video-player video-data="vm.videoData" device-details="vm.deviceDetails"\n                          is-pre-cache="vm.isPreCache" is-preload="vm.isPreload"\n                          product-type="vm.productType" is-replay-video="vm.isReplayVideo"\n                          close-click="vm.closeClick" set-close-state="vm.setCloseState" post-action="vm.postAction" close-data="vm.closeData" timer-data="vm.timerData"\n                          completion-countdown="vm.timerCompletionCountdown" hybrid="vm.hybrid"\n                          features-model="vm.featuresModel" should-mute="vm.isVideoMute" app-data ="vm.appData">\n        </ssa-video-player>\n\n        <ssa-time-progress timer-data="vm.timerData" replay-mode="vm.isReplayVideo"></ssa-time-progress>\n\n        <ssa-mute-button ng-if="vm.muteBtnShouldDisplay" mute-btn-icon="vm.muteBtnIconOff" video-id="\'video\'"></ssa-mute-button>\n\n    </div></script><script type=text/ng-template id=ssaMraidAdContainerTemplate.html><div class="mraidWrapper">\n        <ssa-privacy-link ng-if="vm.shouldShowPrivacyLink" privacy-on-left="true" banner-privacy="vm.isBannerFlow"></ssa-privacy-link>\n        <ssa-skip-in skip-in-data="vm.closeData" post-action="vm.postAction" close-by-adunit="vm.closeClick" ng-hide="vm.usedCustomClose"></ssa-skip-in>\n        <div id="rootNode">\n            <iframe id="adContainer" class="obfuscationIframe"></iframe>\n        </div>\n    </div></script><script type=text/ng-template id=ssaSimpleOverlayEndCardTemplate.html><div id="simpleOverlayEndCardWrapper" ng-click="vm.onEndCardPressed()">\n        <ssa-close-button add-current-frame-name="vm.addCurrentFrameName" close-data="vm.closeData"\n                          post-action="vm.postAction" close-by-adunit="vm.closeClick"\n                          layout-shows-privacy-link="vm.shouldShowPrivacyLink"></ssa-close-button>\n\n        <div class="outerWrapper">\n            <div class="middleWrapper">\n                <div class="innerWrapper">\n                    <ssa-icon app-data="vm.appData"></ssa-icon>\n                    <div class="appName">{{vm.appTitle}}</div>\n                    <ssa-install-button post-action-function="vm.postActionFunction"\n                                        post-action-title="vm.postActionTitle"\n                                        is-wiggle="vm.isWiggle">\n                    </ssa-install-button>\n                </div>\n            </div>\n        </div>\n    </div></script><script type=text/ng-template id=ssaFrameManager.html><div ng-class="vm.transparentLayoutClass" class="viewableFrameComponent fullSize absolutePosReset {{::vm.transparentLayoutClass}} {{::vm.layoutType}} {{::vm.customFrameType}} template-{{vm.templateClass}}">\n        <div class="frameWrapper fullSize">\n            <div class="frameCell fullSize">\n                <div class="frameContentContainer">\n                    <div ng-show="vm.isPartialScreen" class="layoutAssetsContainer {{::vm.deviceType}}">\n                        <img ng-show="vm.showFrameLayoutPortrait" ng-src="{{::vm.frameLayoutImagePortrait}}" class="frameLayout" mandatory-asset on-load-success="vm.onElementLoaded()" on-load-error="vm.onElementFailedToLoad()"/>\n                        <img ng-show="vm.showFrameLayoutLandscape" ng-src="{{::vm.frameLayoutImageLandscape}}" class="frameLayout" mandatory-asset on-load-success="vm.onElementLoaded()" on-load-error="vm.onElementFailedToLoad()"/>\n                    </div>\n                    <div class="componentContainer">\n                        <div class="emptyDummyNode"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <ssa-extra-offers-container></ssa-extra-offers-container>\n        <ssa-click-wrapper data="vm.componentData"></ssa-click-wrapper>\n        <ssa-simple-overlay-end-card ng-if="showSimpleOverlayEndCard" data="vm.componentData" fm-functions="vm.FMFunctions"></ssa-simple-overlay-end-card>\n    </div></script><script type=text/ng-template id=ssaRVTemplate.html><div ui-view class="secondaryUiView"></div></script>')}]),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(a){var b={crid:a.getCRID(),id:a.getCombinedBannerAndCreativeId(),adUnitType:a.getAdUnitType(),productType:a.getProductType(),inventoryId:a.getInventoryId()},c=a.getDemandSourceName();return c&&(b.demandSourceName=c),b}function p(){var c=f.service();a.securedProtocol=c.isSecuredProtocol(),q.isloaded=!0,q.notificationData=j.get(),q.showNotificationData=!(!q.notificationData||!q.notificationData.showNotificationData)&&q.notificationData.showNotificationData,b.mainControllerLoadTime=(new Date).getTime(),b.productType=l.getProductType(),a.$emit("ssaSpinner.hide",""),a.isPreCache=l.isPreCache(),a.deviceOs=l.getOS(),m.extendConstAliasesMap(l.getSupportedPlaceholderAliasesMap()),q.templateClass=c.getTemplateId();var d=c.getLandingId();1002!==d&&1003!==d||"android"===i.getOSType()&&(4===i.getMajorAndroidVersion()&&i.getMinorAndroidVersion()<1?d=0:i.getMajorAndroidVersion()<4&&(d=0)),q.landingClass=d,c.isRingerMutedOnStart()&&i.setDefaultRingerSwitchOn(!0),r(c),l.shouldWarmupUrls()&&angular.isDefined(c.getPostActionsData)&&n.startWarmupUrls(c.getUrlsToWarmup())}var q=this,r=function(a){var b=o(a);g.setEventDefaults(b)},s=function(){a.$on("AdController.adVisible",function(a,c){null!==q.notificationData&&h(function(){b.$broadcast("ssaNotification.show",{state:"during"})},300)}),a.$on("AdController.updateAd",function(a,b){e.db=b.param,f.service().init(e.db),p(),c.go("AD",{},{reload:!0})})};q.isloaded=!1,q.showNotificationData=!1,g.init(),f.getConfig().then(function(){p(),g.initEvents(),s()})}a.$inject=["$scope","$rootScope","$state","$element","$window","AdUnitDelivery","AdControllerService","$timeout","SSA_Utils","notifications","creativeService","productSettingsService","placeholderManager","urlWarmUpService"];var b=angular.module("AdUnit",["ui.router","angular-inview","templates-adunit","adunitDirectives","communicationModule","services.ssaCloseButton","ssaFrameManager","creativeModule","ssaBannerInstall","externalDataModule","adUnitBaseProduct","ssaRV","ssaStatusBar","ssaLogo","ssaGenericButton","ssaPrivacyLink","ssaDialogBox","ssaCarousel","ssaInstallClickable","ssaRate","ssaIcon","ssaInstallButton","ssaSpinner","ssaSocialButtons","ssaNotification","ssaBackButton","ssaSkipIn","ssaCloseLogo","ssaCloseButton","ssaMuteButton","ssaEaClickHere","ssaStars","ssaVideo","ssaRefreshButton","ssaTimeProgress","ssaExtraOffersContainer","ssaExtraOffer","ssaCallToAction","ssaClickWrapper"]);b.controller("MainController",a),b.config(["$compileProvider",function(a){a.debugInfoEnabled(!1)}]),b.run(["$templateCache","$rootScope","$compile","ssaExternalParams","SSA_Utils","analytics","ADUNIT_BUILD","ADUNIT_VERSION","visibilityService","segmentationService",function(a,b,c,d,e,f,g,h,i,j){d.retrieveParamsFromUrl();var k=a.get("ssa-templates");c(k)(b),f.setCustomData({adunitVersion:h,adunitbn:g}),e.initListenToAdVisible(),i.initListeners(),j.init()}])}(),function(){var a=angular.module("AdUnit"),b={firstLoad:["$state","$rootScope","AdUnitDelivery","PRODUCT_TYPES",function(a,b,c,d){return c.getConfig().then(function(){var b=c.service(),e=b.getProductType();e!==d.BrandConnect&&e!==d.RewardedVideo&&e!==d.Banner&&e!==d.Interstitial||a.go("AD")},function(a){b.$emit("AdUnit.AdLoaded",{errMsg:a.errMsg})})}]};a.config(["$stateProvider","$urlRouterProvider",function(a,c){a.state("AD",{url:"/AD",template:"<ssa-rv></ssa-rv>"}).state("AD.frameManager",{url:"/frameManager/:id",template:"<ssa-frame-manager></ssa-frame-manager>"}).state("home",{url:"/",resolve:b}),c.otherwise("/")}])}(),function(){var a=angular.module("ssaCallToAction",[]);a.directive("ssaCallToAction",function(){return{restrict:"E",replace:!0,scope:{appData:"=",callToActionClick:"="},templateUrl:"ssaCallToActionTemplate.html",controller:["$scope","$timeout","SSA_Utils","analytics","RV_ANALYTICS_CATEGORIES","OPERATING_SYSTEMS","productSettingsService",function(a,b,c,d,e,f,g){function h(){c.addClassToHTMLElement("#callToActionContainer .cta-btn","animate"),c.addClassToHTMLElement("#callToActionContainer .cta-icon","animate"),c.addClassToHTMLElement("#callToActionContainer .cta-text","animate")}a.appData=a.appData||angular.noop,a.callToActionClick=a.callToActionClick||angular.noop,a.callToActionText=g.getCallToActionText(),a.callToActionDelay=g.getCallToActionDelay(),c.callOnVisible(function(){h(),d.trackEvent(e.callToActionDisplayed)})}]}})}();var ssaCarousel=angular.module("ssaCarousel",[]);ssaCarousel.directive("ssaCarousel",["$window",function(a){function b(){return a.innerHeight>a.innerWidth}var c=function(a,b,c){a&&b&&c&&(c=c<=1&&c>0?c:1,a.css({height:b*c+"px"}))},d=function(a,d){var e=a.getCarouselHeight();b()||d.css({height:.9*e}),c(d,e,.9)},e=function(a){if(b()){var e=a.getCarouselHeight(),f=a.getCarouselWidth(),g=.84;angular.forEach(a.sharedData.landscapeImages,function(b){var d=b.attr("original-width")/f,h=b.attr("original-height")/d;c(b,h,g),e===a.getCarouselHeight()&&(e=h)}),angular.forEach(a.sharedData.portraitImages,function(a){c(a,e,g)}),a.$emit("Carousel.heightLimit",{heightLimit:e})}else angular.forEach(a.sharedData.landscapeImages.concat(a.sharedData.portraitImages),function(b){d(a,b)})};return{restrict:"E",scope:{carouselImages:"=",onLoadAction:"&",onErrorAction:"&"},templateUrl:"carouselTemplate.html",link:function(a,b,c){"function"!=typeof a.onLoadAction&&(a.onLoadAction=angular.noop),"function"!=typeof a.onErrorAction&&(a.onErrorAction=angular.noop),a.getCarouselHeight=function(){return b.parent()[0].clientHeight},a.getCarouselWidth=function(){return b.parent()[0].clientWidth},a.carouselLoaded="hidden"},controller:["$scope",function(a){a.sharedData={portraitImages:[],landscapeImages:[],imagesSuccessCounter:0,imagesErrorCounter:0},a.$on("Carousel.recalculate",function(){e(a),a.$emit("Carousel.loaded")}),a.stretchImages=e.bind(this,a),a.$on("$destroy",function(){var b;for(b=0;b<a.sharedData.landscapeImages.length;b++)a.sharedData.landscapeImages[b]=null;for(b=0;b<a.sharedData.portraitImages.length;b++)a.sharedData.portraitImages[b]=null;a.sharedData.landscapeImages=a.sharedData.portraitImages=[]})}]}}]),ssaCarousel.directive("imageonload",function(){return{restrict:"A",scope:!1,link:function(a,b,c){function d(){b[0].clientHeight>=b[0].clientWidth?a.sharedData.portraitImages.push(b):a.sharedData.landscapeImages.push(b),b.attr("original-width",b[0].clientWidth),b.attr("original-height",b[0].clientHeight)}function e(){b.unbind("load"),b.unbind("error")}function f(){var b=a.sharedData.imagesSuccessCounter===h,c=a.sharedData.imagesErrorCounter+a.sharedData.imagesSuccessCounter===h,d=b||c;d&&(a.sharedData.imagesSuccessCounter=0,a.sharedData.imagesErrorCounter=0,a.stretchImages(),a.$emit("Carousel.loaded")),b&&a.onLoadAction()}function g(){b.bind("load",function(){d(),e(),a.sharedData.imagesSuccessCounter++,f()}),b.bind("error",function(c){e(),b.css("display","none"),0===a.sharedData.imagesErrorCounter&&a.onErrorAction(b),a.sharedData.imagesErrorCounter++,f()})}var h=a.carouselImages.length;g()}}}),ssaCarousel.directive("ssaScrollPosition",["$window","$timeout",function(a,b){return{restrict:"EA",link:function(b,c,d){function e(a){var b,c=a.getBoundingClientRect();return b=c.width?Math.ceil(c.width):Math.ceil(c.right-c.left)}var f,g,h,i=c[0],j=function(){var d=b.carouselImages.length;switch(d){case 0:break;case 1:angular.element(c).addClass("singleGaleryItem");var j=a.document.querySelector(".adUnitGalleryItem").clientWidth;
angular.element(a.document.querySelector(".adUnitGallery")).css({width:j+"px"}),b.$apply(function(){b.carouselLoaded="visible"});break;default:for(var k=angular.element(i).find("img"),l=0,m=0;m<d;m++)l+=e(k[m]);l+=10,l+=15*(d-1),angular.element(document.querySelector(".adUnitGallery")).css({width:l+"px"}),f=i.scrollWidth,g=i.offsetWidth,h=f-g,b.$apply(function(){i.scrollLeft=h/2,b.carouselLoaded="visible"})}};b.$on("Carousel.loaded",j)}}}]),function(){var a=angular.module("ssaClickWrapper",[]);a.directive("ssaClickWrapper",["clickWrapperService",function(a){return{restrict:"E",scope:{data:"="},templateUrl:"clickWrapper.html",controller:["$scope","$timeout","$window",function(b,c,d){function e(a){return parseInt(a.clientX/d.innerWidth*100)}function f(a){return parseInt(a.clientY/d.innerHeight*100)}function g(){a.isTimerEnabled()&&(j=c(function(){a.hideClickWrapper("AutomaticClose")},1e3*o))}function h(){var a=200;l.removeClass("displayNone"),c(function(){m.addClass("show"),n.addClass("fadeIn")},a),g()}function i(){m.removeClass("show"),n.removeClass("fadeIn"),m.on("transitionend",function(){l.addClass("displayNone"),m.off("transitionend")})}var j,k=b.data.getAppInstallModel().get(),l=angular.element(document.querySelector("#clickWrapper")),m=angular.element(document.querySelector("#wrapperContent")),n=angular.element(document.querySelector(".transparentBg"));b.appTitle=k.title,b.acceptBtnText="GET",b.dismissBtnText="Cancel",b.headerText="Go to App Store";var o=a.getShowWrapperForXSec();b.displayDismissBtn=!a.isTimerEnabled(),a.shouldEnableClickableAdWithWrapper()||a.isTimerEnabled()||(l.addClass("notClickableBG"),n.addClass("transparentBgDisplay")),a.shouldEnableXWhenWrapperOpen()&&l.addClass("underXButton"),b.onWrapperPressed=function(){a.shouldEnableFullWrapperClickable()&&a.handleAcceptClick()},b.onBackgroundPressed=function(b){a.shouldBackgroundClickCloseWrapper()&&a.hideClickWrapper("BackgroundPress",e(b),f(b))},b.onAcceptPressed=function(b){b.stopPropagation(),a.handleAcceptClick()},b.onDismissPressed=function(){a.hideClickWrapper("")},b.$on("showClickWrapperElements",function(){h()}),b.$on("hideClickWrapperElements",function(){i()})}]}}])}();var ssaCloseButton=angular.module("ssaCloseButton",[]);ssaCloseButton.directive("ssaCloseButton",["dialogBoxService",function(a){return{templateUrl:"closeButton.html",restrict:"E",scope:{closeData:"=",postAction:"=",addCurrentFrameName:"=",layoutShowsPrivacyLink:"=",closeByAdunit:"="},controller:["$scope","$stateParams","$timeout","closeButtonService","LogService","dialogBoxService","productSettingsService","PRODUCT_TYPES","CLOSE_BUTTON_STATES",function(a,b,c,d,e,f,g,h,i){function j(b){i.confirmNextFrame===a.closeData.closeAction||i.confirm===a.closeData.closeAction?f.showDialogBoxDuringAd():(a.postAction&&angular.extend(b,a.postAction.getAdClosedDataObject()),d.notifyCloseClick(b))}function k(){return a.closeData&&a.closeData.endCardFlags&&a.closeData.endCardFlags.X2S&&!(a.closeData.isOfferClicked&&a.closeData.isOfferClicked())}function l(){a.$watch("closeData.hideClose",function(b,c){b!==c&&"boolean"==typeof b&&a.$emit("CloseBtn.isHidden",b)})}function m(){l(),a.closeData&&a.closeData.endCardFeatures&&a.closeData.endCardFlags&&(n(),o())}function n(){var b=a.closeData.endCardFlags.LEB;b&&!a.layoutShowsPrivacyLink&&(a.isRightButton=!1,a.closeData.leftButton=!0,d.setForceClose(!0,"top-left"))}function o(){var b=a.closeData.endCardFlags.DEC;b>0&&(a.closeData.setBackButtonBehavior&&a.closeData.setBackButtonBehavior(!0),a.closeData.hideClose=!0,a.fadeMode=!0,c(function(){a.closeData.setBackButtonBehavior&&a.closeData.setBackButtonBehavior(!1),a.fadeInMode=!0,a.fadeMode=!1,a.closeData.hideClose=!1},1e3*b))}var p="function"==typeof a.closeByAdunit;a.isRightButton=!0,a.closeAdUnit=function(b){var c={};a.addCurrentFrameName&&(c.currentFrame=a.addCurrentFrameName),a.closeData.hideClose||b.stopPropagation(),e.log("close button clicked",e.logLevel.trace);var f=k();f||p||a.closeData.hideClose?(c.ignoreClick=!0,j(c),a.closeData.hideClose||(a.closeByAdunit(f),f&&(a.closeData.endCardFlags.X2S=!1))):(a.postAction&&angular.extend(c,a.postAction.getAdClosedDataObject()),d.notifyCloseClick(c))},m()}]}}]),function(){var a=angular.module("ssaCloseLogo",[]);a.directive("ssaCloseLogo",["CLOSE_BUTTON_STYLES",function(a){var b={hideClose:!1,"class":a["default"]};return{restrict:"E",templateUrl:"closeSimple.html",scope:{closeData:"="},link:function(a,b,c){var d=b.children();a.closeData.closeUrl&&a.closeData.closeUrl.portrait&&d.css({"background-image":"url("+a.closeData.closeUrl.portrait+")","background-repeat":"no-repeat"}),a.closeData.leftButton&&d.css({"float":"left"})},controller:["$scope","$element","productSettingsService",function(a,c,d){var e=c.children();a.closeData=a.closeData||b,d.shouldRemoveTranslateZOnCloseButton()&&e.addClass("noTranslateZ")}]}}])}(),function(){var a=angular.module("ssaDialogBox",[]);a.directive("ssaDialogBox",function(){return{restrict:"E",replace:!0,scope:{buttonData:"="},templateUrl:"ssaDialogBoxTemplate.html",controller:["$scope",function(a){function b(b){a.dialogBoxBodyText=b.bodyText,a.dialogBoxConfirmLabel=b.confirmLabel,a.dialogBoxCancelLabel=b.cancelLabel,a.dialogBoxCancelFunction=b.cancelCB,a.dialogBoxConfirmFunction=b.confirmCB,a.mode="phone",a.dialogBoxContainerClicked=function(a){a.stopPropagation()}}function c(){a.dialogBoxBodyText="",a.dialogBoxConfirmLabel="",a.dialogBoxCancelLabel="",a.dialogBoxCancelFunction=function(){},a.dialogBoxConfirmFunction=function(){}}function d(c,d){b(d),a.dialogShouldBeDisplayed=!0,h.css({visibility:"visible"})}function e(b,d){h.css({visibility:"hidden"}),a.dialogShouldBeDisplayed=!1,a.dialogBoxConfirmFunction(),c()}function f(b,d){h.css({visibility:"hidden"}),a.dialogShouldBeDisplayed=!1,a.dialogBoxCancelFunction(),c()}function g(){h=angular.element(document.getElementById("dialogBoxOverlay")),a.$on("ssaDialogBox.openDialog",d),a.cancelDialogBoxClicked=f,a.confirmDialogBoxClicked=e}var h;g()}]}})}(),function(){var a=angular.module("ssaEaClickHere",[]);a.directive("ssaEaClickHere",function(){return{restrict:"E",templateUrl:"ssaEaClickHere.html"}})}(),function(){var a=angular.module("ssaExtraOffer",[]);a.directive("ssaExtraOffer",function(){return{restrict:"E",scope:{adData:"=",hostFrameName:"="},templateUrl:"extraOffer.html",controller:["$scope","creativeService","adapter","analytics","endCardService","EXTRA_OFFERS_EVENTS",function(a,b,c,d,e,f){function g(){b.addCreative(a.adData).then(function(){var c=b.getCreative(a.adData.crid);j=c.getPostActionModel(),k=c.getHybridModel()})}function h(){}function i(){}a.handleExtraOfferClick=function(){d.trackEvent(f.extraOfferClicked,{},{bannerId:a.adData.crid,creativeId:a.adData.creativeId,currentframe:a.hostFrameName}),c.call({method:"AdClicked",arguments:{}}),e.handlePostActionClick(j,k,h,i)};var j,k;a.img=a.adData.ext.appData.appIcon,a.adTitle=a.adData.ext.appData.title,g()}]}})}(),function(){var a=angular.module("ssaExtraOffersContainer",[]);a.directive("ssaExtraOffersContainer",function(){return{restrict:"E",templateUrl:"extraOffersContainer.html",controller:["$scope","$rootScope","$element","analytics","extraOffersService","placeholderManager","EXTRA_OFFERS_EVENTS","FIRE_PIXEL_STRATEGIES","INVIEW_CONFIG","AdUnitMappingService",function(a,b,c,d,e,f,g,h,i,j){function k(){angular.element(window).triggerHandler("checkInView")}function l(){var b=a.vm&&a.vm.FMFunctions&&a.vm.FMFunctions.getCurrentFrameName();return j.getFrameNameForEventsByFrameName(b)}function m(){a.onExtraOfferInview=angular.noop,o.off("scroll")}var n,o=angular.element(c.children()[0]),p={};n=a.$on("AdController.extraOffersEndCardData",function(c,d){d&&d.data&&d.data.inventory&&d.data.inventory.seatbid&&d.data.inventory.seatbid.bid&&(a.extraOfferAds=d.data.inventory.seatbid.bid,a.$apply(a.extraOfferAds),b.$broadcast("AdUnit.extraOffersReceived",!0),p=e.buildExtraOffersImpressionsMap(a.extraOfferAds))}),a.$on("AdController.cancelExtraOffersEndCard",function(a,b){n&&n()}),a.extraOffersContainerInviewOptions={offset:[i.NinetyPercentArea,i.noArea],alwaysFire:!0},o.one("animationend",function(){a.hostFrameName=l(),a.onExtraOffersContainerInview=q,a.onExtraOfferInview=r,k()}),o.on("scroll",k),a.extraOfferInviewOptions={offset:[i.noArea,i.halfArea],alwaysFire:!0},a.onExtraOffersContainerInview=angular.noop,a.onExtraOfferInview=angular.noop;var q=function(b){b&&(d.trackEvent(g.extraOffersVisible,{},{feedSize:a.extraOfferAds.length,currentframe:a.hostFrameName}),a.onExtraOffersContainerInview=angular.noop)},r=function(a,c){if(a&&p.hasOwnProperty(c)){var d=f.replaceAllConstPlaceholders(p[c]),e={url:d,type:h.pixel};b.$broadcast("PixelDirective.FirePixel",e),delete p[c],0===Object.keys(p).length&&m()}}}]}})}(),function(){var a=angular.module("ssaGenericButton",[]);a.directive("ssaGenericButton",function(){return{restrict:"E",replace:!0,scope:{buttonData:"="},templateUrl:"ssaGenericButtonTemplate.html",controller:["$scope",function(a){a.title=a.buttonData&&a.buttonData.title?a.buttonData.title:"",a.clickAction=a.buttonData&&a.buttonData.clickAction?a.buttonData.clickAction:angular.noop,a.style=!(!a.buttonData||!a.buttonData.style)&&a.buttonData.style}]}})}(),function(){var a=angular.module("ssaIcon",[]);a.directive("ssaIcon",function(){return{restrict:"E",replace:!0,scope:{appData:"=",componentCustomConfig:"="},templateUrl:"ssaIconTemplate.html",controller:["$scope","loadImageAssetService",function(a,b){a.imageVisibilityHidden=!(a.appData.hasOwnProperty("icon")&&""!==a.appData.icon&&null!==a.appData.icon);var c=function(){a.$apply(function(){a.componentCustomConfig&&(a.imageVisibilityHidden=!!a.componentCustomConfig.hideIconIfFailed,"function"==typeof a.componentCustomConfig.onIconFailedCallback&&a.componentCustomConfig.onIconFailedCallback())})};a.componentCustomConfig&&a.componentCustomConfig.hasOwnProperty("validateIcon")&&b(a.appData.icon,null,c)}]}})}(),function(){var a=angular.module("ssaInstallButton",[]);a.directive("ssaInstallButton",function(){return{restrict:"E",replace:!0,scope:{postActionFunction:"=",postActionTitle:"=",isWiggle:"="},templateUrl:"ssaInstallButtonTemplate.html",controller:["$scope",function(a){a.postActionFunction=a.postActionFunction||angular.noop}]}})}(),function(){var a=angular.module("ssaInstallClickable",[]);a.directive("ssaInstallClickable",function(){return{restrict:"E",scope:{postActionFunction:"=",postActionTitle:"=",appData:"=",componentCustomConfig:"=",isWiggle:"=",textClampConfig:"="},templateUrl:function(a,b){return b.tpl+".html"},controller:["$scope",function(a){a.postActionFunction=a.postActionFunction||angular.noop,a.appData.starsImageName=a.appData.starsImageName||"stars-bright-background"}]}})}(),function(){var a=angular.module("ssaLogo",[]);a.directive("ssaLogo",function(){return{restrict:"E",scope:{deviceType:"="},replace:!0,templateUrl:"ssaLogoTemplate.html",controller:["$scope",function(a){}]}})}();var ssaMuteButton=angular.module("ssaMuteButton",[]);ssaMuteButton.directive("ssaMuteButton",["analytics","VIDEO_EVENTS",function(a,b){return{templateUrl:"muteButton.html",restrict:"E",scope:{muteBtnIcon:"=",videoId:"="},link:function(c,d,e){c.muteClassName="sprite-images-ssaMuteBtnImg",c.unMuteClassName="sprite-images-ssaUnmuteBtnImg",c.muteClick=function(d){d&&(d.stopPropagation(),d.preventDefault()),c.muteBtnIcon=!c.muteBtnIcon,c.$emit("MuteButton.Clicked",{shouldMute:c.muteBtnIcon}),a.trackEvent(b.clickVideoSound,{isMute:c.muteBtnIcon})}}}}]);var ssaNotification=angular.module("ssaNotification",[]);ssaNotification.controller("ssaNotificationController",["$scope","AdUnitDelivery",function(a,b){a.textConfig={minFontSize:"12",notificationData:a.notificationData};var c=a.defaultColor||"#efefef",d=a.defaultOverlayColor||"#000",e={};a.notificationColor=a.notificationData&&a.notificationData.textColor&&""!==a.notificationData.textColor?a.notificationData.textColor:c,a.notificationBGColor=a.notificationData&&a.notificationData.backgroundColor&&""!==a.notificationData.backgroundColor?a.notificationData.backgroundColor:d;var f=[4,34,5,35],g=function(a){var c=b.service,d=c().getTemplateId();return!(f.indexOf(d)!==-1&&"after"===a)};a.updateNotificationDataText=function(){a.notificationData&&(e={"default":a.notificationData.duringData,during:a.notificationData.duringData,after:a.notificationData.afterData})},a.notificationData&&(a.notificationData.show=!1,a.updateNotificationDataText()),a.$on("ssaNotification.show",function(b,c){c&&a.notificationData&&(a.notificationData.data="undefined"!==e[c.state]?e[c.state]:e["default"],a.notificationData.show=!!a.notificationData.data,a.notificationData.useAnimation=g(c.state))}),a.$on("ssaNotification.hide",function(){a.notificationData.show=!1})}]).directive("ssaNotification",["$timeout",function(a){var b=null;return{templateUrl:"notificationTemplate.html",restrict:"E",replace:!0,scope:{notificationData:"=",defaultColor:"@",defaultOverlayColor:"@"},link:function(c,d,e){c.$watch("notificationData",function(e,f){a.cancel(b),null===c.notificationData||null===c.notificationData.data||""===c.notificationData.data?d.css("display","none"):d.css("display","block"),c.updateNotificationDataText&&c.updateNotificationDataText()}),c.$watch("notificationData.show",function(e,f){return a.cancel(b),null!==c.notificationData&&c.notificationData.hasOwnProperty("useAnimation")&&c.notificationData.useAnimation===!1?(d.removeClass("move-out").addClass("noAnimationNotification"),void(c.notificationData.show=!0)):void(null!==c.notificationData&&c.notificationData.hasOwnProperty("show")&&c.notificationData.show===!1?d.removeClass("move-in").addClass("move-out"):(d.removeClass("move-out").addClass("move-in"),null!==c.notificationData&&"undefined"!=typeof c.notificationData.fadeout&&null!==c.notificationData.fadeout&&0!==c.notificationData.fadeout&&(b=a(function(){c.notificationData.show=!1},1e3*c.notificationData.fadeout))))})},controller:"ssaNotificationController"}}]),function(){var a=angular.module("ssaPrivacyLink",[]);a.directive("ssaPrivacyLink",function(){return{restrict:"E",replace:!0,scope:{privacyLink:"=",privacyCircleText:"=",privacyOnLeft:"=",bannerPrivacy:"="},templateUrl:"ssaPrivacyLinkTemplate.html",controller:["$scope","$window","$timeout","productSettingsService","adapter","analytics","PRIVACY_CLICKED_EVENT","PRIVACY_LINK_TEXT",function(a,b,c,d,e,f,g,h){function i(){var b=d.getAdContainerInfoText();a.privacyCircleText=b,a.privacyCircleClassName=j(b)}function j(a){return a.length>1?"privacyCircleDivSmall":"privacyCircleDivDefault"}function k(){var b=a.privacyLink||d.getPrivacyLinkUrl();if(!b)return!1;b=b.replace(q,l());var c={type:"openUrl",url:b,method:"external_browser"};f.trackEvent(g),e.call({method:"ActionClick",arguments:c,callback:function(){}})}function l(){var a={},b="";try{a.bannerid=""+d.getCRID(),a.campaignid=""+d.getCID(),a.creativeid=""+d.getCreativeId(),a.opportunityid=""+d.getRequestOpportunityData().opportunityId,a.requestid=""+d.getRequestOpportunityData().requestId,a.bundleid=""+d.getBundleId(),b=btoa(JSON.stringify(a))}catch(c){}return b}function m(){return p.hasClass(r)}function n(a){a&&(a.stopPropagation(),a.preventDefault()),p.hasClass(r)||(p.removeClass(s),p.addClass(r),c(function(){p.removeClass(r),p.addClass(s)},o))}var o=2e3,p=angular.element(document.querySelector(".privacyFlach")),q="[data]",r=a.bannerPrivacy?h.showPrivacyLinkAnimBanner:h.showPrivacyLinkAnim,s=a.bannerPrivacy?h.hidePrivacyLinkAnimBanner:h.hidePrivacyLinkAnim;a.privacyFlachText=a.bannerPrivacy?h.bannerText:h.privacyText,i(),a.handlePrivacyLink=function(a){a&&(a.stopPropagation(),a.preventDefault()),m()?k():n()}}]}})}(),function(){var a=angular.module("ssaRate",[]);a.directive("ssaRate",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"ssaRateTemplate.html",controller:["$scope",function(a){var b;a.generateBigRandomNumber=function(){if(!b){var a=999999,c=399999*Math.random();b=a-c}return b}}]}})}(),function(){var a=angular.module("ssaRefreshButton",[]);a.directive("ssaRefreshButton",function(){return{restrict:"E",replace:!0,scope:{refreshActionFunction:"=",refreshButtonTitle:"="},templateUrl:"ssaRefreshButtonTemplate.html",controller:["$scope",function(a){a.refreshActionFunction=a.refreshActionFunction||angular.noop}]}})}(),function(){var a=angular.module("ssaRewardsStatusLink",[]);a.directive("ssaRewardsStatusLink",function(){return{restrict:"E",replace:!0,scope:{},templateUrl:"ssaRewardsStatusLinkTemplate.html",controller:["$scope","$window","$timeout","productSettingsService","adapter","analytics","PRIVACY_CLICKED_EVENT","OW_ANALYTICS_CATEGORIES",function(a,b,c,d,e,f,g,h){function i(a){return a.length>1?"rewardsCircleDivSmall":"rewardsCircleDivDefault"}function j(){var b=d.getAdContainerInfoText();a.rewardsStatusCircleText=b,a.rewardsStatusCircleClassName=i(b)}function k(){e.call({method:"ActionClick",arguments:{type:"openUrl",url:l.linksData.contactSupport.url,externalBrowser:!0},callback:null})}var l=this;l.init=function(){l.linksData=d.getLinksData(),a.showInfoButton=d.isRewardsStatusLinkOn()},j(),l.init(),a.handleRewardedStatusLinkClicked=function(a){f.trackEvent(h.rewardsStatusLink),k()}}]}})}();var ssaSkipIn=angular.module("ssaSkipIn",[]);ssaSkipIn.directive("ssaSkipIn",function(){var a,b;return{templateUrl:"skipInTemplate.html",restrict:"E",scope:{skipInData:"=",postAction:"=",closeByAdunit:"=",layoutShowsPrivacyLink:"="},controller:["$scope","SSA_Utils","adapter",function(c,d,e){function f(){e.call({method:"SetForceClose",arguments:{isEnable:!1}})}function g(){c.skipInData&&(a=c.skipInData.skipInTime,b=c.skipInData.skipInText,a&&a>0?(d.addHandlerToAdVisible(f),k(b)):c.hideCloseButton=!1)}function h(){c.skipInClass="skipInShow",c.skipInRemainingTime=a}function i(a){c.skipInData.isSkipButtonFlow||(c.skipInData.allowBackButton=!0),a&&(c.skipInClass="skipInHide")}function j(b){0===a?(i(b),c.xButtonClass="visible",c.skipInData.hideClose=!1,c.$emit("skipIn.skipInTimeEnded")):b&&h()}function k(b){c.skipInClass="invisible",c.xButtonClass="invisible",c.skipInData.allowBackButton=!1,c.skipInData.hideClose=!0;var d=c.$on("SkipIn.Tick",function(e,f){isNaN(parseInt(f))||(a=c.skipInData.skipInTime-f,a>=0?j(b):d())})}g()}]}}),function(){function a(a){return{restrict:"E",scope:{socialData:"=",onClick:"=",uxTemplate:"="},templateUrl:"socialButtonsTemplate.html",link:function(b,c,d){function e(){var b=19,d="dropShadowRound",e="borderRadiusRound",f=a.getDeviceData(),g=f.apiLevel?f.apiLevel:f.osVersion;"android"===f.os&&g<=b?c.addClass(e):c.addClass(d)}function f(){var a=b.uxTemplate.getTemplateId();a===g&&e()}var g=5;f()}}}a.$inject=["productSettingsService"];var b=angular.module("ssaSocialButtons",[]);b.directive("ssaSocialButtons",a)}();var ssaSpinner=angular.module("ssaSpinner",[]);ssaSpinner.directive("ssaSpinner",["LogService",function(a){return{scope:!1,templateUrl:"spinnerTemplate.html",restrict:"E",controller:["$scope",function(b){b.$on("ssaSpinner.show",function(c,d){b.showSpinner=!0,b.showOverlay=d&&d.showOverlay,a.log("Show Spinner",a.logLevel.trace)}),b.$on("ssaSpinner.hide",function(){b.showSpinner=!1,a.log("Hide Spinner",a.logLevel.trace)}),b.closeData={hideClose:!0}}]}}]);var ssaStars=angular.module("ssaStars",[]);ssaStars.directive("ssaStars",[function(){return{restrict:"EA",scope:{starsData:"="},link:function(a,b,c){var d=a.starsData.numOfStars;d%1===0?d+="-0":d=d.toString().replace(".","-"),b.addClass("sprite-images-"+c.starsImageName+"-"+d)}}}]),function(){var a=angular.module("ssaStatusBar",[]);a.directive("ssaStatusBar",function(){return{restrict:"E",replace:!0,scope:{progressBarConfig:"="},templateUrl:"ssaStatusBarTemplate.html",controller:["$scope",function(a){var b={usingAnimation:!0,color:"red",progressValue:"almostFull"};a.barConfig=a.progressBarConfig||b}]}})}();var ssaProgressBar=angular.module("ssaProgressBar",[]);ssaProgressBar.directive("ssaProgressBar",["$window",function(a){return{templateUrl:"progressBarTemplate.html",link:function(b,c,d){function e(){j(),l()}function f(){if(b.timerData){t=b.timerData.timeUntilTimer,b.timerData.countTo=b.timerData.completionCountdown,g(),v=p.getContext("2d"),w=q.getContext("2d"),n=x(v),o=x(w),1.5===n&&(n=1),1.5===o&&(o=1),v.setTransform(n,0,0,n,0,0),w.setTransform(o,0,0,o,0,0),h(),i(b);b.$watch(function(a){return a.timerData.showTimer},function(a,c){"undefined"!=typeof a&&c!==a&&i(b)})}}function g(){p=document.getElementsByClassName("timer-canvas")[0],q=document.getElementsByClassName("progress-bar-canvas")[0],r=document.getElementsByClassName("sprite-images-ssaRisGift")[0],s=document.getElementsByClassName("sprite-images-ssaRisGiftBlue")[0]}function h(){p.style.zIndex=15,r.style.zIndex=15,s.style.zIndex=15,y.timerColor="rgba(0,0,0,1)",y.textColor="rgba(255,255,255,1)",y.arcColor="rgba(16,198,227,1)",b.timerData.isPreCache?b.timerData.isSecured?y.fontFace="eas_briemsemibold_preCache_secured":y.fontFace="eas_briemsemibold_preCache":y.fontFace="eas_briemsemibold_nonPreCache",angular.element(a.document.querySelector(".fontLoader")).css({"font-family":y.fontFace})}function i(a){y.min=0,y.sec=a.timerData.countTo,y.inc=360/a.timerData.countTo,y.show=a.timerData.showTimer,z.colored=0,z.counter=0,z.watchedColor="rgba(16,198,227,1)",z.unwatchedColor="rgba(255,255,255,1)",z.time=a.timerData.countTo}function j(){var a=p.clientWidth,b=p.width=a*n,c=p.height=a*n;p.style.width=a+"px",p.style.height=a+"px",v.beginPath(),v.lineWidth=2*n,v.fillStyle=y.timerColor,v.strokeStyle=y.arcColor,v.arc(b/2,c/2,12*n,0,2*Math.PI,!1),v.fill(),v.stroke(),v.closePath()}function k(a){var b=u||document.documentElement.clientWidth-2*A,c=q.clientHeight,d=q.width=b*o;q.height=c*o;var e=d*a/(z.time-1);z.colored=e,z.uncolored=d-z.colored,1===o&&(c=q.height/2),q.style.left=A+"px",q.style.right=b-A+"px",w.fillStyle=z.unwatchedColor,w.fillRect(z.colored,0,z.uncolored,c),w.fillStyle=z.watchedColor,w.fillRect(0,0,z.colored,c)}function l(){if(0!==y.min||0!==y.sec){v.fillStyle=y.textColor;var a=12*n+"px "+y.fontFace;v.font=a,y.sec>99?(a=10*n+"px "+y.fontFace,v.font=a,v.fillText(y.sec,6*n+1,19*n)):y.sec<20&&y.sec>9?v.fillText(y.sec,8*n,19*n):y.sec<10?v.fillText("0"+y.sec,8*n+1,19*n):v.fillText(y.sec,8*n+1,19*n),y.sec<=0&&y.min>0?(y.min--,y.sec=59):y.sec--}}function m(){u=document.documentElement.clientWidth-2*A,k()}var n,o,p,q,r,s,t,u,v,w,x=function(b){var c,d;return c=a.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,c/d},y={},z={},A=36;f(),b.$on("Component.PartialTick",function(a,c){if(!isNaN(parseInt(c))&&(y.show===!0||"true"===y.show)){if(t>0)return;b.timerData.countTo>=1?k(c):(k(z.time-1),b.replayMode||(angular.element(r).removeClass("timerFadeIn").addClass("invisible"),angular.element(s).addClass("rewarded")))}}),b.$on("Component.Tick",function(a,c){isNaN(parseInt(c))||y.show!==!0&&"true"!==y.show||(t>0?t--:b.timerData.countTo>=0&&(angular.element(p).addClass("timerFadeIn"),angular.element(q).addClass("timerFadeIn"),b.replayMode?angular.element(s).addClass("timerFadeIn"):angular.element(r).addClass("timerFadeIn"),e(),0===b.timerData.countTo&&(b.$emit("TimerUI.Completed",""),y.sec=0,y.min=0,angular.element(p).removeClass("timerFadeIn").addClass("timerFadeOut"),angular.element(q).removeClass("timerFadeIn").addClass("timerFadeOut"),b.replayMode&&angular.element(s).removeClass("timerFadeIn").addClass("timerFadeOut")),b.timerData.countTo--))}),a.addEventListener("resize",m)}}}]);var ssaTimeProgress=angular.module("ssaTimeProgress",["ssaProgressBar","ssaTimer"]);ssaTimeProgress.directive("ssaTimeProgress",["$compile",function(a){return{replace:!0,scope:{timerData:"=",replayMode:"="},link:function(b,c,d){var e="<div "+b.timerData.timerClass+"></div>",f=angular.element(a(e)(b));c.replaceWith(f)}}}]);var ssaTimer=angular.module("ssaTimer",[]);ssaTimer.directive("ssaTimer",["$window",function(a){var b,c,d,e,f=function(b){var c,d;return c=a.devicePixelRatio||1,d=b.webkitBackingStorePixelRatio||b.mozBackingStorePixelRatio||b.msBackingStorePixelRatio||b.oBackingStorePixelRatio||b.backingStorePixelRatio||1,c/d},g={};return{templateUrl:"timerTemplate.html",link:function(a,h,i){function j(){l(),m()}function k(){if(a.timerData){d=a.timerData.timeUntilTimer,a.timerData.countTo=a.timerData.completionCountdown,c=h.find("canvas")[0],e=c.getContext("2d"),b=f(e),1.5===b&&(b=1),e.setTransform(b,0,0,b,0,0),g.timerColor="rgba(255,255,255,0.1)",g.textColor="rgba(255,255,255,0.8)",g.arcColor="rgba(255,255,255,0.8)",g.fontFace="helvetica light, roboto light, arial, sans-serif",n(a);a.$watch(function(a){return a.timerData.showTimer},function(b,c){"undefined"!=typeof b&&c!==b&&n(a)})}}function l(){var a=c.clientWidth,d=c.width=a*b,f=c.height=a*b;c.style.width=a+"px",c.style.height=a+"px",e.beginPath(),e.lineWidth=2*b,e.fillStyle=g.timerColor,e.arc(d/2,f/2,12*b,0,2*Math.PI,!1),e.fill(),e.closePath(),e.beginPath(),e.lineWidth=2*b,e.strokeStyle=g.arcColor,e.arc(d/2,f/2,12*b,-90*Math.PI/180,Math.PI/180*g.angle,!1),e.stroke(),e.closePath()}function m(){if(0!==g.min||0!==g.sec){e.fillStyle=g.textColor;var a=12*b+"px "+g.fontFace;e.font=a,g.sec>99?(a=10*b+"px "+g.fontFace,e.font=a,e.fillText(g.sec,6*b+1,19*b)):g.sec<20&&g.sec>9?e.fillText(g.sec,8*b,19*b):g.sec<10?e.fillText("0"+g.sec,8*b+1,19*b):e.fillText(g.sec,8*b+1,19*b),g.sec<=0&&g.min>0?(g.min--,g.sec=59,g.angle-=g.inc):(g.angle-=g.inc,g.sec--)}}function n(a){g.min=0,g.sec=a.timerData.countTo,g.inc=360/a.timerData.countTo,g.angle=270,g.show=a.timerData.showTimer}k(),a.$on("Component.Tick",function(b,e){isNaN(parseInt(e))||g.show!==!0&&"true"!==g.show||(d>0?d--:a.timerData.countTo>=0&&(angular.element(c).addClass("timerFadeIn"),j(),0===a.timerData.countTo&&(a.$emit("TimerUI.Completed",""),g.sec=0,g.min=0,g.angle=-90,angular.element(c).removeClass("timerFadeIn").addClass("timerFadeOut")),a.timerData.countTo--))})}}}]);var ssaInternalVideo=angular.module("ssaVideoTest.internal",[]);ssaInternalVideo.directive("ssaInternalVideoPlayerTest",["$window","$timeout","LogService","SSA_Utils","ADUNIT_EVENTS","productSettingsService","analytics","adapter",function(a,b,c,d,e,f,g,h){return{templateUrl:"internal360PlayerTemplate.html",replace:!0,restrict:"E",link:function(f,i,j){function k(a){var b=0,c=function(a){l(a[b],function(){b++,b<a.length?c(a):n()})};c(a)}function l(a,b){var c=document.createElement("script");c.onload=function(){b()},c.onerror=function(){f.$emit("Video.LoadedError","video loaded error","test error loading script")},c.src=a,i.append(c)}function m(b){var c=a.document.createElement("link");c.rel="stylesheet",c.type="text/css",c.href=b,a.document.getElementsByTagName("head")[0].appendChild(c)}function n(){f.$emit("Video.Loaded","video loaded"),c.log(I+'all scripts loaded"',c.logLevel.trace),H||(H=!0)}function o(a){f.$evalAsync(function(){f.$emit("Video.TimeTick",a)})}function p(){return f.videoData.hasOwnProperty("clickThrough")&&(o("click"),f.videoData.clickThrough&&("ended"!==J&&N[0].pause(),h.call({method:"ActionClick",arguments:{type:"openUrl",url:f.videoData.clickThrough,method:"external_browser"}}))),!1}function q(){return f.videoData.hasOwnProperty("clickThrough")&&f.videoData.clickThrough||K!==!0&&b(function(){t()},100),!1}function r(){var a=document.getElementById("overlayContent");a.style.top=Math.max(0,(window.outerHeight-a.clientHeight)/2)+"px",a.style.left=Math.max(0,(window.outerWidth-a.clientWidth)/2)+"px",a.style.visibility="visible"}function s(){var a=document.getElementById("overlay"),b=document.getElementById("overlayContent");a.style.display="none",b.style.display="none",document.getElementById("watermark360").style.visibility="visible"}function t(){if(c.log("PlayVideo method - playVideoCalled="+V,c.logLevel.trace),!V){if(r(),!H)return void f.$emit("ssaSpinner.show","");V=!0,f.$apply(function(){u(a,a.videojs)})}}function u(a,b){f.$emit("ssaSpinner.hide","");var c=b("videojs-panorama-player",{},function(){a.addEventListener("resize",function(){var a=c.getChild("Canvas");a&&a.handleResize()})}),d=document.getElementById("videojs-panorama-player"),e=d.offsetWidth,h=d.offsetHeight;c.width(e),c.height(h),c.panorama({clickToToggle:!1,autoMobileOrientation:!0,initFov:100,showNotice:!1,callback:function(){c.play(),c.pause(),setTimeout(function(){c.play();var a=F();a||W||(W=!0,g.trackEvent(U.error))},600)}})}function v(){N[0].pause()}function w(){b(t,50)}function x(){s()}function y(a){f.$emit("Video.BufferEnd",{success:a})}function z(){Q<=T?(t(),Q++):(v(),y(!1))}function A(){d.addHandlerToAdVisible(w),y(!0),O.currentTime=0,P=!1}function B(){return!1}function C(){f.isReplayVideo&&w(),!f.isPreCache&&!f.isPreload||d.isAdUnitVisible()?w():d.addHandlerToAdVisible(w)}function D(){b(function(){R=(O.buffered.end(0)/O.duration*100).toFixed(2),c.log("setCheckBuffer loaded "+R+"% bufferCount: "+Q,c.logLevel.trace),R>=f.videoData.videoBufferPercentage?(c.log("setCheckBuffer - we have required buffer",c.logLevel.trace),A()):z()},S)}function E(){d.callOnVisible(function(){G=!0,t()}),P?w():C()}function F(a){if(window.WebGLRenderingContext){for(var b=document.createElement("canvas"),c=["webgl","experimental-webgl","moz-webgl","webkit-3d"],d=!1,e=0;e<4;e++)try{if(d=b.getContext(c[e]),d&&"function"==typeof d.getParameter)return!a||{name:c[e],gl:d}}catch(f){}return!1}return!1}var G,H=!1,I="Video JS event : ",J=null,K=!1,L=-1,M=!1,N=i.find("video"),O=N[0],P=B(),Q=0,R=0,S=100,T=1200,U={error:{name:"360_WebGl_error",id:116}},V=!1,W=!1;m("https://networksdk.ssacdn.com/test/360/dist/video.js/video-js.css"),m("https://networksdk.ssacdn.com/test/360/dist/videojs-panorama.css");var X=["https://networksdk.ssacdn.com/test/360/dist/video.js/video.js","https://networksdk.ssacdn.com/test/360/dist/three.js/three.js","https://networksdk.ssacdn.com/test/360/dist/videojs-panorama.v5.js"];k(X),N.bind("ended",function(){if(0===N[0].currentTime)return void c.log(I+"ended returned (time = 0)",c.logLevel.trace);b(function(){f.$emit("ssaSpinner.hide","")},0),J="ended",K=!0,c.log(I+"ended",c.logLevel.trace);var a={type:"internal",videoDuration:f.videoData.videoTime||f.completionCountdown,isReplayVideo:f.isReplayVideo};H=!1,f.$emit("Video.Ended",a)}),N.bind("error",function(a){c.log(I+"error: "+JSON.stringify(a),c.logLevel.trace)}),N.bind("abort",function(){c.log(I+"abort",c.logLevel.trace)}),N.bind("stalled",function(){c.log(I+"stalled",c.logLevel.trace)}),N.bind("loadeddata",function(){J="loadstart"}),N.bind("loadstart",function(){c.log("Video: event - loadstart ",c.logLevel.trace),P&&(f.$emit("Video.BufferStart","internal"),z())}),N.bind("canplay",function(){J="canplay",c.log(I+"canplay",c.logLevel.trace)}),N.bind("pause",function(){if(!P){if(N[0].currentTime===N[0].duration||"ended"===J||K===!0)return void c.log(I+"pause returned",c.logLevel.trace);J="pause",c.log(I+"pause",c.logLevel.trace),f.$emit("Video.Paused","internal")}}),N.bind("waiting",function(){J="waiting",c.log(I+"waiting",c.logLevel.trace)}),N.bind("seeking",function(){c.log(I+"seeking",c.logLevel.trace)}),N.bind("fullscreenchange",function(){c.log(I+"fullscreenchange",c.logLevel.trace)}),N.bind("playing",function(){P?(v(),D()):(J="playing",f.$emit("Video.Playing","playing"),M||(M=!0,f.$emit("Video.Started",{videoDuration:N[0].duration||0}),c.log("Internal Video: event - started playing",c.logLevel.debug),x()),c.log("Internal Video: event - playing: |"+N[0].currentTime,c.logLevel.debug))}),N.bind("click",q),N.bind("timeupdate",function(){var a=parseInt(N[0].currentTime);N[0].currentTime>0&&(L===-1&&N.bind("touchend",function(a){return c.log("internal video event: touchstart",c.logLevel.debug),a.stopPropagation(),a.preventDefault(),p(),!1}),a>L&&(L=a,o(a)))}),f.$on("AdController.viewableChange",function(a,d){if(d&&"object"==typeof d){c.log("AdController.viewableChange: "+JSON.stringify(d),c.logLevel.trace),G=d.isViewable;var e=!0;d.hasOwnProperty("webview")&&(e="main"===d.webview),"true"!==G&&G!==!0||!e?"false"!==G&&G!==!1||!e||"android"===f.deviceDetails.os&&N.css("display","none"):("android"===f.deviceDetails.os&&N.css("display","block"),
"ended"!==J&&null!==J&&"loadstart"!==J&&K===!1?b(function(){c.log("AdController resume event received (internal video).",c.logLevel.debug),H&&"canplay"===J?t():H&&"pause"===J&&N[0].play()},200):"ended"!==J&&K!==!0||(N[0].currentTime-=1))}}),f.$on("AdController.deviceStatusChanged",function(a,d){c.log("AdController event received in internal video: "+JSON.stringify(d),c.logLevel.trace),!angular.isDefined(d.earphonesConnected)||"false"!==d.earphonesConnected&&d.earphonesConnected!==!1||!G||K||b(function(){t()},100)}),f.$on("AdController.Play",function(a,b){c.log("AdController event received (internal video)",c.logLevel.debug),t()}),f.$on("AdController.Pause",function(a,b){c.log("internal video event triggered: pause",c.logLevel.trace),N[0].pause()}),f.$on("AdController.Mute",function(a,b){c.log("internal video event triggered: mute ="+b,c.logLevel.trace),N.prop("muted",b)}),f.$on(e.VIDEO_STOP,function(){c.log("Internal Video: video stop event",c.logLevel.trace),v()}),f.$on("$destroy",function(){}),E()},controller:["$scope","$sce",function(a,b){function c(a){var b=a.substring(a.lastIndexOf("/")+1);return"https://networksdk.ssacdn.com/test/360/assets/"+b}var d=a.videoData.videoSource;a.videoDataUrlMp4=b.trustAsResourceUrl(c(d.videoformat_mp4)),a.$on("$destroy",function(){a.$emit("ssaSpinner.hide","")})}]}}]),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){function G(){$=a.videoData.videoSource.mraid||a.videoData.videoSource.html,X=e.find("iframe")[0],W=X.contentWindow,g.injectExternalAPIScript(X,a.videoData.videoSource.htmlURL,H,I),_=o.initModel().getDapiModel(),aa=o.initModel().getMraidModel(),B.init(),P(),Q(),a.$on("frame."+v.backButtonPressedEvent,S),a.$on("ssaExternalPlayerProgress.videoEnded",O),a.$on("ssaExternalUnifiedComponent.externalAPIConnected",M),Y=q.init({adFrame:X,element:W,callbacks:ca,generalCallbacks:da,adData:{closeData:a.closeData,postAction:a.postAction,isVpaid:L()}}),Z=p.init({adFrame:X,element:W,callbacks:ba.callbacks,thirdPartyLibsConfigs:ba.thirdPartyLibsConfigs,shouldExtractXYCoordinates:ba.shouldExtractXYCoordinates,duration:a.videoData.videoTime,isCloseButtonVisible:!a.hideClose})}function H(){}function I(){K()}function J(){a.$emit("Video.Loaded","video loaded")}function K(){a.$emit("Video.LoadedError","Failed to inject external API script")}function L(){1378027==k.getCRID()||ia.test($)}function M(a,b){b&&(b.type==l.mraid&&(ga=!0),b.type==l.dapi&&(ha=!0),ga&&ha&&J())}function N(){fa||(fa=!0,r.sendMessage({name:s.adRewarded,data:_.getState()},W,w),a.$emit("ssaIncentVideo.externalAd",{action:"reward"}),O())}function O(){ea||(ea=!0,N(),a.$emit("Video.Ended",{type:"external",videoDuration:a.timerData.completionCountdown,isReplayVideo:a.isReplayVideo}))}function P(){da={vpaidLoaded:function(a){J()},vpaidLoadedError:function(a){K(a&&a.errMsg||"vpaidLoadedError")},moatStartTracking:function(){A.notifyStartTracking()},moatStopTracking:function(){A.notifyStopTracking()},omidStartSession:function(a){var b=a||{};B.startSession(b)},omidFinishSession:function(){B.finishSession()},omidImpressionOccurred:function(a){var b=a||{};B.impressionOccurred(b)}},ca={connected:function(){a.$emit("ssaExternalUnifiedComponent.externalAPIConnected",{type:l.mraid})},getMraidData:function(){r.sendMessage({name:y.updateMraidData,data:aa.getDataObject()},W,x)},open:function(a){return aa.isInLoadingState()?void r.sendError("Call to open in loading state","open"):void V(a)},openStoreUrl:function(){return aa.isInLoadingState()?void r.sendError("Call to openStoreUrl in loading state","openStoreUrl"):void T().call(null,arguments)},expand:function(a){if(j.trackEvent(u.expand,{generalMessage:a||""}),aa.isInLoadingState())return void r.sendError("Call to expand in loading state","expand")},setExpandProperties:function(a){j.trackEvent(u.setExpandProperties,{generalMessage:JSON.stringify(a)||""}),"object"==typeof a&&(delete a.isModal,angular.extend(aa.getExpandProperties(),a),"undefined"!=typeof a.useCustomClose&&this.useCustomClose(a.useCustomClose),r.sendMessage({name:y.updateMraidData,data:aa.getDataObject()},W,x))},useCustomClose:function(b){"boolean"!=typeof b||aa.notAllowedToUseCustomClose()||(a.usedCustomClose=b,a.$apply())},close:function(){return aa.isInLoadingState()?void r.sendError("Call to close in loading state","close"):(aa.updateCurrentState(aa.getStates().hidden),r.sendMessage({name:y.updateMraidData,data:aa.getDataObject()},W,x),r.sendMessage({name:y.stateChange,data:aa.getCurrentState()},W,x),a.setCloseState(t.close),void a.closeClick())},setResizeProperties:function(a){j.trackEvent(u.setResizeProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(aa.getResizeProperties(),a),r.sendMessage({name:y.updateMraidData,data:aa.getDataObject()},W,x)},resize:function(){if(j.trackEvent(u.resize),aa.isInLoadingState())return void r.sendError("Call to resize in loading state","resize")},setOrientationProperties:function(a){j.trackEvent(u.setOrientationProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(aa.getOrientationProperties(),a),r.sendMessage({name:y.updateMraidData,data:aa.getDataObject()},W,x)},supports:function(a){j.trackEvent(u.supports,{generalMessage:a||""})},log:function(a){j.trackEvent(u.log,{generalMessage:a})},reward:N}}function Q(){ba={shouldExtractXYCoordinates:a.postAction.shouldExtractXYCoordinates(),thirdPartyLibsConfigs:{supportAF:a.postAction.shouldSupportAF()},callbacks:{connected:function(){a.$emit("ssaExternalUnifiedComponent.externalAPIConnected",{type:l.dapi})},open:function(a){V(a.url,a.callback)},openStoreUrl:T.call(null,arguments),close:function(){return h.isStoreKitVisible()?(j.trackEvent(m.closeAdBlockedStoreKit,{}),void r.sendMessage({name:s.failToCloseAd,data:z.storeKitVisible},W,w)):(_.updateState(_.getStates().hidden),_.updateViewability(!1),r.sendMessage({name:s.stateChange,data:_.getState()},W,w),r.sendMessage({name:s.updateDapiData,data:_.getDataObject()},W,w),void a.closeClick())},replay:function(){return!0},reward:N,useCustomClose:function(){return!0},interaction:function(b){a.postAction.updateEngagementUrlWithPlacement(k.getInteractionAlias(!0))},getDapiData:function(){r.sendMessage({name:s.getDeviceData,data:_.getDeviceData()},W,w)}}}}function R(){arguments[0].screenX&&arguments[0].screenY&&a.postAction.setCoordinates(arguments[0].screenX,arguments[0].screenY),a.postAction.setAFToken(arguments[0].token?arguments[0].token:null);var b=a.postAction.getXYCoordinates(),c={event:{eventName:C.adClicked,eventParams:{rvnomoreoffersreason:b,generalMessage:a.postAction.getOpenStrategy(null)}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:a.closeData.hideClose};a.postAction.isUrlExist()&&n.handlePostActionClick(a.postAction,a.hybrid,U,U,c,F.VIDEO)}function S(b,c){a.usedCustomClose||c&&c.parentBackAction&&c.parentBackAction()}function T(){return f.getDebounceFunction(D.storeKitReadyClickActionWrapper(R,a.postAction.isStoreKitClickStrategy(E.END_CARD)),k.getDebounceClickConfig())}function U(){}function V(b,d){b&&(c.call({method:"ActionClick",arguments:{type:"openUrl",url:b,method:"external_browser"},callback:d}),c.call({method:"AdClicked",arguments:{}}),a.postAction.setClickType(F.VIDEO),a.postAction.increaseClickCounter(),j.trackEvent(C.adClicked,{},a.postAction.getClickDataObject()))}var W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa=!1,ga=!1,ha=!1,ia=/ironSrc vpaid hack/;a.$on("$destroy",function(){Y.destroy(),Z.destroy()}),G()}a.$inject=["$scope","$timeout","adapter","$rootScope","$element","SSA_Utils","externalScriptsService","storeKitService","EXTERNAL_ANALYTICS_CATEGORIES","analytics","productSettingsService","EXTERNAL_API_TYPE","GENERAL_EVENTS","endCardService","externalDataService","dapiService","mraidService","iframeMessageService","DAPI_CONNECTION_EVENTS","CLOSE_BUTTON_STATES","MRAID_ANALYTICS_CATEGORIES","BACK_BUTTON_EVENTS","DAPI_MSG_PREFIXES","MRAID_MSG_PREFIXES","MRAID_COMMUNICATION_EVENTS","CLOSE_FAIL_REASON","moatService","omidService","AD_ANALYTICS_CATEGORIES","storeKitClickService","CLICK_ACTION","CLICK_TYPE"];var b=angular.module("ssaVideo.externalUnified",[]);b.directive("ssaExternalUnifiedVideoPlayer",function(){var a={templateUrl:"externalUnifiedPlayerTemplate.html",replace:!0,restrict:"E",controller:"ssaExternalUnifiedController"};return a}),b.controller("ssaExternalUnifiedController",a)}(),function(){var a=angular.module("ssaVideo.external",[]);a.directive("ssaExternalVideoPlayer",["$interval","$rootScope","analytics","CLOSE_FAIL_REASON","adUnitObfuscationService","GENERAL_EVENTS","externalDataService","$sce","DAPI_MSG_PREFIXES","DAPI_CONNECTION_EVENTS","iframeMessageService","LogService","SSA_Utils","dapiService","adapter","endCardService","productSettingsService","storeKitService","AD_ANALYTICS_CATEGORIES","storeKitClickService","CLICK_ACTION","CLICK_TYPE",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){return{templateUrl:"externalPlayerTemplate.html",replace:!0,restrict:"E",link:function(a,b,h){function w(){arguments[0].screenX&&arguments[0].screenY&&a.postAction.setCoordinates(arguments[0].screenX,arguments[0].screenY),a.postAction.setAFToken(arguments[0].token?arguments[0].token:null);var b=a.postAction.getXYCoordinates(),c={event:{eventName:s.adClicked,eventParams:{rvnomoreoffersreason:b,generalMessage:a.postAction.getOpenStrategy(null)}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:a.closeData.hideClose};a.postAction.isUrlExist()&&p.handlePostActionClick(a.postAction,a.hybrid,x,x,c,v.VIDEO)}function x(){}function y(){return m.getDebounceFunction(t.storeKitReadyClickActionWrapper(w,a.postAction.isStoreKitClickStrategy(u.END_CARD)),q.getDebounceClickConfig())}function z(){a.postAction.updateEngagementUrlWithPlacement(q.getInteractionAlias(!0))}function A(){var c=0;e.init(a.videoData.obfuscationSettings);var d=e.getObfuscationIframe();b.append(d),d.on("load",function(){a.videoData.isUnrulyCarousel?e.inject(a.videoData.unrulyData):(C(d[0]),e.inject())}),a.$on("AdController.hideFrame",function(){c=d.css("top"),d.css({top:"100%"})}),a.$on("AdController.showFrame",function(){d.css({top:c})})}function B(){K||(K=!0,k.sendMessage({name:j.adRewarded,data:I.getState()},J,i),a.$emit("ssaIncentVideo.externalAd",{action:"reward"}),E())}function C(b){if(!H&&"contentWindow"in b){var c=document.getElementsByClassName("video-wrapper")[0];J=b.contentWindow,H=n.init({adFrame:c,element:J,callbacks:M.callbacks,thirdPartyLibsConfigs:M.thirdPartyLibsConfigs,shouldExtractXYCoordinates:M.shouldExtractXYCoordinates,duration:a.videoData.videoTime,isCloseButtonVisible:!a.closeData.hideClose,requestDapiUrl:!0})}}function D(){a.$emit("Video.Loaded","video loaded")}function E(){G||(G=!0,B(),a.$emit("Video.Ended",{type:"external",videoDuration:a.completionCountdown,isReplayVideo:a.isReplayVideo}))}function F(){A(),D(),a.$on("ssaExternalPlayerProgress.videoEnded",E),I=g.initModel().getDapiModel(),a.$on("$destroy",function(){H.destroy()})}var G,H,I,J,K=!1,L=function(a,b){a&&o.call({method:"ActionClick",arguments:{type:"openUrl",url:a,method:"external_browser"},callback:b})},M={shouldExtractXYCoordinates:a.postAction.shouldExtractXYCoordinates(),thirdPartyLibsConfigs:{supportAF:a.postAction.shouldSupportAF()},callbacks:{connected:function(){return!0},open:function(a){L(a.url,a.callback)},openStoreUrl:y.call(null,arguments),close:function(){return r.isStoreKitVisible()?(c.trackEvent(f.closeAdBlockedStoreKit,{}),void k.sendMessage({name:j.failToCloseAd,data:d.storeKitVisible},J,i)):(I.updateState(I.getStates().hidden),I.updateViewability(!1),k.sendMessage({name:j.stateChange,data:I.getState()},J,i),k.sendMessage({name:j.updateDapiData,data:I.getDataObject()},J,i),void a.closeClick())},replay:function(){return!0},reward:B,useCustomClose:function(a){return!0},interaction:function(a){l.log("EXTERNAL | interaction was called "+JSON.stringify(a),l.logLevel.trace),z()},getDapiData:function(){k.sendMessage({name:j.getDeviceData,data:I.getDeviceData()},J,i)}}};F()}}}])}();var ssaInternalVideo=angular.module("ssaVideo.internal",[]);ssaInternalVideo.directive("ssaInternalVideoPlayer",["$timeout","LogService","analytics","SSA_Utils","ADUNIT_EVENTS","AD_STARTED_TIMER_LENGTH","RV_ANALYTICS_CATEGORIES","OPERATING_SYSTEMS","moatService","VIDEO_EVENTS","dialogBoxService","hybridService","storeKitService","productSettingsService","AFService","$rootScope","storeKitClickService","CLICK_ACTION","disableClickService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return{templateUrl:"internalPlayerTemplate.html",replace:!0,restrict:"E",link:function(j,l,m){function o(){return j.deviceDetails.os===h.ios&&Math.abs(T[0].currentTime-_)>aa}function q(){T[0].currentTime=R}function r(){var a=0;T[0].duration>0&&T[0].currentTime>0&&(a=T[0].currentTime/T[0].duration*100);try{a=parseInt(a)}catch(b){a=-1}return(Q||a>100)&&(a=100),a}function s(a){j.$evalAsync(function(){j.$emit("Video.TimeTick",a),j.postAction.setVideoWatchTime(a)})}function t(a){j.$evalAsync(function(){j.$emit("Video.PartialTimeTick",a)})}function u(){return j.videoData.hasOwnProperty("clickThrough")&&j.videoData.clickThrough||Q!==!0&&a(function(){v()},100),!1}function v(){b.log("PlayVideo method",b.logLevel.trace),j.isPreCache||"playing"===P||j.$emit("ssaSpinner.show",""),T[0].play()}function w(){T[0].pause()}function x(){a(v,50)}function y(a){j.$emit("Video.BufferEnd",{success:a})}function z(){X<=$?(v(),X++):(w(),y(!1))}function A(){d.addHandlerToAdVisible(x),y(!0),V.currentTime=0,W=!1}function B(){return!1}function C(){j.$emit("Video.Loaded","video loaded"),j.isReplayVideo&&x(),!j.isPreCache&&!j.isPreload||d.isAdUnitVisible()?x():d.addHandlerToAdVisible(x)}function D(){a(function(){Y=(V.buffered.end(0)/V.duration*100).toFixed(2),b.log("setCheckBuffer loaded "+Y+"% bufferCount: "+X,b.logLevel.trace),Y>=j.videoData.videoBufferPercentage?(b.log("setCheckBuffer - we have required buffer",b.logLevel.trace),A()):z()},Z)}function E(){N=a(function(){var a=F().protocol||null;c.trackEvent(g.videoFailedToPlay,null,{generalmessage:a})},f)}function F(){var a=T[0]&&T[0].children.length>0&&T[0].children[0].src;return!!a&&G(a)}function G(a){var b=document.createElement("a");return b.href=a,{host:b.hostname,port:b.port,path:b.pathname,protocol:b.protocol}}function H(){return Q===!0&&"ended"===P}function I(){O=k.init({onDialogBoxOpen:function(){H()||w()},onDialogBoxClose:function(a){H()||!a||"true"!==a.shouldResume&&a.shouldResume!==!0||v()}})}function J(){b.log("isBufferMode is "+W,b.logLevel.trace),d.callOnVisible(function(){M=!0,E()}),W?x():C(),I()}function K(){var a=j.$on("StoreKitService.StoreKitOpened",function(b,c){a(),H()||w()}),b=j.$on("StoreKitService.StoreKitClosed",function(a,c){b(),H()||v()})}function L(){return j.appData&&j.appData.appIcon}var M,N,O,P=null,Q=!1,R=-1,S=!1,T=l.find("video"),U=l.find("source"),V=T[0],W=B(),X=0,Y=0,Z=100,$=1200,_=0,aa=.5;j.fireClickOnVideoEndsFlag=!1,j.clickOnVideoEndsProgress=0,j.isCallToActionEnabled=n.isCallToActionEnabled()&&L(),V.setAttribute("poster",j.videoData.transparentPoster),T.bind("ended",function(){if(0===T[0].currentTime)return void b.log("Video event (internal): ended returned (time = 0)",b.logLevel.trace);a(function(){j.$emit("ssaSpinner.hide","")},0),P="ended",Q=!0,b.log("Video event (internal): ended",b.logLevel.debug),j.fireClickOnVideoEndsFlag&&(b.log("Video clicked after video ends",b.logLevel.debug),j.videoClicked(Q));var c={type:"internal",videoDuration:j.videoData.videoTime||j.completionCountdown,isReplayVideo:j.isReplayVideo};j.$emit("Video.Ended",c)}),U.bind("error",function(a){b.log("Source event (internal): error "+JSON.stringify(a)+" "+U.src,b.logLevel.trace);var d=document.getElementById("mp4");d&&(c.trackEvent(g.videoSourceFailed,null,{generalmessage:d.src,rvnomoreoffersreason:"source:error"}),p.$broadcast("AdUnit.AdSourceError",""))}),T.bind("error",function(a){var d=JSON.stringify(a);b.log("Video event (internal): error "+d,b.logLevel.debug);var e=document.getElementById("mp4");'{"isTrusted":true}'===d&&e&&(c.trackEvent(g.videoSourceFailed,null,{generalmessage:e.src,rvnomoreoffersreason:"video:error",callfailreason:parseInt(T[0].currentTime)}),T[0].currentTime<1&&p.$broadcast("AdUnit.AdSourceError",""))}),T.bind("abort",function(){b.log("Video event (internal): abort",b.logLevel.trace)}),T.bind("stalled",function(){b.log("Video event (internal): stalled",b.logLevel.trace)}),T.bind("loadeddata",function(){P="loadstart"}),T.bind("loadstart",function(){b.log("Video: event - loadstart ",b.logLevel.trace),W&&(j.$emit("Video.BufferStart","internal"),z())}),T.bind("canplay",function(){("pause"===P||"waiting"===P)&&T[0].currentTime>0&&v(),P="canplay",b.log("Video event (internal): canplay",b.logLevel.trace)}),T.bind("pause",function(){if(!W){if(T[0].currentTime===T[0].duration||"ended"===P||Q===!0)return void b.log("Video event (internal): pause returned",b.logLevel.trace);P="pause",b.log("Video event (internal): pause",b.logLevel.trace),j.$emit("Video.Paused","internal")}}),T.bind("waiting",function(){P="waiting",b.log("internal video event: waiting",b.logLevel.trace)}),T.bind("seeking",function(){b.log("Internal Video: event - seeking",b.logLevel.trace)}),T.bind("playing",function(){j.isPreCache||a(function(){j.$emit("ssaSpinner.hide","")},0),W?(w(),D()):(P="playing",j.$emit("Video.Playing","playing"),S||(S=!0,a.cancel(N),j.$emit("Video.Started",{videoDuration:T[0].duration||0}),b.log("Internal Video: event - started playing",b.logLevel.debug)),b.log("Internal Video: event - playing: |"+T[0].currentTime,b.logLevel.debug))}),T.bind("click",u),T.bind("timeupdate",function(){var a=parseInt(T[0].currentTime);T[0].currentTime>0&&(R===-1&&T.bind("touchend",function(a){return b.log("internal video event: touchstart",b.logLevel.debug),a.stopPropagation(),j.hybrid.isHybridDisplay()||a.preventDefault(),j.videoClicked(Q),!1}),t(T[0].currentTime),a-R==1&&(R=a,s(a)))}),T.bind("volumechange",function(){if(b.log("HTMLVideoPlayer volumechange | volume = "+T[0].volume,b.logLevel.debug),b.log("HTMLVideoPlayer volumechange | muted = "+T[0].muted,b.logLevel.debug),!n.shouldReportMOATVolumeOne()){var a=T[0].volume;j.deviceDetails.os===h.android&&(a=T[0].muted?0:1),b.log("HTMLVideoPlayer volumechange | Report to MOAT Volume = "+a,b.logLevel.debug),i.volumeChange(a)}}),j.$on("AdController.viewableChange",function(c,d){if(d&&"object"==typeof d&&(b.log("AdController.viewableChange: "+JSON.stringify(d),b.logLevel.trace),"false"!==d.isViewable&&d.isViewable!==!1||(_=T[0].currentTime),!O.isDialogBoxOpen())){M=d.isViewable;var e=!0;d.hasOwnProperty("webview")&&(e="main"===d.webview),"true"!==M&&M!==!0||!e?"false"!==M&&M!==!1||!e||"android"===j.deviceDetails.os&&T.css("display","none"):(o()&&q(),j.deviceDetails.os===h.android&&T.css("display","block"),"ended"!==P&&null!==P&&"loadstart"!==P&&Q===!1?a(function(){b.log("AdController resume event received (internal video).",b.logLevel.debug),T[0].play()},200):"ended"!==P&&Q!==!0||(T[0].currentTime-=1))}}),j.$watch("shouldMute",function(a){T.prop("muted",!!a)}),j.$on("AdController.deviceStatusChanged",function(c,d){b.log("AdController event received in internal video: "+JSON.stringify(d),b.logLevel.trace),!angular.isDefined(d.earphonesConnected)||"false"!==d.earphonesConnected&&d.earphonesConnected!==!1||!M||Q||a(function(){v()},100)}),j.$on("AdController.Play",function(a,c){b.log("AdController event received (internal video)",b.logLevel.debug),v()}),j.$on("AdController.Pause",function(a,c){b.log("internal video event triggered: pause",b.logLevel.trace),"ended"!==P&&"pause"!==P&&T[0].pause()}),j.$on("AdController.Mute",function(a,c){b.log("internal video event triggered: mute ="+c,b.logLevel.trace),T.prop("muted",c)}),j.$on(e.VIDEO_STOP,function(){b.log("Internal Video: video stop event",b.logLevel.trace),w()}),j.$on("$destroy",function(){T[0].pause(),T[0].src="",T[0].load(),O.destroy()}),j.handleStoreKit=K,j.getTimeProgressPercentage=r,J()},controller:["$scope","$sce","videoPlayerService","CLICK_ACTION","CLICK_TYPE",function(a,c,e,f,g){function h(){return!u.vastVideoClickLimit||w>=u.vastVideoClickLimit}function i(){return a.featuresModel&&a.featuresModel.isVideoClickable()||a.postAction&&a.postAction.isSmartVideoClickable()||l&&l.showHybridOnClick()}function j(b){return!s.isClickDisabled()&&(u.isVast?!!b||!h():a.featuresModel.isVideoClickableOnVideoEnds()?i()&&b:i())}function k(c){if(j(c)&&a.postAction.getClickActionUrl(f.VIDEO,{"{{clickType}}":g.VIDEO})){var d=a.getTimeProgressPercentage();a.fireClickOnVideoEndsFlag&&(d=a.clickOnVideoEndsProgress),!a.featuresModel.isVideoClickableOnVideoEnds()||c||a.fireClickOnVideoEndsFlag||(b.log("set video click when video ends flag with progress: "+d,b.logLevel.debug),a.fireClickOnVideoEndsFlag=!0,a.clickOnVideoEndsProgress=d);var e=(new Date).getTime();q.storeKitReadyClickActionWrapper(p.bind(null,d,e),a.postAction.isStoreKitClickStrategy(f.VIDEO))()}}function p(b,c){w++,m.isStoreKitLoaded()&&a.handleStoreKit(),l&&l.showHybridOnClick()?l.handleShowHybridOnClick():e.handleClick(a.postAction,b,c,!1,a.closeData.hideClose)}function r(){var b=a.getTimeProgressPercentage();a.postAction.getClickActionUrl(f.VIDEO,{"{{clickType}}":g.VIDEO})&&(m.isStoreKitLoaded()&&a.handleStoreKit(),e.handleClick(a.postAction,b,null,!0,a.closeData.hideClose))}function t(){i()&&a.postAction&&a.postAction.shouldSupportAF()&&o.init()}var u=a.videoData,v=u.videoSource,w=0;a.videoDataUrlMp4=c.trustAsResourceUrl(v.videoformat_mp4),a.$on("$destroy",function(){a.$emit("ssaSpinner.hide","")}),t(),a.videoClicked=d.getDebounceFunction(k,n.getDebounceClickConfig()),a.callToActionClick=d.getDebounceFunction(r,n.getDebounceClickConfig())}]}}]);var ssaVideo=angular.module("ssaVideo",["ssaVideo.internal","ssaVideo.external","ssaVideo.externalUnified","ssaVideoTest.internal"]);ssaVideo.directive("ssaVideoPlayer",["$compile","EXTERNAL_VIDEO_TYPE",function(a,b){return{restrict:"E",replace:!0,scope:{videoData:"=",deviceDetails:"=",isPreCache:"=",isReplayVideo:"=",completionCountdown:"=",isPreload:"=",closeClick:"=",setCloseState:"=",postAction:"=",hybrid:"=",featuresModel:"=",shouldMute:"=",closeData:"=",timerData:"=",appData:"="},link:function(b,c,d){var e="<"+b.videoData.videoType+"><"+b.videoData.videoType+">",f=angular.element(a(e)(b));c.replaceWith(f)}}}]),function(){"use strict";angular.module("AdUnit").constant("ADUNIT_EVENTS",Object.freeze({VIDEO_STOP:"videoStop"})).constant("X_BUTTON_ACTIONS",{hide:"Hide",show:"Show",showNext:"ShowNext",confirmNext:"confirmNext",moveToEndCard:"moveToEndCard",openConfirmDialog:"openConfirmDialog",buttonHidden:"buttonHidden",buttonClose:"buttonClose"}).constant("CLOSE_BUTTON_STYLES",{"default":"sprite-images-ssaCloseBtnImgDark",whiteRound:"sprite-images-ssaCloseBtnImgBright",smallX:"sprite-images-ssaSmallXButton",skipButton:"sprite-images-skipButton"}).constant("LAYOUT_TYPE",{partialScreen:"partialScreen",fullScreen:"fullScreen",bannerLayout:"bannerLayout"}).constant("CLOSE_BUTTON_STATES",{close:"close",confirm:"confirm",back:"back",confirmNextFrame:"confirmNextFrame",nextFrame:"nextFrame",ignore:"ignore"}).constant("PRODUCT_TYPES",{BrandConnect:"BrandConnect",RewardedVideo:"RewardedVideo",Interstitial:"Interstitial",Banner:"Banner"}).constant("LAYOUT_CLASS",{transparentLayout:"transparentLayout","default":"default"}).constant("GENERAL_EVENTS",{adUnitException:{name:"adUnitException",id:134},emptySSAWindow:{name:"emptySSAWindow",id:207},resizeTimeout:{name:"resizeTimeout",id:208},closeAdBlockedStoreKit:{name:"closeAdBlockedStoreKit",id:202}}).constant("VIDEO_SOURCE_RESPONSE_KEYS",{html:"html",video:"videoformat_mp4",mraid:"mraid",htmlURL:"htmlURL"}).constant("VIDEO_EVENTS",{videoStarted:{name:"videoStarted",id:9},videoCompleted:{name:"videoCompleted",id:10},clickReplay:{name:"clickReplay",id:111},clickVideoSound:{name:"clickVideoSound",id:112},videoExternallyTracked:{name:"videoExternallyTracked",id:201}}).constant("HYBRID_ANALYTICS_CATEGORIES",{hybridVideoSkip:{name:"hybridVideoSkip",id:119},hybridStoreEngaged:{name:"hybridStoreEngaged",id:121}}).constant("STORE_KIT_EVENTS",{nativeEndCardFail:{name:"nativeEndCardFail",id:312},storekitLoaded:{name:"storekitLoaded",id:214},storekitLoadFailed:{name:"storekitLoadFailed",id:215},storekitOpened:{name:"storekitOpened",id:216},storekitClosed:{name:"storekitClosed",id:217},storekitClickFailed:{name:"storekitClickFailed",id:161}}).constant("CLICK_EVENTS",{qualityClick:{name:"qc",id:278},skClickDelay:{name:"dscd",id:286},adClosedV2:{name:"adc",id:301},dsClickSplit:{name:"dscs",id:336},aecsk:{name:"aecsk",id:342}}).constant("NATIVE_END_CARD_EVENTS",{nativeEndCardOpened:{name:"nativeEndCardOpened",id:313},nativeEndCardClosed:{name:"nativeEndCardClosed",id:314},endCardDisplayed:{name:"endCardDisplayed",id:11}}).constant("CONFIG",{quatroDefault:4}).constant("MODAL_SIZE",{small:"modalSmall",medium:"modalMedium",large:"modalLarge",extraLarge:"modalExtraLarge",fullScreen:"modalFullScreen"}).constant("RV_ANALYTICS_CATEGORIES",{engagementClickFired:{name:"engagementClickFired",id:117},failedOpenStoreWithSeamless:{name:"failedOpenStoreWithSeamless",id:132},exitBeforeStoreOpened:{name:"exitBeforeStoreOpened",id:133},seamlessSuccess:{name:"seamlessSuccess",id:131},handlePostActionClick:{name:"handlePostActionClick",id:213},videoClicked:{name:"videoClicked",id:110},videoFailedToPlay:{name:"videoFailedToPlay",id:204},videoSourceFailed:{name:"videoSourceFailed",id:266},callToActionDisplayed:{name:"callToActionDisplayed",id:318},callToActionClicked:{name:"callToActionClicked",id:319}}).constant("IS_ANALYTICS_CATEGORIES",{timeFromStartedToCompleted:{name:"fromStartedToCompleted",id:-15},clickDownloadNow:{name:"clickDownloadNow",id:12},videoDimensionsUnavailable:{name:"videoDimensionsUnavailable",id:261}}).constant("BN_ANALYTICS_CATEGORIES",{bannerVisibleToBannerClicked:{name:"fromStartedToCompleted",id:-16},bannerIconFailedToLoad:{name:"bannerIconFailedToLoad",id:165}}).constant("AD_ANALYTICS_CATEGORIES",{adClicked:{name:"adClicked",id:33}}).constant("ENDCARD_ANALYTICS_CATEGORIES",{endCardDisplayed:{name:"endCardDisplayed",id:11},clickDownloadNow:{name:"clickDownloadNow",id:12},endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4}}).constant("LIMITED_AREAS_CATEGORIES",{clickOnLimitedArea:{name:"clickOnLimitedArea",id:300}}).constant("SIMPLE_OVERLAY_END_CARD_CATEGORIES",{appIconMissing:{name:"appIconMissing",id:174}}).constant("DOMAIN_OPTIONS",{production:"www.supersonicads.com",develop:"local.supersonicads.com"}).constant("VIDEO_TYPES",{internal:"ssa-internal-video-player",external:"ssa-external-video-player"}).constant("OPEN_URL_STRATEGIES",{CS:"CS",S2S:"S2S",S2SStoreKit:"S2SStoreKit",seamless:"seamless",redirect:"redirect",externalBrowser:"external_browser",secondary:"secondary",store:"store",clickOpenType:{storeKit:"1",store:"2",redirect:"3"}}).constant("FIRE_PIXEL_STRATEGIES",{"native":"native",pixel:"pixel",none:"none"}).constant("ORIENTATIONS",{PORTRAIT:"portrait",LANDSCAPE:"landscape",UNDEFINED:"undefined"}).constant("FRAMES_IMGS",{PHONE:"../../../common/images/Kiloo/frameBorderPhone_new.png",TABLET:"../../../common/images/Kiloo/frameBorderTablet_new.png"}).constant("SCREEN_TYPES",{PHONE:"phone",TABLET:"tablet"}).constant("ENV_OPTIONS",{production:"prod",develop:"dev",stage:"stage"}).constant("DIALOG_BOX_TEXT",{noMoreOffers:'"Sorry, There are no offers at the moment"',confirm:"confirm",cancel:"cancel",close:"close"}).constant("DIALOG_BOX_RESUME",{name:"dialogBoxResume",id:156}).constant("DIALOG_BOX_EXIT",{name:"dialogBoxExit",id:155}).constant("DEBOUNCE_CLICK_EVENT",{name:"debounceClick",id:122}).constant("PRIVACY_CLICKED_EVENT",{name:"privacyLinkClicked",id:236}).constant("PRIVACY_LINK_TEXT",{showPrivacyLinkAnimBanner:"showPrivacyLinkAnimBanner",showPrivacyLinkAnim:"showPrivacyLinkAnim",hidePrivacyLinkAnimBanner:"hidePrivacyLinkAnimBanner",hidePrivacyLinkAnim:"hidePrivacyLinkAnim",bannerText:"privacy",privacyText:"Privacy policy"}).constant("CCVAF_CLICK",{name:"ccvafClick",id:267}).constant("TEMPLATES",{RIS:4,RISFullScreen:34}).constant("ADUNIT_VERSION","3.0.92").constant("ADUNIT_BUILD","61").constant("CLICK_ACTION",{VIDEO:"video",END_CARD:"endCard"}).constant("CLICK_TYPE",{VIDEO:"videoClick",END_CARD:"endCardClick",HYBRID:"hybridClick",NATIVE:"NEC",CLOSE_X:"xButton",CLOSE_BG:"bg",CLOSE_BG_SK:"bgsk",AECSK:"aecsk"}).constant("AF_LIB",{url:"https://fvalid.appsflyer.com/ironsource/cp.sdk.1.2.5.js"}).constant("AF_TOKEN_TYPE",{TOKEN:"TOKEN",EMPTY_TOKEN:"EMPTY_TOKEN",NOT_INITIATED:"NOT_INITIATED",API_NOT_SUPPORTED:"API_NOT_SUPPORTED"}).constant("WARMUP_STRATEGY",{HTML_TAG:"htmlTag",FIRE_PIXEL:"firePixel"}).constant("HTML_TAG_WARMUP_ATTRIBUTE",{dnsPrefetch:"dns-prefetch",preconnect:"preconnect",prefetch:"prefetch",prerender:"prerender"}).constant("DEBOUNCE_CLICK_DURATION",800).constant("AD_STARTED_TIMER_LENGTH",5e3).constant("OPERATING_SYSTEMS",{ios:"ios",android:"android"}).constant("CLOSE_FAIL_REASON",{storeKitVisible:"storeKitVisible"}).constant("PROTOCOL_TYPES",{secured:"https"}).constant("END_CARD_FRMAES",{partialScreen:"partialScreenEndCard",fullScreen:"fullScreenEndCard",carousel:"carouselEndCard",custom:"customEndCard",brand:"brandedEndCard",mraid:"mraidEndCard",embeddedVideo:"embeddedVideo",bannerInstall:"bannerInstall","native":"nativeEndCard",simple:"simpleOverlayEndCard"}).constant("WEBVIEW_TYPES",{ui:"ui",wk:"wk"}).constant("BANNER_SIZE",{standart:50,large:90}).constant("BANNER_TYPE",{standart:"standart",large:"large"}).constant("STORE_KIT_ERROR_REASONS",{notLoaded:"storeKit is not loaded",storekitLoadFailedMissingErrorMessage:"storekit failed to load with a missing error message"}).constant("HYBRID_SHOW_TYPE",{hybridOnShow:"hybridOnShow",hybridOnClick:"hybridOnClick"}).constant("MOAT_EVENTS",{start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",volumeChange:"AdVolumeChange"}).constant("CACHE_FOLDERS_PATHS",{libs:"../libs/",graphicAssets:"../graphicAssets/"}).constant("EXTERNAL_AD_VIEW_PRODUCTS",{externalAdViewProductTypeArray:["Banner"]}).constant("CUSTOM_INTERMEDIATE_API_LEVEL_SUPPORT",{android:"21"}).constant("POPUP_API_LEVEL_SUPPORT",{android:"21"}).constant("DATA_CLICK_TYPE_STRATEGY",{forking:"S2S",seamless:"Seamless",redirect:"Redirect"}).constant("AD_CONTAINER_PRIVACY",{defaultText:"i"}).constant("USER_INTERACTION",{swipeTouchStartMaxY:20}).constant("SEGMENTATION",{events:{receivedFromController:{updateUserSegments:"AdController.updateUserSegments"},sendToController:{addSegment:"addSegment",clearSegmentFromGroup:"clearSegmentFromGroup",getSegments:"getSegments",getSegmentsSuccessCallback:"getSegmentsSuccess"}}}).constant("CALL_TO_ACTION_TEXT",{defaultText:"INSTALL NOW"}).constant("SIMPLE_OVERLAY_END_CARD",{defaultCTAText:"GET"}).constant("FRAMES_MAP",{CarouselFrame:"CarouselFrame",FullScreenEndCardFrame:"FullScreenEndCardFrame",CustomAdContainerFrame:"CustomAdContainerFrame"}).constant("END_CARD_FRAMES_FOR_EXTRA_OFFERS",{carouselEndCardFrame:"CarouselFrame",fullScreenEndCardFrame:"FullScreenEndCardFrame",customAdContainerFrame:"CustomAdContainerFrame"}).constant("EXTRA_OFFERS_EVENTS",{extraOffersVisible:{name:"extraOffersVisible",id:186},extraOfferClicked:{name:"extraOfferClicked",id:187}}).constant("CLICK_WRAPPER_EVENTS",{clickWrapperOpened:{name:"clickWrapperOpened",id:191},clickWrapperClosed:{name:"clickWrapperClosed",id:192},clickWrapperClicked:{name:"clickWrapperClicked",id:193}}).constant("SK_OVERLAY_EVENTS",{overlayCreate:{name:"overlayCreate",id:293},overlayCreateSuccess:{name:"overlayCreateSuccess",id:294},overlayCreateFailed:{name:"overlayCreateFailed",id:295},overlayVisible:{name:"overlayVisible",id:296},overlayVisibleSuccess:{name:"overlayVisibleSuccess",id:297},overlayVisibleFailed:{name:"overlayVisibleFailed",id:298},overlayDismissed:{name:"overlayDismissed",id:299}}).constant("INVIEW_CONFIG",{NinetyPercentArea:"-0.9%",halfArea:"-0.5%",
noArea:"0%"}).constant("URL_QUERY_PARAMS",{etype:"etype",esignature:"esignature"}).constant("SK_AD_NETWORK",{SKANData:"SKANData",StoreKit:"StoreKit",params:["version","sourceAppTrackID","adNetworkID","advertisedAppTrackID","timestamp","nonce","signature","SKANCampaignID"]}).constant("STORE_KIT",{clickGraceTimeForStoreKitLoading:"clickGraceTimeForStoreKitLoading",adClosedDuringGracePeriod:"ad closed during grace period",storeKitGracePeriodEnded:"StoreKit grace period ended",loadingRetryAttempts:"storeKitLoadRetryAttempts",currentLoadRetryAttempt:"currentLoadRetryAttempt",aecsk:"aecsk",aecskcd:"aecskcd"})}(),function(){var a=angular.module("AdUnit"),b="connection.",c="mraid.";a.constant("DAPI_CALLBACK_NAMES",{connected:"connected",close:"close",replay:"replay",open:"open",openStoreUrl:"openStoreUrl",useCustomClose:"useCustomClose",reward:"reward",interaction:"interaction",getDapiData:"getDapiData",notifyAssetFailed:"notifyAssetFailed"}).constant("MRAID_CALLBACK_NAMES",{getMraidData:"getMraidData",mraidAdLoaded:"mraidAdLoaded",open:"open",openStoreUrl:"openStoreUrl",expand:"expand",setExpandProperties:"setExpandProperties",useCustomClose:"useCustomClose",close:"close",setResizeProperties:"setResizeProperties",resize:"resize",setOrientationProperties:"setOrientationProperties",supports:"supports",log:"log",reward:"reward",generalMessage:"generalMessage"}).constant("CUSTOM_TEMPLATE_RICH_MEDIA_TIMEOUT",{"default":3e3}).constant("DAPI_STATES",{connected:"connected:"}).constant("EXTERNAL_MESSAGE_CONFIGS",{communicationPrefix:"communicationPrefix:"}).constant("EXTERNAL_MISMATCH_SOURCE",{supportHTMLUrlFlowOffWithMissingKey:"supportPlayableHTMLUrlFlow is OFF, missing html/mraid key",supportHTMLUrlFlowWithMissingKey:"supportPlayableHTMLUrlFlow with missing htmlURL key"}).constant("MRAID_STATES",{connected:"connected",mraidAdLoaded:"mraidAdLoaded"}).constant("EXTERNAL_API_TYPE",{mraid:"MRAID",dapi:"DAPI"}).constant("DAPI_MSG_PREFIXES",{send:"DAPI_SERVICE:",receive:"DAPI_AD:"}).constant("MRAID_MSG_PREFIXES",{send:"MRAID_SERVICE:",receive:"MRAID_AD:"}).constant("EXTERNAL_ASSET_TYPE",{intermediateRichMedia:"intermediateRichMedia"}).constant("EXTERNAL_VIDEO_TYPE",{internal:"ssa-internal-video-player",external:"ssa-external-video-player",externalUnified:"ssa-external-unified-video-player"}).constant("MRAID_COMMUNICATION_EVENTS",{stateChange:b+"stateChange",error:b+"error",ready:b+"ready",sizeChange:b+"sizeChange",viewableChange:b+"viewableChange",audioVolumeChange:b+"audioVolumeChange",updateMraidData:b+"updateMraidData",getMraidData:b+"getMraidData",mraidAdLoaded:b+"mraidAdLoaded",open:b+"open",openStoreUrl:b+"openStoreUrl",expand:b+"expand",setExpandProperties:b+"setExpandProperties",useCustomClose:b+"useCustomClose",close:b+"close",setResizeProperties:b+"setResizeProperties",resize:b+"resize",setOrientationProperties:b+"setOrientationProperties",supports:b+"supports",log:b+"log",reward:b+"reward",generalMessage:b+"generalMessage"}).constant("DAPI_CONNECTION_EVENTS",{viewableChange:b+"viewableChange",adResized:b+"adResized",adRewarded:b+"adRewarded",stateChange:b+"stateChange",timeUpdate:b+"timeUpdate",closeButtonVisibilityChange:b+"closeButtonVisibilityChange",ready:b+"ready",getDapiData:b+"getDapiData",getDapiUrl:b+"getDapiUrl",getDeviceData:b+"getDeviceData",updateDapiData:b+"updateDapiData",handleFunctionCallback:b+"handleFunctionCallback",audioVolumeChange:b+"audioVolumeChange",failToCloseAd:b+"failToCloseAd",assetLoaded:b+"assetLoaded",open:b+"open",openStoreUrl:b+"openStoreUrl",close:b+"close",replay:b+"replay",useCustomClose:b+"useCustomClose",reward:b+"reward",triggerEvent:b+"triggerEvent",notifyAssetFailed:b+"notifyAssetFailed"}).constant("EXTERNAL_ANALYTICS_CATEGORIES",{endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4},clickDownloadNow:{name:"clickDownloadNow",id:12},playableHTMLUrlSourceMismatch:{name:"playableHTMLUrlSourceMismatch",id:316},invalidExternalMessage:{name:"invalidExternalMessage",id:275},intermediateRichMediaLoaded:{name:"intermediateRichMediaLoaded",id:330},intermediateRichMediaFailed:{name:"intermediateRichMediaFailed",id:331},popupRichMediaFailed:{name:"popupRichMediaFailed",id:333},popupRichMediaLoaded:{name:"popupRichMediaLoaded",id:334}}).constant("MRAID_ANALYTICS_CATEGORIES",{expand:{name:c+"expand",id:143},setExpandProperties:{name:c+"setExpandProperties",id:138},setOrientationProperties:{name:c+"setOrientationProperties",id:141},setResizeProperties:{name:c+"setResizeProperties",id:144},resize:{name:c+"resize",id:145},supports:{name:c+"supports",id:140},unknownFunction:{name:c+"unknownFunction",id:146},error:{name:c+"error",id:139},adVisibleButNotReady:{name:c+"adVisibleButNotReady",id:142},log:{name:c+"log",id:147}}).constant("DAPI_ANALYTICS_CATEGORIES",{unknownFunction:{name:"unknownFunction",id:218},endCardDisplayedToClickDownload:{name:"endCardDisplayedToClickDownload",id:-4},clickDownloadNow:{name:"clickDownloadNow",id:12},endCardDisplayed:{name:"endCardDisplayed",id:11}})}(),function(){function a(a){function b(){return d.scrollHeight-e>d.clientHeight}var c=this,d=a[0],e=1;c.threeDots=function(){if(d.innerText=c.tdInitialText,b()){for(var a=d.innerText,e=[],f=0;f<a.length;f++)" "===a[f]&&e.push(f);var g=e.length;do a=d.innerText,d.innerText=a.substring(0,e[g--])+"...";while(b()&&g>=0)}}}function b(a,b,c,d){function e(){var b=a.vm.runResize();angular.isFunction(i.options.complete)&&i.options.complete(b)}var f,g,h,i=this,j=a.vm.tfTextConfig;i.options={outerClass:j.outerClass||null,minFontPixels:parseInt(j.minFontSize)||4,maxFontPixels:parseInt(j.maxFontSize)||40,explicitHeight:j.maxHeight||null,explicitWidth:j.maxWidth||null,changeLineHeight:j.changeLineHeight||!0,heightOnly:j.heightOnly||!1,widthOnly:j.widthOnly||!1,complete:j.onComplete||null},i.getOuterElement=function(a,b){return b&&a?a.hasClass(b)?a:i.getOuterElement(a.parent(),b):null},f=i.getOuterElement(b,i.options.outerClass),i.updateSizeLimits=function(){f?(g=f[0].clientHeight,h=f[0].clientWidth):(g=i.options.explicitHeight,h=i.options.explicitWidth)},i.resizeUp=function(){var a=parseInt(b[0].style.fontSize);b.css("font-size",a+1+"px"),i.options.changeLineHeight&&b.css("line-height",a+2+"px")},i.resizeDown=function(){var a=parseInt(b[0].style.fontSize);b.css("font-size",a-1+"px"),i.options.changeLineHeight&&b.css("line-height",a+"px")},i.isOverFlow=function(){var a,b,c;return f?(b=f[0].scrollHeight,c=f[0].scrollWidth):(b=i.element[0].offsetHeight,c=i.element[0].offsetWidth),a=!i.options.widthOnly&&b>g||!i.options.heightOnly&&c>h},i.resize=function(){var a;if(""===b[0].style.fontSize&&b.css("font-size",i.options.maxFontPixels+"px"),a=parseInt(b[0].style.fontSize),i.isOverFlow())for(;i.isOverFlow()&&a>i.options.minFontPixels;)i.resizeDown(),a=parseInt(b[0].style.fontSize);else{do i.resizeUp(),a=parseInt(b[0].style.fontSize);while(!i.isOverFlow()&&a<i.options.maxFontPixels+1);i.resizeDown()}return b[0].style.fontSize},i.runResize=function(){var a;return i.updateSizeLimits(),a=parseInt(i.resize()),{fontSize:a}},i.updateSizeLimits(),c(e),angular.element(d).bind("resize",e)}a.$inject=["$element"],b.$inject=["$scope","$element","$timeout","$window"];var c=angular.module("adunitDirectives",[]);c.directive("ssaLineClamp",["$timeout",function(a){return{scope:{text:"=",textClampConfig:"="},link:function(a,b,c){function d(a){return a[0].scrollHeight-i>a[0].clientHeight||a[0].scrollWidth-i>a[0].clientWidth}function e(){k.length>n&&(j.style["font-size"]=m+"px",j.style["line-height"]=m+2+"px",angular.element(j).removeClass("alignTitleToTop"),angular.element(j).addClass("alignTitleToBottom"))}function f(){for(var a=[],c=b[0].innerText,d=0;d<c.length;d++)" "===c[d]&&a.push(d);return a}function g(){var a=f(),c=a.length,e=b[0].innerText.trim();if(0===c)for(b[0].innerText+="...";d(b)&&e.length>0;)e=b[0].innerText.trim(),b[0].innerText=e.substring(0,e.length-4)+"...";else do e=b[0].innerText.trim(),b[0].innerText=e.substring(0,a[c--])+"...";while(d(b)&&c>0)}function h(){l&&e(),d(b)&&g(),b[0].clientHeight>b[0].style.height&&(b[0].style.height="auto")}var i=1,j=b[0],k=a.text,l=a.textClampConfig&&a.textClampConfig.enableFontSizeTransformation||!1,m=a.textClampConfig&&a.textClampConfig.smallFontSize||0,n=a.textClampConfig&&a.textClampConfig.maxCharsEnabled||0;a.$watch(function(){return b[0].scrollHeight},function(){h()});a.$on("ssaLineClamp.recalculate",function(){b[0].style.height=null,b[0].innerText=a.text,h()})}}}]),c.directive("ssaMobileClick",[function(){return function(a,b,c){b.bind("touchend",function(b){b.preventDefault(),b.stopPropagation(),a.$apply(c.ssaMobileClick)})}}]),c.directive("swipePreventDirective",["SSA_Utils","productSettingsService","USER_INTERACTION","OPERATING_SYSTEMS","LogService",function(a,b,c,d,e){return function(f,g){function h(){return i&&window.innerHeight-i<c.swipeTouchStartMaxY}if(a.getOSType()!==d.ios&&b.getBlockSwipeFromScreenBottom()){var i=null,j=function(a){i=a.changedTouches[0].clientY},k=function(a){h()&&(e.log("swipePreventDirective | Swipe from screen bottom on Android blocked",e.logLevel.trace),a.stopImmediatePropagation()),i=null};g[0].addEventListener("touchstart",j,!0),g[0].addEventListener("touchend",k,!0),f.$on("$destroy",function(){g.off("touchstart",j),g.off("touchend",k)})}}}]),c.directive("ssaScriptLoader",["LogService",function(a){var b=function(b,c,d){var e=document.createElement("script");e.src=b;var f=document.getElementsByTagName("script")[0],g=!1;document.getElementById(c)||(e.onload=e.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,a.log("External script loaded: "+(new Date).getTime(),a.logLevel.trace),d(),e.onload=e.onreadystatechange=null,f.parentNode.removeChild(e))},f.parentNode.insertBefore(e,f))};return{restrict:"EA",scope:{scriptData:"="},link:function(a,c,d){"undefined"!=typeof a.scriptData&&null!==a.scriptData&&b(a.scriptData.url,a.scriptData.id,a.scriptData.callback)}}}]),c.directive("ssaDynamicController",["$compile",function(a){return{link:function(b,c,d){var e=b[d.ssaDynamicController];null!==e&&(c.attr("ng-controller",e),c.removeAttr("ssa-dynamic-controller"),a(c)(b))}}}]),c.directive("ssaTextFill",[function(){return{scope:{maxFontSize:"@",minFontSize:"@",maxHeight:"@",maxWidth:"@",tfTextConfig:"="},link:function(a,b,c){var d,e,f=a.tfTextConfig.maxFontSize,g=b.find("span",this);do g.css("font-size",f+"px"),d=g[0].offsetHeight,e=g[0].offsetWidth,f-=1;while(d>a.tfTextConfig.maxHeight||e>a.tfTextConfig.maxWidth&&f>a.tfTextConfig.minFontSize)}}}]),c.directive("fallbackSrc",function(){var a={restrict:"A",link:function(a,b,c){b.one("error",function(){c.src!=c.fallbackSrc&&c.$set("src",c.fallbackSrc)})}};return a}),c.directive("ssaThreeDots",["$timeout","$window",function(a,b){return{scope:{},restrict:"A",bindToController:{tdInitialText:"@"},controllerAs:"vm",controller:"ssaThreeDotsController",link:function(c,d,e){a(c.vm.threeDots),angular.element(b).bind("resize",c.vm.threeDots)}}}]),c.controller("ssaThreeDotsController",a),c.directive("reduceNotificationFontSize",["$timeout","$window",function(a,b){return{scope:{},restrict:"A",bindToController:{tfTextConfig:"="},controllerAs:"vm",controller:"reduceNotificationFontSizeController",link:function(a,c,d){c[0].style.visibility="hidden",a.$watch("vm.tfTextConfig.notificationData.data",function(c,d){c&&(a.vm.reduceFont(),angular.element(b).bind("resize",a.vm.reduceFont))})}}}]),c.controller("reduceNotificationFontSizeController",["$element",function(a){function b(){return f.innerHTML&&f.scrollHeight>e.clientHeight}var c=this;config=c.tfTextConfig;var d,e=a.parent()[0],f=a[0];c.reduceFont=function(){if(d=d?d:parseFloat(window.getComputedStyle(a[0],null).getPropertyValue("font-size")),f.style.fontSize=d+"px",b()){var c=d;do c--,f.style.fontSize=c+"px";while(b()&&c>=config.minFontSize)}a[0].style.visibility="visible"}}]),c.directive("ssaSimpleTextFill",function(){return{scope:{},restrict:"A",bindToController:{tfTextConfig:"="},controllerAs:"vm",controller:"ssaSimpleTextFillController"}}),c.controller("ssaSimpleTextFillController",b)}(),function(){function a(a,b){return a&&a.touches&&a.touches[0]&&a.touches[0][b]}function b(b,c){function d(){return Math.abs(k-i)<m&&Math.abs(l-j)<m}function e(){i=j=k=l=null,n=!1}function f(b){i=a(b,"clientX"),j=a(b,"clientY"),n||d()||(n=!0)}function g(d){k=a(d,"clientX"),l=a(d,"clientY"),c.one("touchend",function(a){i&&j&&n||(a.preventDefault(),b.cosOnClick()),c.unbind("touchcancel"),e()}),c.one("touchcancel",function(a){c.unbind("touchend"),e()})}function h(){c.bind("touchmove",f),c.bind("touchstart",g),b.$on("$destroy",function(){c.unbind("touchstart"),c.unbind("touchmove")})}var i,j,k,l,m=20,n=!1;h()}b.$inject=["$scope","$element"];var c=angular.module("adunitDirectives");c.directive("clickOnScrollable",function(){var a={restrict:"A",controller:"clickOnScrollable",scope:{cosOnClick:"="}};return a}),c.controller("clickOnScrollable",b)}(),function(){function a(a,b,c,d,e,f,g){function h(a){"true"===a||a===!0?(s=!1,g.log("External video timer freeze flag turned to false",g.logLevel.trace)):"false"!==a&&a!==!1||(s=!0,g.log("External video timer freeze flag turned to true",g.logLevel.trace))}function i(){return w===!0}function j(){s=!0,w=!0}function k(){s=!1,w=!1}function l(){return s!==!0}function m(){a.$on("AdController.viewableChange",function(a,b){g.log("AdController.viewableChange: "+b,g.logLevel.trace),i()||b&&b.hasOwnProperty("isViewable")&&h(b.isViewable)}),u=c.$on("AdController.dialogBoxAboutToClose",k),v=c.$on("AdController.dialogBoxAboutToOpen",j)}function n(b){a.$evalAsync(function(){a.$emit("Video.TimeTick",b),a.postAction.setVideoWatchTime(b)})}function o(){var b=a.$on("StoreKitService.StoreKitOpened",function(a,c){b(),s=!0}),c=a.$on("StoreKitService.StoreKitClosed",function(a,b){c(),s=!1})}function p(){e.callOnVisible(function(){a.videoData.currentTime=0,a.$emit("Video.Started",{videoDuration:a.timerData.completionCountdown}),t=f(function(){l()&&(a.videoData.currentTime<=a.videoData.videoTime?(n(a.videoData.currentTime),a.videoData.currentTime++):(a.$emit("Video.Ended",{type:"external",videoDuration:a.timerData.completionCountdown,isReplayVideo:a.isReplayVideo}),f.cancel(t)))},1e3)})}function q(){u&&u(),v&&v()}function r(){m(),p(),o(),a.$on("$destroy",function(){f.cancel(t),q()})}var s,t,u,v,w=!1;r()}a.$inject=["$scope","$element","$rootScope","storeKitService","SSA_Utils","$interval","LogService"];var b=angular.module("adunitDirectives");b.directive("ssaExternalPlayerProgress",function(){var a={restrict:"A",controller:"ssaExternalPlayerProgressController",scope:{videoData:"=",isReplayVideo:"=",timerData:"=",postAction:"="}};return a}),b.controller("ssaExternalPlayerProgressController",a)}(),function(){var a=angular.module("adunitDirectives");a.directive("ssaPixel",["$rootScope","$timeout","$q","LogService","adapter",function(a,b,c,d,e){return{template:"<div class='pixel'></div>",link:function(b,f,g){function h(b){var c="function"==typeof b.cb?b.cb:null;if("htmlElement"!==b.type&&("undefined"==typeof b.url||""===b.url))return d.log("Missing callback data. At: directive ssaPixel"+(new Date).getTime(),d.logLevel.error),void(c&&c());var g="";if("pixel"===b.type){var h=new Image;null!=c&&(h.onload=h.onerror=function(b){return function(){a.$apply(b)}}(c)),""===b.at||isNaN(parseInt(b.at))?h.src=b.url:(h.src=b.url,h.time=b.at)}else"native"===b.type?e.call({method:"nativePixel",arguments:{url:b.url}}):"iframe"===b.type?g='<iframe style="width: 1px; height: 1px; border: 0px solid white; background:transparent;" frameborder="0" scrolling="no" src="'+b.url+'" data-time="'+b.at+'"></iframe>':"htmlElement"===b.type&&(g=b.htmlElement);""!==g&&(f.append(g),c&&c())}a.$on("PixelDirective.FirePixel",function(a,b){h(b)}),a.$on("PixelDirective.FireMultiplePixels",function(a,b){function d(a){g[a].resolve()}var e,f,g=[],i=[];if(b.cb){for(e=0;e<b.multiplePixels.length;e++){g[e]=c.defer(),i[e]=g[e].promise,f=function(a){return function(){d(a)}}(e);var j={cb:f};angular.extend(j,b.multiplePixels[e]),h(j)}c.all(i).then(function(){b.cb()})}else for(e=0;e<b.multiplePixels.length;e++)h(b.multiplePixels[e])})}}}])}(),function(){var a=angular.module("adunitDirectives");a.directive("stretchToFit",["$window",function(a){function b(){return a.innerHeight<a.innerWidth}var c=function(a,b){for(var c=[],d=0;d<a.length;d++)a[d]!==b[0]&&c.push(a[d]);return c};return{link:function(a,d,e){function f(a){var b=0,c=h[h.length-1];c.style.height="",angular.forEach(h,function(a,c){b+=a.clientHeight});var f=a||g[0].clientHeight-b;a&&e.stfStretchLast&&(c.style.height=g[0].clientHeight-f+"px"),d.css({height:f+"px"})}var g=d.parent(),h=c(g.children(),d);if(e.stfStretchLast=!!e.stfStretchLast,e.stfExceptions){"string"==typeof e.stfExceptions&&(e.stfExceptions=[e.stfExceptions]);for(var i=0;i<e.stfExceptions.length;i++){var j=g.find(e.stfExceptions[i]);h=c(h,j)}}a.$on("stretchToFit.recalculate",function(a,b){f(b&&b.limit),b.cb&&b.cb()}),b()&&f()}}}])}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(a,c,d,f,g,h){b.$broadcast("endCardService.endCardClick",""),h?(G={"{{clickType}}":h},a.setClickType(h)):a.setClickType(k.END_CARD);var i=a.getScaledXCoordinate(),j=a.getScaledYCoordinate();return u.shouldBlockCurrentClick(i,j,m.getLimitedAreasList(),m.getLimitedClickableAreasWhenXHidden(),g.isXButtonHidden)?void e.trackEvent(v.clickOnLimitedArea,null,{custom_a:a.getClickType(),custom_c:i,custom_d:j,currentFrame:g&&g.event&&g.event.eventParams&&g.event.eventParams.currentFrame?g.event.eventParams.currentFrame:null}):void(q.shouldShowClickWrapper()?y(a,c,d,f,g):A(a,c,d,f,g))}function y(a,b,c,d,e){q.isClickWrapperVisible()?q.shouldEnableClickableAdWithWrapper()&&A(a,b,c,d,e):(z(a,b,c,d,e),q.shouldFireClickOnOpeningClickWrapper()&&A(a,b,c,d,e,!0))}function z(a,b,c,d,e){var f=q.shouldFireClickOnOpeningClickWrapper()?C.bind(null,a,c,d):A.bind(null,a,b,c,d,e);q.showClickWrapper(f)}function A(a,b,c,g,h,i){a.increaseClickCounter(),h&&h.adapterCall&&d.call(h.adapterCall),h&&h.event&&(h.event.eventParams&&angular.extend(h.event.eventParams,a.getClickAndEndCardDataObject()),h.event.eventParams&&h.event.eventParams.eNameStart?e.trackTimingStop(h.event.eventName,h.event.eventParams):e.trackEvent(h.event.eventName,{},h.event.eventParams)),e.trackTimingStart(f.handlePostActionClick),angular.extend(G,{"{{clickCoords}}":a.getXYCoordinates()},{"{{cot}}":a.getClickOpenType()},r.getSegmentsPlaceholderAlias()),B(a,b,function(){a.setPixelFired(j.END_CARD,!0),i||C(a,c,g)})}function B(b,c,d,f){d=angular.isFunction(d)?d:angular.noop();var g=b.getFirePixelStrategy();if(g===h.none||c.isHybridDisplay()&&b.isPixelFired())d();else{var i=b.getPixelUrls(G);if(b.shouldSupportAF()){var j=b.getAFToken()||p.getToken();i=b.getPixelUrls(angular.extend({},G,{"{{ccvaf}}":j})),e.trackEvent(l,{generalMessage:p.getTokenType(j)})}var k=s.preparePixelUrls({urls:i,isClickSeparationEnabled:m.isClickSeparationEnabled()});f=f||{},t.firePixelsWithDS({urls:k,type:g,shouldPreventDSPixels:!!f.shouldPreventDSPixels,mmpClickDelay:f.mmpClickDelay,shouldSendMmpClickAfterDelay:f.shouldSendMmpClickAfterDelay}),b.shouldDelayFirePixel()?a(d,b.getForkingDelay()):d()}}function C(a,b,e){if(a.getOpenStrategy()===c.seamless)i.openStoreUrl(a.createUrlWithPlaceholderReplaced(G),b,e);else{var f={type:"openUrl"};angular.extend(f,D(a)),d.call({method:"ActionClick",arguments:f,callback:b})}}function D(a){var b,d,e=a.createUrlWithPlaceholderReplaced(G),f=a.getPostActionAppID();o.isStoreKitLoaded()&&(b=a.getStoreKitViewIdentifier(),d=a.getViewUniqueId());var h={url:e};if(a.getOpenStrategy()===c.S2S&&"android"===g.getOSType()){var i=n.convertGooglePlayToMarketUrl(e);i&&(h.method="external_browser",h.url=i)}return f&&(h.appId=f),d&&(h.viewUniqueId=d),b&&(h.viewIdentifier=b),a.shouldOpenInExtBrowser()&&(h.method="external_browser"),h}function E(a){return!(!o.isSupported(a)||!m.shouldDisplayAutoStoreKitOnEndCard())}function F(c,f,g,h){if(E(c))var i=m.getDelayForStoreKitOnEndCardVisible(),j=a(function(){o.isStoreKitLoaded()&&(e.trackEvent(w.aecsk,{}),m.shouldShowOverlayOnAECSK()||d.call({method:"aecskTriggered",arguments:{}}),angular.extend(G,r.getSegmentsPlaceholderAlias()),B(c,f,function(){c.setClickType(k.AECSK),C(c,g,h)},{shouldPreventDSPixels:!0,mmpClickDelay:m.getClickDelayForAutoStoreKitOnEndCard(),shouldSendMmpClickAfterDelay:o.isStoreKitVisible}))},i),l=b.$on("endCardService.endCardClick",function(){l(),j&&a.cancel(j)})}var G={"{{clickType}}":k.END_CARD};return{handlePostActionClick:x,setTimeoutForDisplayStoreKitOnEndCard:F}}function b(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){function x(a){return a.isSmartVideoClickable()?"smartClick":a.getOpenStrategy()}function y(a,b,c,d,f,g,h){var i=a.getScaledXCoordinate(),j=a.getScaledYCoordinate();return v.shouldBlockCurrentClick(i,j,n.getLimitedAreasList(),n.getLimitedClickableAreasWhenXHidden(),f)?void e.trackEvent(w.clickOnLimitedArea,null,{custom_a:l.VIDEO,custom_c:i,custom_d:j}):void(r.shouldShowClickWrapper()?z(a,b,c,d,g,h):B(a,b,c,d,g,h))}function z(a,b,c,d,e,f){r.isClickWrapperVisible()?r.shouldEnableClickableAdWithWrapper()&&B(a,b,c,d,e,f):(A(a,b,c,d,e,f),r.shouldFireClickOnOpeningClickWrapper()&&B(a,b,c,d,e,f,!0))}function A(a,b,c,d,e,f){var g=r.shouldFireClickOnOpeningClickWrapper()?D.bind(null,a,e,f):B.bind(null,a,b,c,d,e,f);r.showClickWrapper(g)}function B(a,b,c,d,h,i,j){a.increaseClickCounter();var k=a.getXYCoordinates();angular.extend(H,{"{{clickCoords}}":k},{"{{cot}}":a.getClickOpenType()},s.getSegmentsPlaceholderAlias());var m=d?f.callToActionClicked:f.videoClicked;a.setClickType(l.VIDEO);var n={timeStamp:c,videoProgress:b,eNameStart:g.timeFromStartedToCompleted,generalMessage:x(a),rvnomoreoffersreason:k};angular.extend(n,a.getClickDataObject()),e.trackTimingStop(m,n),C(a,function(){a.setPixelFired(G,!0),j||D(a,h,i)})}function C(a,c){c=angular.isFunction(c)?c:angular.noop();var d=a.getFirePixelStrategy(G);if(d!==i.none&&a.shouldFirePixel(G)){if(a.shouldSupportAF()){var f=q.getToken();e.trackEvent(m,{generalMessage:q.getTokenType(f)})}var g=a.getPixelUrls(angular.extend({},H,{"{{ccvaf}}":f}),G),h=t.preparePixelUrls({urls:g,isClickSeparationEnabled:n.isClickSeparationEnabled()});u.firePixelsWithDS({urls:h,type:d}),a.shouldDelayFirePixel(G)?b(c,a.getForkingDelay()):c()}else c()}function D(a,b,e,f){if(a.getOpenStrategy(G)===c.seamless)j.openStoreUrl(a.createUrlWithPlaceholderReplaced(H),b,e);else{var g=f&&!p.isStoreKitLoaded();d.call({method:"ActionClick",arguments:g?E(f):F(a),callback:b})}}function E(a){return{type:"openUrl",url:a,method:"external_browser"}}function F(a){var b,d,e=a.getClickActionUrl(G,H),f=a.getPostActionAppID();p.isStoreKitLoaded()&&(b=a.getStoreKitViewIdentifier(),d=a.getViewUniqueId());var g={type:"openUrl",url:e};if(a.getOpenStrategy(G)===c.S2S&&"android"===h.getOSType()){var i=o.convertGooglePlayToMarketUrl(e);i&&(g.method="external_browser",g.url=i)}return f&&(g.appId=f),d&&(g.viewUniqueId=d),b&&(g.viewIdentifier=b),a.shouldOpenInExtBrowser()&&(g.method="external_browser"),g}var G=k.VIDEO,H={"{{clickType}}":l.VIDEO};return{handleClick:y,openUrl:D}}a.$inject=["$timeout","$rootScope","OPEN_URL_STRATEGIES","adapter","analytics","RV_ANALYTICS_CATEGORIES","SSA_Utils","FIRE_PIXEL_STRATEGIES","seamlessOpenStoreService","CLICK_ACTION","CLICK_TYPE","CCVAF_CLICK","productSettingsService","androidOpenStoreService","storeKitService","AFService","clickWrapperService","segmentationService","pixelProcessor","pixelService","limitedAreasService","LIMITED_AREAS_CATEGORIES","CLICK_EVENTS"],b.$inject=["$rootScope","$timeout","OPEN_URL_STRATEGIES","adapter","analytics","RV_ANALYTICS_CATEGORIES","IS_ANALYTICS_CATEGORIES","SSA_Utils","FIRE_PIXEL_STRATEGIES","seamlessOpenStoreService","CLICK_ACTION","CLICK_TYPE","CCVAF_CLICK","productSettingsService","androidOpenStoreService","storeKitService","AFService","clickWrapperService","segmentationService","pixelProcessor","pixelService","limitedAreasService","LIMITED_AREAS_CATEGORIES"];var c=angular.module("frameComponentsServices",[]);c.factory("endCardService",a),c.factory("videoPlayerService",b)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(){A.deviceOs=m.getDeviceData().os,A.appData=C.get(),A.appData.numOfStars=4.5,A.appData.starsImageName="stars-orange-background",A.shouldShowPrivacyLink=!0,A.postActionTitle=D.getPostActionTitle(),A.isWiggle=!1,A.deviceType=m.getScreenType(),A.postActionFunction=l.getDebounceFunction(p.storeKitReadyClickActionWrapper(t,D.isStoreKitClickStrategy(q.END_CARD)),m.getDebounceClickConfig()),A.addCurrentFrameName=A.fmFunctions.getCurrentFrameName(),A.privacyLink="http://www.ironsource.mobi/privacypolicy.html",A.componentCustomConfig={validateIcon:!0,hideIconIfFailed:!0,templateName:"installClickableTemplate",onIconFailedCallback:function(){e.trackEvent(h.bannerIconFailedToLoad,{generalmessage:A.appData.icon})}},A.textClampConfig={smallFontSize:s()===g.standart?B.smallFont.standart:B.smallFont.large,maxCharsEnabled:s()===g.standart?B.maxCharsEnabled.standart:B.maxCharsEnabled.large,enableFontSizeTransformation:!0}}function s(){return document.getElementsByTagName("body")[0].clientHeight===f.standart?g.standart:g.large}function t(){j.log("DEBOUNCE_TEST perform click",j.logLevel.trace);var a={event:{eventName:o.adClicked,eventParams:{eNameStart:h.bannerVisibleToBannerClicked,currentFrame:n.bannerInstall,generalMessage:D.getOpenStrategy(null)}},adapterCall:{method:"AdClicked",arguments:{}}};k.handlePostActionClick(D,E,u,v,a)}function u(){A.fmFunctions.setBackButtonFrameResponsibility(!1),j.log("ssaCarouselEndCard: opened url success",j.logLevel.trace)}function v(){A.fmFunctions.setBackButtonFrameResponsibility(!1)}function w(){A.onErrorAction=function(a){var b=a&&a[0]&&a[0].src||"",c="carouselEndCard | error loading image "+b;A.fmFunctions.frameLoadedError(c)},A.onLoadAction=function(){A.fmFunctions.frameLoaded(),b(function(){A.fmFunctions.frameEnded("")},300)}}function x(){e.trackTimingStart(h.bannerVisibleToBannerClicked),l.removeOnVisibleListener()}function y(){a.$broadcast("ssaLineClamp.recalculate")}function z(){r(),w(),l.callOnVisible(x),w(),A.onLoadAction()}var A=this,B=(c.children(),{smallFont:{standart:11,large:13},maxCharsEnabled:{standart:22,large:20}}),C=A.data.getAppInstallModel(),D=A.data.getPostActionModel(),E=A.data.getHybridModel();z(),d.addEventListener("orientationchange",y),a.$on("$destroy",function(){d.removeEventListener("resize",y)})}a.$inject=["$scope","$timeout","$element","$window","analytics","BANNER_SIZE","BANNER_TYPE","BN_ANALYTICS_CATEGORIES","adapter","LogService","endCardService","SSA_Utils","productSettingsService","END_CARD_FRMAES","AD_ANALYTICS_CATEGORIES","storeKitClickService","CLICK_ACTION"];var b=angular.module("ssaBannerInstall",[]);b.directive("ssaBannerInstallDefault",function(){var a={restrict:"E",templateUrl:"ssaBannerInstallDefaultTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaBannerInstallController"};return a}),b.controller("ssaBannerInstallController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){return c.innerHeight<c.innerWidth}function p(){return D.closeData.endCardFlags&&D.closeData.endCardFlags.LEB}function q(){D.closeData=angular.copy(E.get()),D.closeData.hideClose=!1,D.closeData.endCardFlags=E.getEndCardFlags(),D.closeClick=u,D.appData=F.get(),D.appData.numOfStars=4.5,D.appData.starsImageName="stars-bright-background",D.shouldShowPrivacyLink=D.fmFunctions.shouldShowPrivacyLink(),D.carouselImages=F.getAppImages(),D.postAction=G,D.postActionTitle=G.getPostActionTitle(),D.isWiggle=H.getShowWiggleFlag(),D.deviceType=j.getScreenType(),D.postActionFunction=t(),D.carouselActionFunction=s(),D.closeData.endCardFeatures=!0,D.replayClick=D.fmFunctions.replayClicked,D.showReplay=I.hasReplayFrame()&&D.fmFunctions.getHasReplayFrame()&&!p(),D.addCurrentFrameName=D.fmFunctions.getCurrentFrameName(),D.closeData.setBackButtonBehavior=v,D.closeData.isOfferClicked=r,D.textConfig={enableFontSizeTransformation:!1},D.isAFAd=G.shouldSupportAF(),D.isAFAd&&l.init()}function r(){return G.isOfferClicked()}function s(){if(!j.noClickInCarousel())return t()}function t(){return i.getDebounceFunction(m.storeKitReadyClickActionWrapper(w,G.isStoreKitClickStrategy(n.END_CARD)),j.getDebounceClickConfig())}function u(a){a?D.postActionFunction():D.fmFunctions.closeClicked()}function v(a){D.fmFunctions.setBackButtonFrameResponsibility(a)}function w(){g.log("DEBOUNCE_TEST perform click",g.logLevel.trace);var a=G.getXYCoordinates(),b={event:{eventName:e.clickDownloadNow,eventParams:{eNameStart:e.endCardDisplayedToClickDownload,currentFrame:k.carousel,generalMessage:G.getOpenStrategy(null),rvnomoreoffersreason:a}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:D.closeData.hideClose};D.fmFunctions.setBackButtonFrameResponsibility(!0),h.handlePostActionClick(G,J,x,y,b)}function x(){D.fmFunctions.setBackButtonFrameResponsibility(!1),g.log("ssaCarouselEndCard: opened url success",g.logLevel.trace)}function y(){D.fmFunctions.setBackButtonFrameResponsibility(!1)}function z(){a.$broadcast("stretchToFit.recalculate",{cb:function(){a.$broadcast("Carousel.recalculate"),a.$broadcast("ssaLineClamp.recalculate")}})}function A(){a.$on("Carousel.heightLimit",function(b,c){o()&&a.$broadcast("stretchToFit.recalculate",{limit:c&&c.heightLimit?c.heightLimit:null})}),D.onErrorAction=function(a){var b=a&&a[0]&&a[0].src||"",c="carouselEndCard | error loading image "+b;D.fmFunctions.frameLoadedError(c)},D.onLoadAction=function(){D.fmFunctions.frameLoaded(),b(function(){D.fmFunctions.frameEnded("")},300)},c.addEventListener("resize",z),a.$on("$destroy",function(){c.removeEventListener("resize",z)})}function B(){d.trackEvent(e.endCardDisplayed,{currentFrame:k.carousel},G.getVideoWatchTime()),d.trackTimingStart(e.endCardDisplayedToClickDownload),G.setEndCardDisplayedTime(),h.setTimeoutForDisplayStoreKitOnEndCard(G,J,x,y)}function C(){q(),A(),i.callOnVisible(B),A()}var D=this,E=D.data.getCloseButtonModel(),F=D.data.getAppInstallModel(),G=D.data.getPostActionModel(),H=D.data.getFeaturesModel(),I=D.data.getFlowModel(),J=D.data.getHybridModel();C()}a.$inject=["$scope","$timeout","$window","analytics","ENDCARD_ANALYTICS_CATEGORIES","adapter","LogService","endCardService","SSA_Utils","productSettingsService","END_CARD_FRMAES","AFService","storeKitClickService","CLICK_ACTION"];var b=angular.module("ssaCarouselEndCard",[]);b.directive("ssaCarouselEndCard",function(){var a={restrict:"E",templateUrl:"ssaCarouselEndCardTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaCarouselEndCardController"};return a}),b.controller("ssaCarouselEndCardController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(){X.updateEngagementUrlWithPlacement(r.getInteractionAlias(!0))}function z(a){var b="external_browser";n.call({method:"ActionClick",arguments:{type:"openUrl",url:a.url,method:b},callback:a.callback})}function A(a){s.log("DEBOUNCE_TEST perform click",s.logLevel.trace),a.screenX&&a.screenY&&X.setCoordinates(a.screenX,a.screenY),X.setAFToken(a.token?a.token:null);var c=X.getXYCoordinates(),d={event:{eventName:b.clickDownloadNow,eventParams:{eNameStart:b.endCardDisplayedToClickDownload,currentFrame:W,generalMessage:X.getOpenStrategy(),rvnomoreoffersreason:c}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:V.closeData.hideClose};V.fmFunctions.setBackButtonFrameResponsibility(!0),q.handlePostActionClick(X,Y,D.bind(a.callback),C,d)}function B(){return o.getDebounceFunction(w.storeKitReadyClickActionWrapper(A,X.isStoreKitClickStrategy(x.END_CARD)),r.getDebounceClickConfig())}function C(){V.fmFunctions.setBackButtonFrameResponsibility(!1)}function D(a){V.fmFunctions.setBackButtonFrameResponsibility(!1),s.log("ssaCarouselEndCard: opened url success",s.logLevel.trace),angular.isFunction(a)&&a();
}function E(){if(!P)return P=!0,!0}function F(){V.fmFunctions.replayClicked()}function G(){return e.isStoreKitVisible()?(m.trackEvent(d.closeAdBlockedStoreKit,{}),void i.sendMessage({name:g.failToCloseAd,data:c.storeKitVisible},R,h)):(Q.updateState(Q.getStates().hidden),Q.updateViewability(!1),i.sendMessage({name:g.stateChange,data:Q.getState()},R,h),i.sendMessage({name:g.updateDapiData,data:Q.getDataObject()},R,h),V.fmFunctions.setCloseState(p.close),void V.fmFunctions.closeClicked())}function H(){var a=u.service,b=a().getTemplateId(),c=v.get(),d=[4,34,5,35];return c.afterData.length>0&&d.indexOf(b)!==-1}function I(a){var b=a.useCustomClose;"boolean"!=typeof b||H()||(V.usedCustomClose=b,n.call({method:"SetForceClose",arguments:{isEnable:!V.usedCustomClose}}),k.$apply())}function J(){U.src=T}function K(){!S&&"contentWindow"in U&&(S=j.init({adFrame:U,element:R,callbacks:$,thirdPartyLibsConfigs:aa,shouldExtractXYCoordinates:_,isCloseButtonVisible:!V.closeData.hideClose,requestDapiUrl:!0}))}function L(a,b){!V.closeData.hideClose&&b&&b.parentBackAction&&b.parentBackAction()}function M(){m.trackEvent(b.endCardDisplayed,{currentFrame:W},X.getVideoWatchTime()),m.trackTimingStart(b.endCardDisplayedToClickDownload),X.setEndCardDisplayedTime(),q.setTimeoutForDisplayStoreKitOnEndCard(X,Y,D,C)}function N(a){V.fmFunctions.setBackButtonFrameResponsibility(a)}function O(){V.closeData=angular.copy(Z.get()),V.closeData.hideClose=!1,V.closeData.endCardFlags=Z.getEndCardFlags(),V.closeData.endCardFeatures=!0,V.closeData.setBackButtonBehavior=N}var P,Q,R,S,T,U,V=this,W=t.custom,X=V.data.getPostActionModel(),Y=V.data.getHybridModel(),Z=V.data.getCloseButtonModel(),$={connected:function(){V.fmFunctions.frameLoaded()},close:G,replay:F,open:z,openStoreUrl:B.call(null,arguments),useCustomClose:I,reward:E,interaction:function(a){s.log("CustomEndCard | interaction was called "+JSON.stringify(a),s.logLevel.trace),y()},getDapiData:function(){i.sendMessage({name:g.getDeviceData,data:Q.getDeviceData()},R,h)}},_=X.shouldExtractXYCoordinates(),aa={supportAF:X.shouldSupportAF()};V.$onInit=function(){T=V.data.getFrameLayoutModel().getCustomLayoutUrl(),U=l.find("iframe")[0],R=U.contentWindow,O(),K(),J(),V.fmFunctions.setCloseState(p.close),V.closeClick=G,V.postAction=X,k.$on("frame."+a.backButtonPressedEvent,L),V.fmFunctions.setBackButtonFrameResponsibility(!0),Q=f.initModel().getDapiModel(),o.callOnVisible(M)},V.$onDestroy=function(){S.destroy()}}a.$inject=["BACK_BUTTON_EVENTS","DAPI_ANALYTICS_CATEGORIES","CLOSE_FAIL_REASON","GENERAL_EVENTS","storeKitService","externalDataService","DAPI_CONNECTION_EVENTS","DAPI_MSG_PREFIXES","iframeMessageService","dapiService","$scope","$element","analytics","adapter","SSA_Utils","CLOSE_BUTTON_STATES","endCardService","productSettingsService","LogService","END_CARD_FRMAES","AdUnitDelivery","notifications","storeKitClickService","CLICK_ACTION"];var b=angular.module("ssaCustomAdContainer",[]);b.component("ssaCustomAdContainer",{bindings:{data:"=",fmFunctions:"="},controller:"ssaCustomAdContainerController as vm",templateUrl:"ssaCustomAdContainerTemplate.html"}),b.controller("ssaCustomAdContainerController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(){H=J.data.getVideoModel(),J.videoData=H.get(),I=J.data.getAppInstallModel(),J.featuresModel=J.data.getFeaturesModel(),J.isWiggle=J.featuresModel.getShowWiggleFlag(),J.shouldShowPrivacyLink=J.fmFunctions.shouldShowPrivacyLink(),J.isPreCache=j.isPreCache(),J.isPreload=j.isPreload(),J.postAction=J.data.getPostActionModel(),J.postActionTitle=J.postAction.getPostActionTitle(),J.postActionFunction=o.getDebounceFunction(s.storeKitReadyClickActionWrapper(x,J.postAction.isStoreKitClickStrategy(t.END_CARD)),j.getDebounceClickConfig()),J.hybrid=J.data.getHybridModel();var a=J.data.getTimerModel();J.timerData=angular.copy(a.get()),J.timerCompletionCountdown=a.getCompletionCountdown();var b=J.data.getCloseButtonModel();J.closeData=angular.copy(b.get()),J.closeData.allowBackButton=!0,J.closeData.endCardFlags=b.getEndCardFlags(),J.closeData.endCardFeatures=!0,J.closeClick=v,J.deviceDetails=j.getDeviceData(),J.productType=j.getProductType(),J.appData=I.get(),J.appData.numOfStars=4.5,J.isAFAd=J.postAction.shouldSupportAF(),J.isAFAd&&r.init()}function v(a){a?J.postActionFunction():J.fmFunctions.closeClicked()}function w(){var a=H.getVideoOrientation();a===q.UNDEFINED&&n.trackEvent(i.videoDimensionsUnavailable),J.layoutType=K[a]||K["default"],J.deviceType=j.getScreenType()}function x(){var a=J.postAction.getXYCoordinates(),b={event:{eventName:f.clickDownloadNow,eventParams:{eNameStart:f.endCardDisplayedToClickDownload,currentFrame:g.embeddedVideo,generalMessage:J.postAction.getOpenStrategy(null),rvnomoreoffersreason:a}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:J.closeData.hideClose};J.fmFunctions.setBackButtonFrameResponsibility(!0),h.handlePostActionClick(J.postAction,J.hybrid,y,z,b)}function y(){J.fmFunctions.setBackButtonFrameResponsibility(!1),d.log("ssaCarouselEndCard: opened url success",d.logLevel.trace)}function z(){J.fmFunctions.setBackButtonFrameResponsibility(!1)}function A(){var a=J.data.getMuteModel().muteBtnConfig();J.muteBtnShouldDisplay=a.toShow,J.muteBtnIconOff=a.shouldStartMutedByFlag}function B(){var b=J.data.getMuteModel();J.isVideoMute=b.shouldMutedVideo(J.muteBtnIconOff),o.addHandlerToRingerSwitch(function(){J.isVideoMute=b.shouldMutedVideo(J.muteBtnIconOff)}),a.$on("MuteButton.Clicked",function(a,c){J.muteBtnIconOff=c.shouldMute,J.isVideoMute=b.shouldMutedVideo(J.muteBtnIconOff)})}function C(){a.$on("Video.Started",function(a,b){m.call({method:"AdStarted",arguments:{}}),n.trackTimingStart(i.timeFromStartedToCompleted),G=b&&b.videoDuration||0,n.trackEvent(k.videoStarted,{generalmessage:G,isReplay:!!J.isReplayVideo})}),a.$on("Video.Ended",function(a,b){J.closeData.hideClose=!1,J.closeData.allowBackButton=!0,F&&(spinnerHideListener(),spinnerShowListener()),F=!1;var d=c.Math.ceil(G);J.fmFunctions.fireCallback("videoEnded",{videoDuration:d}),J.fmFunctions.setCloseState(l.close),m.call({method:"AdVideoEnded",arguments:{}}),n.trackEvent(k.videoCompleted,{generalmessage:G,isReplay:!!J.isReplayVideo}),e(function(){J.fmFunctions.frameEnded({moveToNextFrame:0})},0)}),a.$on("Video.Paused",function(a,b){m.call({method:"AdPaused",arguments:{}})}),a.$on("Video.Playing",function(a,b){m.call({method:"AdPlaying",arguments:{}})}),a.$on("Video.Loaded",function(a,b){d.log("ssaIncentVideoController | Video loaded "+b,d.logLevel.trace),J.fmFunctions.frameLoaded()}),a.$on("Video.LoadedError",function(a,b){d.log("ssaIncentVideoController | Video loaded with error "+b,d.logLevel.trace),J.fmFunctions.frameLoadedError({errMsg:b})}),a.$on("Video.TimeTick",function(b,c){a.$broadcast("Component.Tick",c),a.$broadcast("SkipIn.Tick",c),J.fmFunctions.fireCallback(c),E=c}),a.$on("Video.PartialTimeTick",function(b,c){a.$broadcast("Component.PartialTick",c)})}function D(){A(),B(),u(),C(),w(),a.$on("frame."+p.backButtonPressedEvent,function(a,b){J.closeData.allowBackButton&&b&&b.parentBackAction&&b.parentBackAction()}),a.$on("$destroy",function(){o.clearRingerSwitchCallbacks()}),J.fmFunctions.setBackButtonFrameResponsibility(!0),o.callOnVisible(function(){n.trackEvent(f.endCardDisplayed,{currentFrame:g.embeddedVideo},J.postAction.getVideoWatchTime()),n.trackTimingStart(f.endCardDisplayedToClickDownload),J.postAction.setEndCardDisplayedTime()})}var E,F,G,H,I,J=this,K={};K[q.PORTRAIT]="videoPortraitLayout",K[q.LANDSCAPE]="videoLandscapeLayout",K["default"]="videoPortraitLayout",D()}a.$inject=["$scope","$element","$window","LogService","$timeout","ENDCARD_ANALYTICS_CATEGORIES","END_CARD_FRMAES","endCardService","IS_ANALYTICS_CATEGORIES","productSettingsService","VIDEO_EVENTS","CLOSE_BUTTON_STATES","adapter","analytics","SSA_Utils","BACK_BUTTON_EVENTS","ORIENTATIONS","AFService","storeKitClickService","CLICK_ACTION"];var b=angular.module("ssaEmvLayout",[]);b.directive("ssaEmvLayout",function(){var a={restrict:"E",replace:!0,scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaEmvController",templateUrl:"ssaEmvTemplate.html"};return a}),b.controller("ssaEmvController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){function q(a){var b=J(a);b=b||J(),L.appImage=b,M.css({"background-image":"url("+b+")"})}function r(){var a=k.getScreenOrientation();a&&q(a)}function s(){return L.closeData.endCardFlags&&L.closeData.endCardFlags.LEB}function t(){L.closeData=angular.copy(N.get()),L.closeData.hideClose=!1,L.closeData.endCardFeatures=!0,L.postAction=O,L.replayClick=L.fmFunctions.replayClicked,L.showReplayButton=P.hasReplayFrame()&&L.fmFunctions.getHasReplayFrame()&&!s(),L.addCurrentFrameName=L.fmFunctions.getCurrentFrameName(),L.shouldShowPrivacyLink=L.fmFunctions.shouldShowPrivacyLink(),L.postActionTitle=O.getPostActionTitle(),L.postActionFunction=h.getDebounceFunction(o.storeKitReadyClickActionWrapper(x,O.isStoreKitClickStrategy(p.END_CARD)),j.getDebounceClickConfig()),L.closeData.setBackButtonBehavior=w,K=R.isUsingFrameLayout(),K?(L.closeData.isOfferClicked=u,L.closeClick=L.fmFunctions.closeClicked):(L.closeData.endCardFlags=N.getEndCardFlags(),L.closeData.isOfferClicked=u,L.closeClick=v),L.isAFAd=O.shouldSupportAF(),L.isAFAd&&n.init()}function u(){return O.isOfferClicked()}function v(a){a?L.postActionFunction():L.fmFunctions.closeClicked()}function w(a){L.fmFunctions.setBackButtonFrameResponsibility(a)}function x(){i.log("DEBOUNCE_TEST perform click",i.logLevel.trace);var a=O.getXYCoordinates(),b={event:{eventName:e.clickDownloadNow,eventParams:{eNameStart:e.endCardDisplayedToClickDownload,currentFrame:F(),generalMessage:O.getOpenStrategy(null),rvnomoreoffersreason:a}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:L.closeData.hideClose};L.fmFunctions.setBackButtonFrameResponsibility(!0),g.handlePostActionClick(O,Q,z,y,b)}function y(){L.fmFunctions.setBackButtonFrameResponsibility(!1)}function z(){L.fmFunctions.setBackButtonFrameResponsibility(!1),i.log("ssaFullScreenEndCard: opened url success",i.logLevel.trace)}function A(){r();var a=b.$on("screenOrientation.calculate",function(a,b){b&&b.orientation&&q(b.orientation)});b.$on("$destroy",function(){a()})}function B(){d.trackEvent(e.endCardDisplayed,{currentFrame:F()},O.getVideoWatchTime()),d.trackTimingStart(e.endCardDisplayedToClickDownload),O.setEndCardDisplayedTime(),g.setTimeoutForDisplayStoreKitOnEndCard(O,Q,z,y)}function C(a){if(U)return void i.log("returning on fail",i.logLevel.trace);i.log("in element load error",i.logLevel.trace);var b=a&&a[0]&&a[0].src||"",c="partialScreenLayout | error loading image "+b;L.fmFunctions.frameLoadedError(c),U=!0}function D(){return U?void i.log("returning",i.logLevel.trace):(i.log("in element load",i.logLevel.trace),V++,void(V>=W&&(i.log("calling on all elements loaded",i.logLevel.trace),E())))}function E(){L.fmFunctions.frameLoaded(),c(function(){L.fmFunctions.frameEnded("")},300)}function F(){return K?l.partialScreen:l.fullScreen}function G(){J=K?T.getImageByOrientation:S.getAppImages}function H(){K?m(N.getCustomLayoutCloseUrlByOrientation(L.orientation),D,C):E()}function I(){t(),G(),h.callOnVisible(B),A(),H()}var J,K,L=this,M=a.children(),N=L.data.getCloseButtonModel(),O=L.data.getPostActionModel(),P=L.data.getFlowModel(),Q=L.data.getHybridModel(),R=L.data.getFrameLayoutModel(),S=L.data.getAppInstallModel(),T=L.data.getImageModel(),U=!1,V=0,W=1;I()}a.$inject=["$element","$scope","$timeout","analytics","ENDCARD_ANALYTICS_CATEGORIES","adapter","endCardService","SSA_Utils","LogService","productSettingsService","screenOrientationService","END_CARD_FRMAES","loadImageAssetService","AFService","storeKitClickService","CLICK_ACTION"];var b=angular.module("ssaFullScreenEndCard",[]);b.directive("ssaFullScreenEndCard",function(){var a={restrict:"E",templateUrl:"ssaFullScreenEndCardTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaFullScreenEndCardController"};return a}),b.controller("ssaFullScreenEndCardController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){u.isEndCardImpressionExist()&&q(),d.trackEvent(e.endCardDisplayed,{currentFrame:j.brand},u.getVideoWatchTime()),d.trackTimingStart(e.endCardDisplayedToClickDownload),u.setEndCardDisplayedTime()}function o(){if(!u.isPixelFired()){var a=u.getClickTrackingURLsArray();a=u.replacePlaceholderClickTrackingArray(a,{"{{clickType}}":k.END_CARD}),r(a),u.setPixelFired(h.END_CARD,!0)}}function p(){var a=u.getPixelUrls({"{{clickType}}":k.END_CARD});if(a&&a.length>0&&!u.isPixelFired()){var b=l.preparePixelUrls({urls:a,isClickSeparationEnabled:i.isClickSeparationEnabled()});m.firePixelsWithDS({urls:b,type:"pixel",at:""}),u.setPixelFired(h.END_CARD,!0)}}function q(){var a=u.getEndCardImpressionArray();r(a)}function r(b){if(b){for(var c={multiplePixels:[]},d=0;d<b.length;d++)"string"==typeof b[d]&&(c.multiplePixels[d]={type:"pixel",at:"",url:b[d]});a.$emit("PixelDirective.FireMultiplePixels",c)}}function s(){g.callOnVisible(n),t.fmFunctions.frameLoaded(),b(function(){t.fmFunctions.frameEnded("")},300)}var t=this,u=t.data.getPostActionModel(),v=t.data.getSocialModel(),w=t.data.getCloseButtonModel();t.uxTemplate=t.data.getUxTemplateModel();parseInt(t.uxTemplate.getTemplateId());t.postAction=u,t.postActionStyle={"background-image":"url('"+u.getBackgroundLandscape()+"')"},t.closeData=angular.copy(w.get()),t.closeData.hideClose=!1,t.closeClick=t.fmFunctions.closeClicked,t.socialData=v.get(),t.click=g.getDebounceFunction(function(a){var b={eNameStart:e.endCardDisplayedToClickDownload,currentFrame:j.brand,generalMessage:u.getOpenStrategy()};u.setClickType(k.END_CARD),angular.extend(b,u.getClickDataObject()),d.trackTimingStop(e.clickDownloadNow,b),t.preventClick(a);var g="webview";u.shouldOpenInExtBrowser()&&(g="external_browser"),c.log("Adunit open post action page. Method: "+g,c.logLevel.trace),u.isClickTrackingArrayExist()?o():u.isClickTrackingExist()&&p();var h=u.createUrlWithPlaceholderReplaced({"{{clickType}}":k.END_CARD});h&&f.call({method:"ActionClick",arguments:{type:"openUrl",url:h,method:g}})},i.getDebounceClickConfig()),t.socialClick=function(b,d){if(t.preventClick(b),d&&d.link){var e="external_browser";if(d.clickLink){var g={type:"pixel",at:"",url:d.clickLink};c.log("Adunit open post action social click. Method: "+e,c.logLevel.trace),a.$emit("PixelDirective.FirePixel",g)}f.call({method:"ActionClick",arguments:{type:"openUrl",url:d.link,method:e}})}},t.preventClick=function(a){a&&a.preventDefault&&a.stopPropagation&&(a.preventDefault(),a.stopPropagation())},t.shouldShowSocialButtons=t.socialData&&t.socialData.length>0,t.shouldShowEAClickHereButton=!1,t.closeData.hideClose=!1,s()}a.$inject=["$scope","$timeout","LogService","analytics","ENDCARD_ANALYTICS_CATEGORIES","adapter","SSA_Utils","CLICK_ACTION","productSettingsService","END_CARD_FRMAES","CLICK_TYPE","pixelProcessor","pixelService"];var b=angular.module("ssaIncentBrandedAction",[]);b.directive("ssaIncentBrandedAction",function(){var a={restrict:"E",templateUrl:"ssaIncentBrandedActionTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaIncentBrandedActionController"};return a}),b.controller("ssaIncentBrandedActionController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){function t(){var a=B.data.getMuteModel().muteBtnConfig();B.muteBtnShouldDisplay=a.toShow,B.muteBtnIconOff=a.shouldStartMutedByFlag}function u(){var b=B.data.getMuteModel();B.isVideoMute=b.shouldMutedVideo(B.muteBtnIconOff),n.addHandlerToRingerSwitch(function(){B.isVideoMute=b.shouldMutedVideo(B.muteBtnIconOff)}),a.$on("MuteButton.Clicked",function(a,c){B.muteBtnIconOff=c.shouldMute,B.isVideoMute=b.shouldMutedVideo(B.muteBtnIconOff)})}function v(){var a=B.data.getSimpleOverlayEndCardModel().shouldShowSimpleOverlayEndCard(B.fmFunctions.getCloseState());a&&s.setSkipButtonClass(B.closeData),s.shouldSetSkipButtonFlow(B.closeData,B.fmFunctions.hasNextFrame())&&s.setSkipButtonFlow(B.closeData)}function w(){a.$on("Video.Started",function(a,b){l.call({method:"AdStarted",arguments:{}}),m.trackTimingStart(g.timeFromStartedToCompleted),D=b&&b.videoDuration||0,m.trackEvent(i.videoStarted,{generalmessage:D,isReplay:!!B.isReplayVideo}),r.startTracking()}),a.$on("Video.Ended",function(a,b){B.closeData.hideClose=!1,B.closeData.allowBackButton=!0,y&&(A(),z()),y=!1;var d=c.Math.ceil(D);B.fmFunctions.fireCallback("videoEnded",{videoDuration:d}),B.fmFunctions.setCloseState(j.close),r.stopTracking(),l.call({method:"AdVideoEnded",arguments:{}}),m.trackEvent(i.videoCompleted,{generalmessage:D,isReplay:!!B.isReplayVideo}),e(function(){B.fmFunctions.frameEnded({moveToNextFrame:0})},0)}),a.$on("Video.Paused",function(a,b){l.call({method:"AdPaused",arguments:{}}),r.videoPaused()}),a.$on("Video.Playing",function(a,b){e(function(){B.data.getAppInstallModel().preFetchAppImages()},2e3),l.call({method:"AdPlaying",arguments:{}}),r.videoPlaying(C)}),a.$on("Video.Loaded",function(a,b){d.log("ssaIncentVideoController | Video loaded "+b,d.logLevel.trace),B.fmFunctions.frameLoaded()}),a.$on("Video.LoadedError",function(a,b){d.log("ssaIncentVideoController | Video loaded with error "+b,d.logLevel.trace),B.fmFunctions.frameLoadedError({errMsg:b})}),a.$on("Video.TimeTick",function(b,c){a.$broadcast("Component.Tick",c),a.$broadcast("SkipIn.Tick",c),B.fmFunctions.fireCallback(c),C=c}),a.$on("Video.PartialTimeTick",function(b,c){a.$broadcast("Component.PartialTick",c)})}function x(){var b=B.data.getUxTemplateModel(),c=parseInt(b.getTemplateId());c!==p.RIS&&c!==p.RISFullScreen||(B.ris=!0),"ssa-internal-video-player-test"===B.videoData.videoType&&(B.fmFunctions.setHasReplayFrame(!1),B.muteBtnShouldDisplay=!1),d.log("IncentVideoCtrl loaded: "+(new Date).getTime(),d.logLevel.trace);var e=document.getElementsByTagName("body")[0];B.videoData&&B.videoData.videoTime&&B.videoData.videoSource&&B.videoData.videoSource.videoformat_mp4&&r.initMoat(e,B.videoData.videoTime,B.videoData.videoSource.videoformat_mp4),t(),u(),J(),I(),w(),v(),a.$on("frame."+o.backButtonPressedEvent,function(a,b){B.closeData.allowBackButton&&b&&b.parentBackAction&&b.parentBackAction()}),a.$on("ssaIncentVideo.externalAd",function(a,b){b&&b.action&&"reward"===b.action&&B.fmFunctions.fireCallback("rewardCallback")}),a.$on("$destroy",function(){n.clearRingerSwitchCallbacks()}),B.fmFunctions.setBackButtonFrameResponsibility(!0),B.closeData.hideClose&&(y=!0,z=a.$on("ssaSpinner.show",function(){B.closeData.hideClose=!1}),A=a.$on("ssaSpinner.hide",function(){B.closeData.hideClose=!0}))}var y,z,A,B=this,C=0,D=0,E=!1,F=B.data.getVideoModel();B.videoData=F.get(),B.isReplayVideo=B.fmFunctions.getIsInReplayMode(),B.shouldShowPrivacyLink=B.fmFunctions.shouldShowPrivacyLink(),B.featuresModel=B.data.getFeaturesModel(),F.shouldSupportPlayableHTMLUrlFlow()&&(B.videoData.videoType=f.externalUnified),B.isPreCache=h.isPreCache(),B.isPreload=h.isPreload(),B.postAction=B.data.getPostActionModel(),B.hybrid=B.data.getHybridModel(),B.appData=B.data.getAppInstallModel().get();var G=B.data.getTimerModel();B.timerData=angular.copy(G.get()),B.timerCompletionCountdown=G.getCompletionCountdown();var H=B.data.getCloseButtonModel();B.closeData=angular.copy(H.get()),B.closeData.allowBackButton=!0,B.closeClick=B.fmFunctions.closeClicked,B.setCloseState=B.fmFunctions.setCloseState,B.deviceDetails=h.getDeviceData(),B.productType=h.getProductType();var I=function(){B.ris?(B.timerData.timerClass="ssa-progress-bar",B.timerData.isSecured=h.isSecuredProtocol(),B.timerData.isPreCache=B.isPreCache):B.timerData.timerClass="ssa-timer"},J=function(){B.scriptData=null,F.isExternallyTracked()&&(F.initAdvertiserTrackingService(),B.scriptData=F.getExternallyTrackingScriptData(),a.$on("AdUnit.StartTimer",function(a,b){b.restartTimer===!0?(E&&(B.timerData.countTo=F.getVideoTime(),B.timerData.showTimer=!0),e(function(){B.videoData.currentTime=0},0)):E&&G.getCompletionCountdown()-C>0&&(B.timerData.countTo=F.getVideoTime()-(C+1),B.timerData.showTimer=!0)}),e(function(){E=G.getShowTimer(),a.$apply(function(){B.timerData.showTimer=!1})},0))};x()}a.$inject=["$scope","$element","$window","LogService","$timeout","EXTERNAL_VIDEO_TYPE","IS_ANALYTICS_CATEGORIES","productSettingsService","VIDEO_EVENTS","CLOSE_BUTTON_STATES","CLOSE_BUTTON_STYLES","adapter","analytics","SSA_Utils","BACK_BUTTON_EVENTS","TEMPLATES","MOAT_EVENTS","moatService","closeButtonService"];var b=angular.module("ssaIncentVideo",[]);b.directive("ssaIncentVideo",function(){var a={restrict:"E",templateUrl:"ssaIncentVideoTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaIncentVideoController"};return a}),b.controller("ssaIncentVideoController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){function C(){angular.isNumber(O)&&(U=c(E,1e3*O))}function D(){Y={vpaidLoaded:function(a){L.fmFunctions.frameLoaded()},vpaidLoadedError:function(a){L.fmFunctions.frameLoadedError(a&&a.errMsg||"vpaidLoadedError")},moatStartTracking:function(){d.notifyStartTracking()},moatStopTracking:function(){d.notifyStopTracking()},omidStartSession:function(a){var b=a||{};e.startSession(b)},omidFinishSession:function(){e.finishSession()},omidImpressionOccurred:function(a){var b=a||{};e.impressionOccurred(b)}},X={connected:function(){L.fmFunctions.frameLoaded()},getMraidData:function(){l.sendMessage({name:g.updateMraidData,data:W.getDataObject()},M,u)},open:function(a){if(W.getCurrentState()===W.getStates().loading)return void l.sendError("Call to open in loading state","open");j.call({method:"AdClicked",arguments:{}}),s.openUrl(S,angular.noop,angular.noop,a);var b={eNameStart:n.endCardDisplayedToClickDownload,currentFrame:v.mraid};S.setClickType(z.VIDEO),S.increaseClickCounter(),angular.extend(b,S.getClickDataObject()),o.trackTimingStop(w.adClicked,b)},openStoreUrl:I.call(null,arguments),expand:function(a){if(o.trackEvent(k.expand,{generalMessage:a||""}),W.isInLoadingState())return void l.sendError("Call to expand in loading state","expand")},setExpandProperties:function(a){o.trackEvent(k.setExpandProperties,{generalMessage:JSON.stringify(a)||""}),"object"==typeof a&&(delete a.isModal,angular.extend(W.getExpandProperties(),a),"undefined"!=typeof a.useCustomClose&&this.useCustomClose(a.useCustomClose),l.sendMessage({name:g.updateMraidData,data:W.getDataObject()},M,u))},useCustomClose:function(b){"boolean"!=typeof b||W.notAllowedToUseCustomClose()||(L.usedCustomClose=b,a.$apply())},close:function(){return W.isInLoadingState()?void l.sendError("Call to close in loading state","close"):(W.updateCurrentState(W.getStates().hidden),l.sendMessage({name:g.updateMraidData,data:W.getDataObject()},M,u),l.sendMessage({name:g.stateChange,data:W.getCurrentState()},M,u),L.fmFunctions.setCloseState(r.close),void L.fmFunctions.closeClicked())},setResizeProperties:function(a){o.trackEvent(k.setResizeProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(W.getResizeProperties(),a),l.sendMessage({name:g.updateMraidData,data:W.getDataObject()},M,u)},resize:function(){if(o.trackEvent(k.resize),W.isInLoadingState())return void l.sendError("Call to resize in loading state","resize")},setOrientationProperties:function(a){o.trackEvent(k.setOrientationProperties,{generalMessage:JSON.stringify(a)||""}),angular.extend(W.getOrientationProperties(),a),l.sendMessage({name:g.updateMraidData,data:W.getDataObject()},M,u)},supports:function(a){o.trackEvent(k.supports,{generalMessage:a||""})},log:function(a){o.trackEvent(k.log,{generalMessage:a})},reward:E}}function E(){V||(V=!0,L.closeData.hideClose=!1,U&&c.cancel(U),a.$emit("Video.Ended",{}),L.fmFunctions.fireCallback("completions"),L.fmFunctions.frameEnded())}function F(a,b){L.usedCustomClose||b&&b.parentBackAction&&b.parentBackAction()}function G(){1378027==p.getCRID()||Z.test(Q)}function H(){if(W.isInLoadingState())return void l.sendError("Call to openStoreUrl in loading state","openStoreUrl");var a={event:{eventName:n.clickDownloadNow,eventParams:{eNameStart:n.endCardDisplayedToClickDownload,generalMessage:S.getOpenStrategy()}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:L.closeData.hideClose};S.isUrlExist()&&(L.fmFunctions.setBackButtonFrameResponsibility(!0),t.handlePostActionClick(S,T,J,J,a,z.VIDEO))}function I(){return i.getDebounceFunction(x.storeKitReadyClickActionWrapper(H,S.isStoreKitClickStrategy(y.END_CARD)),p.getDebounceClickConfig())}function J(){L.fmFunctions.setBackButtonFrameResponsibility(!1)}function K(){var a=L.data.getSimpleOverlayEndCardModel().shouldShowSimpleOverlayEndCard(L.fmFunctions.getCloseState());a&&B.setSkipButtonClass(L.closeData)}var L=this;L.usedCustomClose=!1;var M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z=/ironSrc vpaid hack/;L.$onInit=function(){var c=L.data.getVideoModel();P=c.get(),Q=P.videoSource.mraid||P.videoSource.html;var d=L.data.getCloseButtonModel();L.closeData=angular.copy(d.get()),L.closeClick=L.fmFunctions.closeClicked,L.isBannerFlow=p.getProductType()===A.Banner,L.shouldShowPrivacyLink=L.fmFunctions.shouldShowPrivacyLink(),S=L.data.getPostActionModel(),L.postAction=S,T=L.data.getHybridModel();var g=L.data.getTimerModel();O=g.getCompletionCountdown(),W=h.initModel().getMraidModel(),K(),i.callOnVisible(C),a.$on("frame."+q.backButtonPressedEvent,F),L.fmFunctions.setBackButtonFrameResponsibility(!0),N=b.find("iframe")[0],M=N.contentWindow,D(),e.init(),R=m.init({adFrame:N,element:M,callbacks:X,generalCallbacks:Y,adData:{closeData:L.closeData,postAction:L.postAction,isVpaid:G()}}),N.contentDocument.write("<html><head>"+f.getMraidScript()+"</head><body>"+Q+"</body></html>"),N.contentDocument.close(),o.trackTimingStart(n.endCardDisplayedToClickDownload)},L.$onDestroy=function(){R.destroy()}}a.$inject=["$scope","$element","$timeout","moatService","omidService","externalScriptsService","MRAID_COMMUNICATION_EVENTS","externalDataService","SSA_Utils","adapter","MRAID_ANALYTICS_CATEGORIES","iframeMessageService","mraidService","ENDCARD_ANALYTICS_CATEGORIES","analytics","productSettingsService","BACK_BUTTON_EVENTS","CLOSE_BUTTON_STATES","videoPlayerService","endCardService","MRAID_MSG_PREFIXES","END_CARD_FRMAES","AD_ANALYTICS_CATEGORIES","storeKitClickService","CLICK_ACTION","CLICK_TYPE","PRODUCT_TYPES","closeButtonService"];var b=angular.module("ssaMraidAdContainer",[]);b.component("ssaMraidAdContainer",{bindings:{data:"=",fmFunctions:"="},controller:"ssaMraidAdContainerController as vm",templateUrl:"ssaMraidAdContainerTemplate.html"}),b.controller("ssaMraidAdContainerController",a)}(),function(){function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){p(),A.appData=A.data.getAppInstallModel().get(),A.postAction=B,A.appTitle=A.appData.title,A.isWiggle=!1,A.postActionTitle=D.getSimpleOverlayEndCardCTA(),A.postActionFunction=r(),A.onEndCardPressed=q(),B.shouldSupportAF()&&h.init()}function p(){var a=A.data.getCloseButtonModel();A.closeData=angular.copy(a.get()),A.closeData.hideClose=!1,A.closeData.endCardFlags=a.getEndCardFlags(),A.closeClick=A.fmFunctions.closeClicked,A.closeData.endCardFeatures=!0,A.fmFunctions.setCloseState(n.close),A.closeData.setBackButtonBehavior=v}function q(){return D.isFullCardClickable()?A.postActionFunction:null}function r(){return j.getDebounceFunction(i.storeKitReadyClickActionWrapper(s,B.isStoreKitClickStrategy(m.END_CARD)),g.getDebounceClickConfig())}function s(){e.log("DEBOUNCE_TEST perform click",e.logLevel.trace);var a=B.getXYCoordinates(),b={event:{eventName:k.clickDownloadNow,eventParams:{eNameStart:k.endCardDisplayedToClickDownload,currentFrame:l.simple,generalMessage:B.getOpenStrategy(null),rvnomoreoffersreason:a}},adapterCall:{method:"AdClicked",arguments:{}},isXButtonHidden:A.closeData.hideClose};v(!1),f.handlePostActionClick(B,C,t,u,b)}function t(){v(!1),e.log("ssaSimpleOverlayEndCardComponent: opened url success",e.logLevel.trace)}function u(){v(!1)}function v(a){A.fmFunctions.setBackButtonFrameResponsibility(a)}function w(){x(),D.setEndCardShown(),j.callOnVisible(y)}function x(){function a(a){return angular.element(document.querySelector(a))}a(".frameWrapper").addClass("blurWrapper"),c(function(){a("#simpleOverlayEndCardWrapper .appName").addClass("animate"),a("#simpleOverlayEndCardWrapper .appIcon").addClass("animate"),a("#simpleOverlayEndCardWrapper .installActions").addClass("animate")},200)}function y(){d.trackEvent(k.endCardDisplayed,{currentFrame:l.simple},B.getVideoWatchTime()),d.trackTimingStart(k.endCardDisplayedToClickDownload),B.setEndCardDisplayedTime(),f.setTimeoutForDisplayStoreKitOnEndCard(B,C,t,u)}function z(){o(),w()}var A=this,B=A.data.getPostActionModel(),C=A.data.getHybridModel(),D=A.data.getSimpleOverlayEndCardModel();z()}a.$inject=["$scope","$window","$timeout","analytics","LogService","endCardService","productSettingsService","AFService","storeKitClickService","SSA_Utils","ENDCARD_ANALYTICS_CATEGORIES","END_CARD_FRMAES","CLICK_ACTION","CLOSE_BUTTON_STATES"];var b=angular.module("ssaSimpleOverlayEndCard",[]);b.directive("ssaSimpleOverlayEndCard",function(){var a={restrict:"E",templateUrl:"ssaSimpleOverlayEndCardTemplate.html",scope:{},bindToController:{data:"=",fmFunctions:"="},controllerAs:"vm",controller:"ssaSimpleOverlayEndCardController"};return a}),b.controller("ssaSimpleOverlayEndCardController",a)}(),function(){var a=angular.module("ssaFrameManager",["frameComponentsServices","ssaCarouselEndCard","ssaFullScreenEndCard","ssaIncentBrandedAction","ssaIncentVideo","ssaCustomAdContainer","ssaMraidAdContainer","ssaEmvLayout","ssaSimpleOverlayEndCard"]);a.directive("ssaFrameManager",function(){var a={restrict:"E",templateUrl:"ssaFrameManager.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"ssaFrameManagerController"};return a}),a.directive("mandatoryAsset",function(){return{restrict:"A",link:function(a,b,c){function d(){b.unbind("load"),b.unbind("error")}function e(){b.bind("load",function(){d(),a.$apply(c.onLoadSuccess)}),b.bind("error",function(){d(),b.css("display","none"),a.$apply(c.onLoadError)})}e()}}}),a.controller("ssaFrameManagerController",["$scope","$element","$state","$stateParams","$compile","adapter","hybridService","analytics","endCardService","creativeService","closeButtonService","adUnitTrackingService","seamlessOpenStoreService","engagementClickService","CLOSE_BUTTON_STATES","CLOSE_BUTTON_EVENTS","BACK_BUTTON_EVENTS","OPEN_URL_STRATEGIES","LAYOUT_TYPE","moatService","omidService","SSA_Utils","storeKitService","ORIENTATIONS","productSettingsService","screenOrientationService","LAYOUT_CLASS","LogService","dialogBoxService","extraOffersService","storeKitClickService","CLICK_TYPE","clickService","STORE_KIT_EVENTS","qualityClickService","storeKitTimerService","disableClickService","appStateHelper","skOverlayService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){function N(){Wa.getOpenStrategy()===r.seamless&&(m.closeClicked(),a.$emit(p.closeButtonClicked)),Ya.isHybridFlow()?(g.flowEnded(!1),P()):O()}function O(){lb===o.confirmNextFrame||lb===o.confirm?C.showDialogBoxDuringAd():_a.shouldShowSimpleOverlayEndCard(lb)?Q():lb===o.close?P():k.notifyCloseClick(Wa.getAdClosedDataObject())}function P(){w.clearStoreKit(Wa),W()&&n.fire(Wa),X()&&n.fireClickAdClose(Wa,F.CLOSE_X),a.$emit("AdUnitTracking.FinishTracking",gb),c.go("^"),E.onAdClosed(),M.release(),R(),I.release()}function Q(){a.$evalAsync(function(){a.showSimpleOverlayEndCard=!0})}function R(){t.stopTracking(),$a.isOmidSupportedAd()&&u.finishSession()}function S(){return ab&&ab.showPrivacyLink&&y.getPrivacyLinkUrl()}function T(){return kb}function U(a){kb=a}function V(a){ib=a}function W(){return ib}function X(){return y.shouldReportAdSessionEnded()}function Y(a){Oa=a}function Z(){db=!0,$()}function $(){cb&&db&&_()}function _(){ab.isFirstFrame&&!jb&&(Ya.shouldHandleHybridFlow()&&g.flowStarted(),V(!0),Ka.flowStarted(Sa,Ta,Wa)),ka()}function aa(a){ab.isFirstFrame&&Ka.flowStartedError(a);
}function ba(){Ya.isHybridFlow()?(g.flowEnded(!0),P()):ab.hasNextFrame()?oa():Ka.flowEnded()}function ca(a,b){var c={callbackKey:a};b&&angular.extend(c,b),Sa.fireCallback(c)}function da(){jb=!0;var a=Va.getReplayFrame();ja(a)}function ea(){return jb}function fa(a){lb=a,k.setAdapterCloseState(lb)}function ga(){return lb}function ha(){return ab.name}function ia(){return ab.hasNextFrame()}function ja(b){Ia&&Ia.$destroy();var c=document.querySelector(".componentContainer");if(c){Ia=a.$new(),ab=b;var d=ab.componentName;bb.componentData=Ja;var f="<"+d+' data="vm.componentData" fm-functions="vm.FMFunctions"></'+d+">",g=e(f)(Ia);c.replaceChild(g[0],c.firstElementChild)}}function ka(){lb=ab.isFirstFrame?k.getCloseActionForFirstFrame(jb,Na.closeAction,ab.closeAction,hb):ab.closeAction,k.setAdapterCloseState(lb),la(lb)}function la(a){var b="confirmNextFrame"===a?"AdController.moveToNextFrame":"AdController.confirmCloseClicked";C.setNextFrameBehavior(b)}function ma(){var a=ab.getNextFrame();ja(a),Oa=!1,mb&&ua(a)&&D.minimizeFrameAndPresentExtraOffersContainer()}function na(a){return w.isReadyToDisplay(Za)?void w.handleFlow(Wa):void a()}function oa(){return w.isSupported(Wa)?void na(ma):void ma()}function pa(){ab.hasNextFrame()?oa():P()}function qa(a,b){var c=C.errorDialogData();if(b){var d=b.options;d.message&&(c.bodyText=d.message),d.yes&&(c.confirmLabel=d.yes)}C.showDialogBox(c)}function ra(a,b){hb=!0,Ka.userCompletionNotification(gb),lb=k.getCloseActionPostUserCompletionNotification(Na.closeAction),k.setAdapterCloseState(lb)}function sa(b,c){Oa?a.$broadcast("frame."+q.backButtonPressedEvent,{parentBackAction:N}):N()}function ta(a){mb=a,ua(ab)&&D.minimizeFrameAndPresentExtraOffersContainer()}function ua(a){return D.doesFrameSupportShowingExtraOffersInEndCard(a)}function va(){a.$on("AdController.moveToNextFrame",pa),a.$on("AdController.alertUserOnError",qa),a.$on("AdController.confirmCloseClicked",P),a.$on("AdUnit.confirmCloseClicked",P),a.$on("AdUnit.userCompletionNotification",ra),a.$on("frameManager."+q.backButtonPressedEvent,sa),a.$on("$destroy",v.destroyRingerListener),a.$on("AdUnit.extraOffersReceived",ta),X()&&(a.$on("AdController.enterBackground",wa),a.$on("AdController.enterForeground",xa))}function wa(a,b){if(L.isInBackground(b)){L.setEnteredBackground(!0);var c=w.isStoreKitVisible()?F.CLOSE_BG_SK:F.CLOSE_BG;n.fireClickAdClose(Wa,c)}}function xa(a,b){var c=L.isInForeground(b)&&L.isEnteredBackground();c&&(Wa.setEnteredForeground(!0),L.setEnteredBackground(!1))}function ya(a){bb.showFrameLayoutPortrait=a===x.PORTRAIT,bb.showFrameLayoutLandscape=!bb.showFrameLayoutPortrait}function za(){var a="FrameManager | Error loading layout image";B.log(a,B.logLevel.trace),aa(a)}function Aa(){fb++,fb===eb&&Ca()}function Ba(){var a=z.getScreenOrientation();ya(a||x.PORTRAIT),bb.frameLayoutImagePortrait=Ha.getFrameUrlByOrientation(x.PORTRAIT),bb.frameLayoutImageLandscape=Ha.getFrameUrlByOrientation(x.LANDSCAPE),eb=2,bb.transparentLayoutClass=Ha.getTransparentLayoutClass(),bb.deviceType=y.getScreenType(),bb.customFrameType=Ha.getCustomStyleName()}function Ca(){cb=!0,$()}function Da(a){var b=85,c=100;return a&&a>=b&&a<=c}function Ea(){var a=y.getPartialScreenWidthPercentage();if(a&&Da(a)){var b=angular.element(document.querySelector(".frameContentContainer"));b.css({width:a+"%"})}}function Fa(){Ea(),Ba(),a.$on("screenOrientation.calculate",function(b,c){c&&c.orientation&&a.$apply(function(){ya(c.orientation)})})}function Ga(){if(Ja=j.getCreative(gb),!Ja)return void P();Ya=Ja.getHybridModel(),Za=Ja.getFeaturesModel(),$a=Ja.getMeasurementModel(),bb.onElementFailedToLoad=za,bb.onElementLoaded=Aa,v.bindListenerToRingerStatusEvent(),va(),La=Ja.getType(),Qa=Ja.getUxTemplateModel(),Ma=Qa.getTemplateId(),Ka=j.getProductCallbacks(),Ra=Ja.getCloseButtonModel(),Na=Ra.get(),Ua=Ja.getTrackingModel(),Pa=Ua.get(),l.startTracking(Pa.externallyTracked,gb),Wa=Ja.getPostActionModel(),Xa=Wa.get(),_a=Ja.getSimpleOverlayEndCardModel(),G.init(Wa),K.init(),M.init(),Ya.shouldHandleHybridFlow()?g.initHybridFlow(Wa,Ya,Za):w.preloadAppInstallPage(Wa,Ja.getSKANModel()),Sa=Ja.getCreativeCallbacksObj(),Ta=Ja.getFillRateCallbacksObj(),Va=Ja.getFlowModel();var a=Va.getFirstFrame();bb.componentData=Ja,bb.templateClass=Ma,Ha=Ja.getFrameLayoutModel(),bb.isPartialScreen=Ha.isUsingFrameLayout(),bb.layoutType=Ha.getLayoutType(),bb.isPartialScreen?Fa():Ca(),ja(a),I.init({qualityClickUrl:Wa.getAnalyticsUrl(),qc:y.getQuatroConfig()}),J.init({timeThresholds:y.getThresholds()})}var Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb=this,cb=!1,db=!1,eb=0,fb=0,gb=d.id,hb=!1,ib=!1,jb=!1,kb=!0,lb=o.close,mb=!1;bb.isPartialScreen=!1,bb.FMFunctions={frameEnded:ba,frameLoaded:Z,frameLoadedError:aa,fireCallback:ca,replayClicked:da,getIsInReplayMode:ea,closeClicked:N,setCloseState:fa,getCloseState:ga,setBackButtonFrameResponsibility:Y,getCurrentFrameName:ha,shouldShowPrivacyLink:S,getHasReplayFrame:T,setHasReplayFrame:U,hasNextFrame:ia},Ga()}])}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(a,c,d,e,h){if("AD.frameManager"===e.name&&b.is("AD")){f.setAdapterCloseState(g.close);var j={};if(h.id){var k=i.getCreative(h.id);if(k){var l=k.getPostActionModel();j=l.getAdClosedDataObject()}}f.notifyCloseClick(j)}}function k(){a.$broadcast("frameManager."+h.backButtonPressedEvent)}var l,m=this,n=d.service();m.init=function(){l=n.getDBObj(),a.$on("$stateChangeSuccess",j),e.setAdunitResponsibilityAndAction(k),i.resetCreativeData(),i.addCreative(l).then(function(){b.go("AD.frameManager",{id:l.id?l.id:l.crid})},function(a){c.flowStartedError(a)})},m.init()}a.$inject=["$scope","$state","baseProduct","AdUnitDelivery","BackButtonService","closeButtonService","CLOSE_BUTTON_STATES","BACK_BUTTON_EVENTS","creativeService"];var b=angular.module("ssaRV",[]);b.directive("ssaRv",function(){var a={restrict:"E",templateUrl:"ssaRVTemplate.html",scope:{},bindToController:!0,controllerAs:"vm",controller:"ssaRVController"};return a}),b.controller("ssaRVController",a)}(),function(){function a(a,b){function c(c,f,g){var h=b.service();h.isUnrulyCarousel()?e(c,f):(a.$emit("AdUnit.AdLoaded",{}),d(c,g))}function d(c,d){var e=a.$on("AdController.adVisible",function(f,g){var h=b.service().getDemandSourceName(),i={callbackKey:"impressions"};d&&d.setAdImpressionTime(),c.fireCallback(i),a.$emit("AdUnit.adEventNotification",{eventName:i.callbackKey,dsName:h}),e()})}function e(b,c){var e=a.$on("AdController.UnrulyAdRequest",function(b,d){var g=JSON.parse(d);"ok"===g.result?c.track({trackingType:"request"}):(a.$emit("AdUnit.AdLoaded",{errMsg:g.data}),f()),e()}),f=a.$on("AdController.UnrulyAdResponse",function(e,g){var h=JSON.parse(g);if("hit"===h.result)c.track({trackingType:"responseHit"}),a.$emit("AdUnit.AdLoaded",{}),d(b);else{var i=function(){a.$emit("AdUnit.AdLoaded",{errMsg:h.data})};c.track({trackingType:"responseMiss",data:"generalError",cb:i})}f()})}return{flowStarted:function(a,b,d){c(a,b,d)},flowEnded:function(){},userCompletionNotification:function(){a.$broadcast("ssaNotification.show",{state:"after"})},registerImpressionOnVisible:d,flowStartedError:function(b){a.$emit("AdUnit.AdLoaded",{errMsg:b})}}}a.$inject=["$rootScope","AdUnitDelivery"];var b=angular.module("adUnitBaseProduct",[]);b.factory("baseProduct",a)}(),function(){function a(a,b,c){function d(){return i&&i.hasOwnProperty("getToken")&&null!==h?i.getToken(h):g}function e(a){return c.hasOwnProperty(a)?c[a]:c.TOKEN}function f(){a.onAFReady=function(a){i=a,document.body.addEventListener("touchstart",function(a){h=a})},function(a,c,d){var e,f=a.getElementsByTagName(c)[0];a.getElementById(d)||(e=a.createElement(c),e.id=d,e.src=b.url,f.parentNode.insertBefore(e,f))}(document,"script","AppsFlyer-jssdk")}var g="EMPTY_TOKEN",h=null,i=null;return{getToken:d,getTokenType:e,init:f}}a.$inject=["$window","AF_LIB","AF_TOKEN_TYPE"];var b=angular.module("AdUnit");b.factory("AFService",a)}(),function(){angular.module("AdUnit").factory("perimeterXService",["$window","SSA_Utils","ENV_OPTIONS",function(a,b,c){function d(b){if(!angular.isDefined(a._pxAppId)&&b){a._pxAppId=b._pxAppId,a._pxPubHost=b._pxPubHost,a._pxRootUrl=b._pxRootUrl;for(param in b.extraParams)a[param]=b.extraParams[param];a.pxInit=function(){a.PX.Events.subscribe("risk",function(a){i=a})},g(b.src,null),!b.qaPixel||j!==c.develop&&j!==c.stage||f(b.qaPixel)}}function e(){return i}function f(a){var b=new Image;b.src=a}function g(b,c){if(b){var d=a.document.createElement("script");d.type="text/javascript",d.onload=function(){c&&angular.isFunction(c)&&c()},d.src=b,d.async=1,a.document.getElementsByTagName("head")[0].appendChild(d)}}function h(){return{"{{pxScore}}":encodeURIComponent(e())}}var i,j=b.getEnv();return{getRisk:e,load:d,getScoreAlias:h}}])}(),function(){function a(a,b,c){var d={},e={},f=function(){a.$on("AdUnit.AdLoaded",function(a,b){var c={event:"AdLoaded"};angular.extend(c,b),d.sdkControllerEvent(c)}),a.$on("AdUnit.AdClicked",function(){d.sdkControllerEvent({event:"AdClicked"})}),a.$on("AdUnit.adEventNotification",function(a,b){b&&d.sdkControllerEvent({event:"adEventNotification",eventName:b.eventName,dsName:b.dsName||"",extData:b.extData||{}})}),a.$on("CloseBTN.Close",function(){d.sdkControllerEvent({event:"AdClose"})}),a.$on("AdUnit.adTracked",function(){d.sdkControllerEvent({event:"AdTracked"})}),a.$on("AdUnit.error",function(a,b){d.sdkControllerEvent(b)}),a.$on("AdUnit.AdSourceError",function(){var a={event:"AdLoaded",errMsg:"AdSourceError"};d.sdkControllerEvent(a)})};return{init:function(){d=this,a.$on("AdUnit.getConfig",function(){var a=b.search().productType,c={event:"GetConfig",productType:a};d.sdkControllerEvent(c)})},setEventDefaults:function(a){angular.extend(e,a)},initEvents:function(){f()},sdkControllerEvent:function(a){angular.extend(a,e),c.call({method:a.event,arguments:a})}}}a.$inject=["$rootScope","$location","adapter"];var b=angular.module("AdUnit");b.factory("AdControllerService",a)}(),function(){var a=angular.module("AdUnit");a.factory("adUnitCallbacksService",["$rootScope","LogService","productSettingsService","placeholderManager","moatService","segmentationService",function(a,b,c,d,e,f){function g(c){function g(e,g){var h=f.getSegmentsPlaceholderAlias(),i=d.replacePlaceholderWithMap(e.url,h);e.url=c.replaceAllConstPlaceholders(i),a.$broadcast("PixelDirective.FirePixel",e),b.log("Callback: "+JSON.stringify(e),b.logLevel.debug,"event"),g||(e.fired=!0)}function h(a){isNaN(a)||angular.forEach(n,function(c,d){for(var f=c.length,h=0;h<f;h++){var i=c[h];!o.hasOwnProperty(d)&&!isNaN(i.at)&&i.at<=a&&!i.fired&&(g(i),e.dispatchEvent([i]),b.log("Fired pixel are not fired at:"+i.at,b.logLevel.debug))}})}function i(b){var c=j(b);c.callbackEvents.indexOf("adTracked")!==-1&&a.$broadcast("AdUnit.adTracked",""),h(b)}function j(a){var c=[],d=[];if(n.hasOwnProperty(a))for(var f=n[a],h=0;h<f.length;h++)f[h].hasOwnProperty("fired")&&f[h].fired!==!1||(g(f[h],o[a]),e.dispatchEvent([f[h]]),d.push(f[h]),b.log("Callback: "+JSON.stringify(f[h]),b.logLevel.debug,"event"),"notify"===f[h].event&&(b.log("adTracked",b.logLevel.debug,"event"),c.push("adTracked")));return{callbackEvents:c,firedCallbacks:d}}function k(a){if(n&&a&&"undefined"!=typeof a.callbackKey)switch(a.callbackKey){case"videoEnded":h(a.videoDuration);break;case"rewardCallback":i(m());break;default:i(a.callbackKey)}}function l(){n=c.callbacksData||{}}function m(){if(!n)return!1;for(var a in n)for(var b=n[a],c=0;c<b.length;c++)if("notify"===b[c].event)return a}var n,o={click:!0};return l(),{fireCallback:k}}function h(a){return b.log("callbacks list on initiation"+JSON.stringify(a.callbacks),b.logLevel.debug),new g({callbacksData:a.callbacks,replaceAllConstPlaceholders:d.replaceAllConstPlaceholders})}return{init:h}}])}(),function(){var a=angular.module("AdUnit");a.factory("AdUnitMappingService",["CLOSE_BUTTON_STATES","FRAMES_MAP","END_CARD_FRMAES",function(a,b,c){var d={},e={firstFrame:"IncentVideoFrame",replayFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"FullScreenEndCardFrame",showPrivacyLink:!0,closeAction:a.confirm},FullScreenEndCardFrame:{name:"FullScreenEndCardFrame",componentName:"ssa-full-screen-end-card",showPrivacyLink:!1,closeAction:a.close}}},f={firstFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",showPrivacyLink:!0,closeAction:a.confirm}}},g={firstFrame:"EMVFrame",frames:{EMVFrame:{name:"EMVFrame",componentName:"ssa-emv-layout",showPrivacyLink:!0,closeAction:a.close}}},h={firstFrame:"videoTypeFrame",frames:{videoTypeFrame:{mraid:{name:"MraidAdContainerFrame",componentName:"ssa-mraid-ad-container",showPrivacyLink:!0,closeAction:a.confirm},html:{name:"IncentVideoFrame",componentName:"ssa-incent-video",showPrivacyLink:!0,closeAction:a.confirm},htmlURL:this.html,"default":function(){return this.html}}}},i={firstFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"IncentBrandedActionFrame",showPrivacyLink:!0,closeAction:a.confirm},IncentBrandedActionFrame:{name:"IncentBrandedActionFrame",componentName:"ssa-incent-branded-action",showPrivacyLink:!1,closeAction:a.close}}},j={firstFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"IncentBrandedActionFrame",showPrivacyLink:!0,closeAction:a.confirm},IncentBrandedActionFrame:{name:"IncentBrandedActionFrame",componentName:"ssa-incent-branded-action",showPrivacyLink:!1,closeAction:a.close}}},k={firstFrame:"IncentVideoFrame",replayFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"CarouselFrame",showPrivacyLink:!0,closeAction:a.confirm},CarouselFrame:{name:"CarouselFrame",componentName:"ssa-carousel-end-card",showPrivacyLink:!1,closeAction:a.close}}},l={firstFrame:"IncentVideoFrame",replayFrame:"IncentVideoFrame",frames:{IncentVideoFrame:{name:"IncentVideoFrame",componentName:"ssa-incent-video",next:"CustomAdContainerFrame",showPrivacyLink:!0,closeAction:a.confirm},CustomAdContainerFrame:{name:"CustomAdContainerFrame",componentName:"ssa-custom-ad-container",showPrivacyLink:!1,closeAction:a.close}}},m={firstFrame:"CarouselFrame",frames:{CarouselFrame:{name:"CarouselFrame",componentName:"ssa-carousel-end-card",showPrivacyLink:!0,closeAction:a.close}}},n={firstFrame:"FullScreenEndCardFrame",frames:{FullScreenEndCardFrame:{name:"FullScreenEndCardFrame",componentName:"ssa-full-screen-end-card",showPrivacyLink:!0,closeAction:a.close}}},o={firstFrame:"MraidAdContainerFrame",frames:{MraidAdContainerFrame:{name:"MraidAdContainerFrame",componentName:"ssa-mraid-ad-container",showPrivacyLink:!0,closeAction:a.confirm}}},p={firstFrame:"BannerInstallWithIconFrame",frames:{BannerInstallWithIconFrame:{name:"BannerInstallWithIconFrame",componentName:"ssa-banner-install-default",showPrivacyLink:!0,closeAction:a.none}}},q={incentVideo:{0:f},playableAd:{0:h},incentBrandedVideo:{0:i},CPVX:{0:j},CPVI:{0:k,3:e,31:e,32:e,34:e,35:e,6:g,61:g,62:g,64:g,65:g},imageInterstitial:{1:m,2:n,3:n},MRAID:{0:o},customEndCard:{0:l},staticBannerToExpanded:{0:p},staticBanner:{0:p}};return d.getAdUnitMapping=function(a){return a&&q.hasOwnProperty(a)?q[a]:q},d.getFlowByTemplate=function(a,b){var c=d.getAdUnitMapping(a);return c.hasOwnProperty(b)?c[b]:c[0]},d.getFrameNameForEventsByFrameName=function(a){switch(a){case b.FullScreenEndCardFrame:return c.fullScreen;case b.CarouselFrame:return c.carousel;case b.CustomAdContainerFrame:return c.custom;default:return""}},d}])}(),function(){var a=angular.module("AdUnit");a.factory("adUnitObfuscationService",["$q","MSG_Service","$rootScope",function(a,b,c){var d,e,f={iframe:"#adSandbox",url:"",html:"",template:'<iframe class="obfuscationIframe" src="{{url}}" frameborder="0" scrolling="no"></iframe>',disabled:!1},g={},h=function(){};return{init:function(a){if(e=this,g=angular.extend(f,a),!g.disabled&&""!==g.html){b.init(),h();var c=g.template.replace("{{url}}",g.url);d=angular.element(c)}},getIframeWithLoadedUrl:function(a){return d=angular.element(f.template.replace("{{url}}",a)),d&&d},getObfuscationIframe:function(){return d},inject:function(a){var c=g.html,e={html:c,style:"height:100%;"};angular.extend(e,a),b.postMessage("$$JSON:"+JSON.stringify(e),"*",d[0].contentWindow)}}}])}(),function(){var a=angular.module("AdUnit");a.factory("AdUnitDelivery",["$window","$rootScope","$q","adapter","$injector",function(a,b,c,d,e){function f(){return i?i:i=e.get("AdUnitModulesISAndRV")}function g(){if(null===h){var d=b.$on("AdUnitDelivery.resetCache",function(){h=null,d()}),e=c.defer();h=e.promise,a.db?(f().init(a.db),e.resolve(a.db)):j().then(function(b){window.ssa.getConfigHelperObj=b,a.db=b,f().init(b),e.resolve(b)})}return h}var h=null,i=null,j=function(){var a=c.defer();return d.call({method:"GetConfig",arguments:{},callback:function(b){a.resolve(b)}}),a.promise};return{service:f,getConfig:g}}]),a.factory("AdUnitModulesISAndRV",["$window","$rootScope","$q","SSA_Utils","WEBVIEW_TYPES",function(a,b,c,d,e){var f={};return f.init=function(a){this.db=a,this.validateJSONInput(),this.db.ext.position=this.getSessionDepth()},f.getPreLoad=function(){return!this.db.settings||"undefined"==typeof this.db.settings.preload||this.db.settings.preload},f.getAppInstallData=function(){return this.db.ext.appData},f.getRequestOpportunityData=function(){var a={};return this.db.ext.opportunityID&&(a.opportunityId=this.db.ext.opportunityID),this.db.settings.requestID&&(a.requestId=this.db.settings.requestID),a},f.getPostActionsData=function(){return this.db.ext.clickTags},f.getAdType=function(){return this.db.ext.type},f.getUrlsToWarmup=function(){var a=angular.copy(f.getPostActionsData());return a&&this.db.settings.warmupUrlsNew&&a.pixelURL&&a.clickURL&&delete a.clickURL,a},f.getVideoData=function(){return this.db.ext.videoData},f.getTimerData=function(){return this.db.ext.counterData},f.getAdUnitCallbacks=function(){return this.db.ext.callbacks},f.getProperties=function(){return{sdkv:this.db.sdkv,preCache:this.db.settings.precache,os:this.db.os,osv:this.db.osv,apilvl:this.db.apilvl,mraid:this.db.mraid,enableBackButton:!0,logo:!0,isLogoEnabled:this.db.ext.enableLogo||!1,webviewType:this.db.webviewType}},f.getIsBackButtonEnabled=function(){var a=this.getProperties();return!(a.hasOwnProperty("enableBackButton")&&a.enableBackButton===!1)},f.isExternallyTracked=function(){return"true"===this.db.ext.externallyTracked||this.db.ext.externallyTracked===!0},f.getAdUnitType=function(){return this.db.ext.type},f.getCRID=function(){return this.db.crid},f.getInventoryId=function(){return this.db.inventoryId?this.db.inventoryId:"0"},f.getCreativeId=function(){return this.db.creativeId?this.db.creativeId:"0"},f.getCombinedBannerAndCreativeId=function(){return this.getCRID()+"_"+this.getCreativeId()},f.getCID=function(){return this.db.cid},f.getProductType=function(){return this&&this.db&&this.db.productType},f.getDemandSourceName=function(){return this.db.demandSourceName},f.getAdViewId=function(){return this.db.adViewId||""},f.getSessionDepth=function(){return this&&this.db&&this.db.settings&&this.db.settings.sessionDepth||-1},f.getForkingDelay=function(){return this.db.settings.forkingDelay||200},f.getIsSafeClick=function(){return null===this.db.settings.safeClick||!angular.isDefined(this.db.settings.safeClick)||this.db.settings.safeClick},f.getLandingId=function(){var a=0;return db.settings&&db.settings.landingId&&(a=parseInt(db.settings.landingId)),a},f.getTemplateId=function(){var a=0;return this&&this.db&&this.db.ext&&this.db.ext.templateid&&(a=parseInt(this.db.ext.templateid)),a},f.getInputValidation=function(){return this.validation},f.validateJSONInput=function(){var a={type:"object",properties:{properties:{properties:{sdkVersion:{type:"string"},preCache:{type:"string"},os:{type:"string"},osVersion:{type:"string"},enableBackButton:{type:"boolean"}},required:["sdkVersion","preCache","os","osVersion"]},adUnit:{properties:{properties:{properties:{productType:{"enum":["BrandConnect"]},adUnitType:{"enum":["incentBrandedVideo","CPVI","videoIS","picIS","incentVideo","carouselIS","videoIS","picIS"]},adUnitABTest:{type:"integer"},campaignId:{type:"integer"},bannerId:{type:"integer"},externallyTracked:{"enum":["true","false"]},debugMode:{"enum":["true","false"]}},required:["productType","adUnitType","adUnitABTest","campaignId","bannerId","externallyTracked"]},assets:{properties:{counterData:{properties:{completionCountdown:{type:"integer"},timeUntilTimer:{type:"integer"},showTimer:{"enum":["true","false"]},percentage:{type:"boolean"}},required:["completionCountdown","timeUntilTimer","showTimer"],type:["object","null"]},notificationsData:{properties:{textColor:{type:"string"},duringData:{type:"string"},afterData:{type:"string"}},required:["duringData","afterData","textColor"],type:["object","null"]},clickTags:{properties:{index:{type:"integer"},clickURL:{type:"string"},backgroundPortrait:{type:["string","null"]},backgroundLandscape:{type:["string","null"]}},type:["object","null"]},appData:{properties:{appImaged:{}},type:["object","null"]},videoData:{properties:{autoPlay:{"enum":["true","false"]},videoType:{"enum":["ssa-internal-video-player","ssa-external-video-player"]},videoTime:{type:"string"},videoSource:{properties:{html:{type:["string","null"]},videoformat_mp4:{type:["string","null"]},vast:{type:["string","null"]}}}},required:["videoType","videoSource","videoTime"],type:["object","null"]}}},callbacks:{properties:{}}},required:["properties","assets"]}},required:["properties","adUnit"]};this.validation=tv4.validateResult(this.db,a),this.validation.valid=!0},f.isUnrulyCarousel=function(){return"undefined"!=typeof this.db.ext.unrulyCarousel&&null!==this.db.ext.unrulyCarousel},f.getUnrulyData=function(){return this.db.ext.unrulyCarousel},f.updateDBObj=function(c){a.db=this.db=c,b.$broadcast("AdUnitDelivery.resetCache")},f.getProtocol=function(){var a=this.db.settings.protocol;return a&&""!==a||(a="http:"),a},f.isSecuredProtocol=function(){return"https:"===this.getProtocol()},f.getDBObj=function(){return a.db},f.getSettings=function(){return this.getDBObj().settings},f.isSeamless=function(){return this.db.settings.isSeamless},f.isMoatEnabled=function(){return!!this.db.settings.moatEnabled},f.getMoatData=function(){return this.db.settings.moatData},f.getOSVersion=d.getOSVersion,f.isRingerMutedOnStart=function(){return this.db.settings.ringerMuteOnStart===!0},f.getQualityClick=function(){return this.db.ext&&this.db.ext.qc||{}},f}]),a.factory("ssaExternalParams",["$location",function(a){function b(){e||a.search()===[]||(e=a.search())}function c(a){if(e)return e[a]}function d(){return e||[]}var e;return{retrieveParamsFromUrl:b,getParamByName:c,getParams:d}}]),a.factory("$exceptionHandler",["$injector","GENERAL_EVENTS",function(a,b){return function(c,d){var e=a.get("analytics");e&&e.trackEvent(b.adUnitException,{generalmessage:c.message},{rvnomoreoffersreason:c.stack});var f=a.get("$rootScope");throw f&&f.$broadcast("AdUnit.error",{event:"AdError",errMsg:c.message,errCause:d,type:"unhandledException"}),c}}])}(),function(){var a=angular.module("AdUnit");a.factory("adUnitTrackingService",["$rootScope","LogService","analytics","VIDEO_EVENTS","IS_ANALYTICS_CATEGORIES","productSettingsService",function(a,b,c,d,e,f){var g,h,i={externalTracking:{useVideoDuration:!1}},j={},k=function(b,c){var d,e,h,i;d=a.$on("AdvertiserTracking.ExternallyTracked",function(a,b){c!=b.id&&c!=f.getCombinedIdWithBannerId(b.bannerId)||g.externallyTracked(b)}),e=a.$on("TimerUI.Completed",function(a,b){g.userCompletionNotification(b)}),h=a.$on("Video.Ended",function(a,c){g.adVideoEnded(c,b)}),i=a.$on("AdUnitTracking.FinishTracking",function(a,b){c===b&&(d(),e(),h(),i())})};return{startTracking:function(a,b){j={},g=this,j=angular.extend(j,i),h={externalTrackingReceived:!1,durationReached:!1,userNotificationFired:!1,adTracked:!1},k(a,b)},userCompletionNotification:function(){h.userNotificationFired===!1&&(b.log("AdUnit.userCompletionNotification",b.logLevel.trace),h.userNotificationFired=!0,a.$broadcast("AdUnit.userCompletionNotification",""))},adVideoEnded:function(a,b){(h.durationReached===!1||a.isReplayVideo)&&(h.userNotificationFired===!1&&(b===!1||b===!0&&h.externalTrackingReceived===!0&&j.externalTracking.useVideoDuration===!0)&&g.userCompletionNotification(),h.durationReached=!0)},externallyTracked:function(b){if(b.useVideoDuration&&(j.externalTracking.useVideoDuration=!0),h.externalTrackingReceived=!0,h.adTracked||(a.$broadcast("AdUnit.adTracked",""),h.adTracked=!0,c.trackTimingStop(d.videoExternallyTracked,{eNameStart:e.timeFromStartedToCompleted})),h.durationReached===!1)if(b.useVideoDuration){var f=b.trackedOnPlay;a.$broadcast("AdUnit.StartTimer",{restartTimer:f})}else g.userCompletionNotification();else g.userCompletionNotification()}}}])}(),function(){var a=angular.module("AdUnit");a.factory("AdvertiserTrackingService",["PusherProviderService","$rootScope",function(a,b){var c,d={externallyTracked:"true",trackingProvider:"Pusher"},e={},f={Pusher:a};return{init:function(a){try{e=angular.extend(d,a),c=f[e.trackingProvider],c.init(e.trackingData)}catch(b){}},connect:function(){try{c.connect()}catch(a){}},getServiceUrl:function(a){return c.getServiceUrl(a)}}}])}(),function(){angular.module("AdUnit").factory("analytics",["adapter",function(a){function b(a){var b=99,c=Math.round((a.o+a.b)/b/10);return c>b?b:c}function c(a,b,c){return b=2!==b.toString().length?"0"+b:b,a.slice(0,-3)+c+b}var d={};d.trackEvent=function(b,c,d){if(b){var e={eName:b,label:c,data:d};a.call({method:"Analytics",arguments:{action:"fireEvent",eventParam:e}})}},d.trackTimingStart=function(b,c){if(b){c=c||(new Date).getTime();var d={eName:b,data:c};a.call({method:"Analytics",arguments:{action:"startTiming",eventParam:d}})}},d.trackTimingStop=function(b,c){if(b){c=c||{},c.timeStamp=c.timeStamp||(new Date).getTime();var d={eName:b,data:c};a.call({method:"Analytics",arguments:{action:"stopTiming",eventParam:d}})}};var e=function(b,c){if(c&&b){var d={data:c};a.call({method:"Analytics",arguments:{action:b,eventParam:d}})}};return d.setCustomData=function(a){e("setCustomData",a)},d.unsetCustomData=function(a){e("unsetCustomData",a)},d.getUUID=function(a,d){if(a){a.x=a.x?a.x:"0,0";for(var e=Math.min(Math.max(parseInt(a.x.split(",")[0],10),-1),100),f=Math.min(Math.max(parseInt(a.x.split(",")[1],10),-1),100),g=d.toString().length,h=g-8,i=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(a){return(a^crypto.getRandomValues(new Uint8Array(1))[0]&g-2>>a/(h-1)).toString(16)}),j=h,k=i.slice(-2),l=(Math.floor(1e5*Math.random())+1)*(g-4),m=0;l;)m+=l%10,l=Math.floor(l/10);m=Math.round((m%10+Math.floor(m/10))*(100*Math.E))+(Math.max(e,f)-Math.min(e,f));var n=Math.round(m*(g-6)/10);return a&&a.o>n&&a.b>m&&a.c<h?k=b(a):j=i[2]!==j?i[2]:j+1,c(i,k,j)}},d}])}(),function(){var a=angular.module("AdUnit");a.factory("androidOpenStoreService",["$rootScope","$timeout","adapter","productSettingsService","analytics","RV_ANALYTICS_CATEGORIES","LogService",function(a,b,c,d,e,f,g){function h(a){return d.shouldClickToStoreWithReferrer()?i(a):j(a)}function i(a){var b=a.split("?")[1];return void 0!==b&&k("id",a)?"market://details?"+b:(g.log("androidOpenStoreService | failedToReplaceStoreUrl | "+a,g.logLevel.trace),null)}function j(a){var b=k("id",a);return a&&a.indexOf("details?")!==-1&&b?"market://details?id="+b:(g.log("androidOpenStoreService | failedToReplaceStoreUrl | "+a,g.logLevel.trace),null)}function k(a,b){if(!b)return null;a=a.replace(/[\[\]]/g,"\\$&");var c=new RegExp("[?&]"+a+"(=([^&#]*)|&|#|$)"),d=c.exec(b);return d?d[2]?decodeURIComponent(d[2].replace(/\+/g," ")):"":null}return{convertGooglePlayToMarketUrl:h}}])}(),function(){var a=angular.module("AdUnit");a.factory("appStateHelper",function(){function a(a){return a&&a.active}function b(a){return a&&"interrupt"===a.action}function c(a){return a&&a.isViewable}function d(a){f=a}function e(){return f}var f;return{isInForeground:a,isInBackground:b,isVisible:c,setEnteredBackground:d,isEnteredBackground:e}})}(),function(){function a(a){var b="",c=0;return a&&""!==a&&(b=a.split("/"),b.length>0&&(c=b.length-1)),b[c]||""}function b(b,c,d,e,f){function g(){var a=c.getSettings().urltocdn;return a&&""!==a?a:z}function h(){return c.isPreCache()?y:m()}function i(){var a;return b&&b.ssa&&b.ssa.assetsConfig?a=b.ssa.assetsConfig:d.trackEvent(e.emptySSAWindow,{generalMessage:JSON.stringify(b.ssa)}),a}function j(){return g()+v}function k(){return c.isPreCache()&&c.getSettings().ableToCache}function l(){return k()?f.libs:g()+w}function m(){return g()+x}function n(){var a=g(),b=a.substr(a.indexOf("://")+3);return b+x}function o(){return h()+a(i().assets.transparent)}function p(){return l()+i().external.obfuscation}function q(){return j()+i().unruly.unrulyObfuscation}function r(){return m()+i().mraid.script}function s(){return k()?f.libs+A:m()+B}function t(){return m()+D}var u="/adunit/dist",v=u+"/assets/obfuscators/",w=u+"/assets/obfuscators/externalObfuscation/1.0.0/",x=u+"/assets/",y=f.graphicAssets,z="https://networksdk.ssacdn.com",A="externalAPI.js",B="externalAPI/1.0.5/"+A,C="customIntermediateTemplate.html",D="customIntermediateTemplate/1.0.2/"+C;return{getTransparent:o,getObfuscation:p,getUnrulyObfuscation:q,getMraidScript:r,getAssetsPath:m,getUrlToCdn:g,getAssetPathWithoutProtocol:n,getExternalAPIScript:s,getCustomIntermediateTemplate:t}}b.$inject=["$window","productSettingsService","analytics","GENERAL_EVENTS","CACHE_FOLDERS_PATHS"];var c=angular.module("AdUnit");c.factory("assetsService",b)}(),function(){function a(){function a(a){e=a,c()}function b(){document.body.removeEventListener("touchstart",d,!0)}function c(){e.shouldExtractXYCoordinates()&&document.body.addEventListener("touchstart",d,!0)}function d(a){e.resetCoordinates(),a&&a.touches&&a.touches[0]&&a.touches[0].screenX&&a.touches[0].screenY&&e.setCoordinates(a.touches[0].screenX,a.touches[0].screenY)}var e;return{init:a,detachClickListener:b,attachClickListener:c}}var b=angular.module("AdUnit");b.factory("clickService",a)}(),function(){var a=angular.module("AdUnit");a.factory("clickWrapperService",["$rootScope","productSettingsService","analytics","OPERATING_SYSTEMS","PRODUCT_TYPES","CLICK_WRAPPER_EVENTS","clickService",function(a,b,c,d,e,f,g){function h(){return b.isClickWrapperEnabled()&&b.getOS()===d.ios&&[e.RewardedVideo,e.Interstitial].indexOf(b.getProductType())!==-1}function i(b){c.trackTimingStart(f.clickWrapperOpened),c.trackEvent(f.clickWrapperOpened),a.$broadcast("showClickWrapperElements"),t=b,g.detachClickListener()}function j(b,d,e){var h={eNameStart:f.clickWrapperOpened};angular.extend(h,{generalMessage:b,callfailreason:d,emptyowreason:e}),c.trackTimingStop(f.clickWrapperClosed,h),a.$broadcast("hideClickWrapperElements"),t=null,g.attachClickListener()}function k(){var a=angular.element(document.querySelector("#clickWrapper"))[0];return!a.classList.contains("displayNone")}function l(){angular.isFunction(t)&&(c.trackTimingStop(f.clickWrapperClicked,{eNameStart:f.clickWrapperOpened}),t())}function m(){var a=parseInt(b.showWrapperForXSec());return isNaN(a)?0:a}function n(){return b.shouldEnableClickableAdWithWrapper()}function o(){return b.shouldEnableFullWrapperClickable()}function p(){return b.shouldBackgroundClickCloseWrapper()}function q(){return b.shouldFireClickOnOpeningClickWrapper()}function r(){return b.shouldEnableXWhenWrapperOpen()}function s(){return m()>0}var t;return{shouldShowClickWrapper:h,showClickWrapper:i,hideClickWrapper:j,isClickWrapperVisible:k,handleAcceptClick:l,getShowWrapperForXSec:m,shouldEnableClickableAdWithWrapper:n,shouldEnableFullWrapperClickable:o,shouldBackgroundClickCloseWrapper:p,shouldFireClickOnOpeningClickWrapper:q,shouldEnableXWhenWrapperOpen:r,isTimerEnabled:s}}])}(),function(){var a=angular.module("services.ssaCloseButton",[]);a.constant("CLOSE_BUTTON_EVENTS",{setCloseButtonState:"setCloseButtonState",adClose:"AdClose",
closeButtonClicked:"closeButtonClicked"}),a.factory("closeButtonService",["CLOSE_BUTTON_STATES","CLOSE_BUTTON_EVENTS","X_BUTTON_ACTIONS","CLOSE_BUTTON_STYLES","adapter",function(a,b,c,d,e){function f(a){return a===c.showNext||a===c.moveToEndCard}function g(a){return a===c.hide||a===c.buttonHidden}function h(b,d,e,h){var i;return i=d===c.confirmNext?b&&h?a.nextFrame:a.confirmNextFrame:f(d)?a.nextFrame:g(d)?a.ignore:d===c.buttonClose?a.close:d===c.openConfirmDialog?b?a.nextFrame:a.confirm:b?a.nextFrame:e}function i(b){var d;return d=f(b)||b===c.confirmNext?a.nextFrame:a.close}function j(a){e.call({method:b.setCloseButtonState,arguments:{state:a}})}function k(a){e.call({method:b.adClose,arguments:a||{}})}function l(a,b){var c={};a&&(c.isEnable=a),b&&(c.position=b),e.call({method:"SetForceClose",arguments:c})}function m(a,b){return a.closeAction===c.moveToEndCard&&b}function n(a){o(a),a.allowBackButton=!1,a.isSkipButtonFlow=!0}function o(a){a["class"]=d.skipButton}return{notifyCloseClick:k,setAdapterCloseState:j,getCloseActionForFirstFrame:h,getCloseActionPostUserCompletionNotification:i,setForceClose:l,shouldSetSkipButtonFlow:m,setSkipButtonFlow:n,setSkipButtonClass:o}}])}(),function(){var a=angular.module("AdUnit");a.factory("LogService",["$window","adapter",function(a,b){var c={debugLevel:1};return{logLevel:{none:0,error:1,debug:2,trace:3},log:function(a,d,e){if(0!==c.debugLevel){var f={origin:"AdUnit",event:"log",debugLevel:d,msg:encodeURI(a)};b.call({method:f.event,arguments:f})}}}}]),a.factory("MSG_Hash_Service",["$location","$interval",function(a,b){var c,d=1;return{postMessage:function(a,b,c){b&&(c=c||parent,c.location=b.replace(/#.*$/,"")+"#"+ +new Date+d++ +"&"+a)},receiveMessage:function(d,e){c&&b.cancel(c),c=null,d&&(c=b(function(){var b=a.hash;""!==b&&"#"!==b&&(a.hash="#",d({data:b}))},500))}}}]),a.factory("MSG_Generic_Service",["$window",function(a){var b;return{postMessage:function(a,b,c){b&&(c=c||parent,c.postMessage(a,b.replace(/([^:]+:\/\/[^\/]+).*/,"$1")))},receiveMessage:function(c,d){c&&(b=function(a){return!("string"==typeof d&&a.origin!==d||"[object Function]"===Object.prototype.toString.call(d)&&d(a.origin)===!1)&&void c(a)}),a.addEventListener?a[c?"addEventListener":"removeEventListener"]("message",b,!1):a[c?"attachEvent":"detachEvent"]("onmessage",b)}}}]),a.factory("MSG_Service",["MSG_Generic_Service","MSG_Hash_Service","$window",function(a,b,c){var d=null;return{init:function(){return d||(d=c.postMessage?a:b),this},postMessage:function(a,b,c){"undefined"!=typeof d&&null!==d&&d.postMessage(a,b,c)},setEngine:function(a){return"undefined"!=typeof this[a]&&(d=this[a]),this}}}]),a.factory("Date_Utils",function(){function a(){return(new Date).getTime()}function b(a){return Math.floor(36e5*a)}function c(a){return Math.floor(a/24)}function d(a){return Math.floor(a/36e5)}return{getCurrentUTCTimeInMills:a,hoursToMilliSeconds:b,milliSecondsToHours:d,hoursToDays:c}}),a.factory("SSA_Utils",["$window","$rootScope","$timeout","DOMAIN_OPTIONS","ENV_OPTIONS","ORIENTATIONS","LogService","analytics","DEBOUNCE_CLICK_EVENT","EXTERNAL_AD_VIEW_PRODUCTS","adapter",function(a,b,c,d,e,f,g,h,i,j,k){function l(){var a,b=document.domain;switch(b){case d.production:a=e.production;break;case d.develop:a=e.develop;break;default:a=e.stage}return a}function m(){V=b.$on("AdController.ringerSwitchState",function(a,b){$=b.isRingerSwitchSilent;for(var c=0;c<_.length;c++)_[c](a,b)})}function n(){return $}function o(a){$=!!a}function p(a){angular.isFunction(a)&&_.push(a)}function q(){_=[]}function r(){angular.isFunction(V)&&V()}function s(){W=b.$on("AdController.adVisible",t)}function t(a,b){if(A())y();else{X=!0,W();var c=Z.length;if(c>0)for(var d=0;d<c;d++)Z[0](a,b),Z.splice(0,1)}}function u(a){return a&&a.isViewVisible}function v(a){var b=u(a);Y&&"function"==typeof Y&&b&&Y()}function w(){return X}function x(a){angular.isFunction(a)&&(A()?Y=a:Z.push(a))}function y(){k.call({method:"handleGetViewVisibility",arguments:{},callback:v})}function z(a){w()?a():x(a)}function A(){return j.externalAdViewProductTypeArray.indexOf(b.productType)!==-1}function B(a){angular.isFunction(a)&&z(a)}function C(){A()&&(Y=null)}function D(){var b=a.navigator.userAgent.toLowerCase(),c=b.match(/android\s([0-9\.]*)/);if(c&&c[1])return c[1]}function E(){var a=D();if(a)return parseInt(a.split(".")[0],10)}function F(){var a=D();if(a)return parseInt(a.split(".")[1],10)}function G(){var b=a.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return parseInt(b&&b[1],10)}function H(){return/iP(hone|od|ad)/.test(a.navigator.platform)?"ios":"android"}function I(){var a="ios"===H()?G():E();return isNaN(a)?null:a}function J(a,b,d){var e=!1;return 0==b?a:function(){g.log("DEBOUNCE_TEST trying to click",g.logLevel.trace),e?h.trackEvent(i,{generalMessage:b}):(e=!0,a.apply(d,arguments),c(function(){g.log("DEBOUNCE_TEST getDebounceFunction in timeout",g.logLevel.trace),e=!1},b))}}function K(){return a.innerWidth}function L(){return a.innerHeight}function M(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth;return e}function N(){return K()>L()?f.LANDSCAPE:f.PORTRAIT}function O(a,b,c){var d=P(b);a&&c[a]&&angular.isFunction(c[a])&&c[a](d)}function P(a){return a?a.arguments?a.arguments:a:{}}function Q(a,b){return a>b?f.PORTRAIT:f.LANDSCAPE}function R(a){return!!(a&&"object"==typeof a&&Object.keys(a).length>0)}function S(a){return angular.element(document.querySelector(a))}function T(a,b){S(a).addClass(b)}var U,V,W,X,Y,Z=[],$=!1,_=[];return{getParamsAsObject:function(a){for(var b=a.split("&"),c={},d=0;b.length>d;d++){var e=b[d].split("=");c[e[0]]=e[1]}return c},getHDUrl:function(b){var c=b&&b.url||b;U||(U=a.devicePixelRatio||1);var d=null;return 3===U?b.hdMultiplicationFactor3?d=".@X3":b.hdMultiplicationFactor2&&(d=".@X2"):2===U&&b.hdMultiplicationFactor2&&(d=".@X2"),null!==d&&(c=c.slice(0,c.lastIndexOf("."))+d+c.slice(c.lastIndexOf("."))),c},getEnv:l,getAndroidVersion:D,getMajorAndroidVersion:E,getMinorAndroidVersion:F,_getiOSversion:G,getInnerWidth:K,getInnerHeight:L,getWindowOrientation:N,invokeSafeCB:O,getOSType:H,getOSVersion:I,isAdUnitVisible:w,callOnVisible:B,removeOnVisibleListener:C,addHandlerToAdVisible:x,initListenToAdVisible:s,bindListenerToRingerStatusEvent:m,isRingerSwitchOn:n,addHandlerToRingerSwitch:p,clearRingerSwitchCallbacks:q,destroyRingerListener:r,getDebounceFunction:J,setDefaultRingerSwitchOn:o,getScreenWidth:M,getElementOrientation:Q,isObjectAndNotEmpty:R,getHTMLElement:S,addClassToHTMLElement:T}}])}(),function(){var a=angular.module("communicationModule",[]);a.factory("adapter",["$rootScope","messageHandler",function(a,b){function c(){return+new Date+""+Math.random()}function d(a){if(!angular.isObject(a))return!1;if(!angular.isString(a.method)||!a.method.length)return!1;if(!angular.isObject(a.arguments))return!1;var d=c();if(a.callback){if(!angular.isFunction(a.callback))return!1;h[d]=a.callback}var e={id:d,method:a.method,arguments:a.arguments},f=b.sendMessage(e);return f}function e(a){if(!angular.isObject(a))return!1;window.ssa.fireCallbackObj=h[a.id];var b=h[a.id];delete h[a.id],angular.isFunction(b)&&b(a.data)}function f(b){if(!angular.isObject(b))return!1;if(!angular.isString(b.name)||!b.name.length)return!1;var c=b.name;delete b.name,a.$broadcast("AdController."+c,b)}function g(){b.onMessageReceived(function(a){window.ssa.didSendEvent=-1,a.id?(window.ssa.onMessageReceivedObj=a,e(a)):f(a)})}var h={};return g(),{call:d}}])}(),function(){var a=angular.module("communicationModule");a.factory("controllerMessageHandler",["$window","$location",function(a,b){function c(a){return a.arguments.iframeId=j,a.arguments.productType=k,a.arguments.demandSourceName=m,a.arguments.adType=l,a}function d(b){try{var d=JSON.stringify(c(b))}catch(e){return!1}return a.parent.postMessage(d,"*"),!0}function e(a){var b;if(!a.data)return!1;try{b=JSON.parse(a.data)}catch(c){b=f(a.data),b||(b={name:a.data})}i(b)}function f(a){var b="$$",c=null,d=a.indexOf(b);if(d!==-1){var e=event.data.slice(0,d),f=event.data.slice(d+b.length);c={name:e,params:f}}return c}function g(b){return i=b,a.addEventListener("message",e,!1),!0}function h(){var a=b.search().productType,c=b.search().demandSourceName;a&&(j=k=l=a),c&&(m=c)}var i,j,k,l,m;return h(),{sendMessage:d,onMessageReceived:g}}])}(),function(){var a=angular.module("communicationModule");a.factory("internalMessageHandler",["$q","$window","$location","$timeout",function(a,b,c,d){function e(a){return a.arguments.iframeId=l,a.arguments.productType=m,a.arguments.adType=n,a}function f(b){if(!b||"function"!=typeof b.then)return!1;var c=String(a.defer().promise.then),d=String(b.then);return c===d}function g(a){if(a&&a.method&&o[a.method]){var c=o[a.method],g=a.id,h=c(a.arguments);f(h)&&h.then(function(a){d(function(){k({data:a,id:g})},0)})}else{try{var i=JSON.stringify(e(a))}catch(j){return!1}b.parent.postMessage(i,"*")}return!0}function h(a){try{var b=JSON.parse(a.data)}catch(c){return!1}k(b)}function i(a){return k=a,b.addEventListener("message",h,!1),!0}function j(){var a=c.search().productType;a&&(l=m=n=a)}var k,l,m,n,o={};return j(),{sendMessage:g,onMessageReceived:i}}])}(),function(){var a=angular.module("communicationModule");a.factory("messageHandler",["$location","controllerMessageHandler","internalMessageHandler","nativeMessageHandler",function(a,b,c,d){function e(){var b=a.search().mode?a.search().mode:"default";k=l[b],k||(k=l["default"])}function f(a){return!!angular.isObject(a)&&(!(!angular.isString(a.method)||!a.method.length)&&(!!angular.isObject(a.arguments)&&(!!angular.isString(a.id)&&(!!angular.isDefined(k)&&(k.sendMessage(a),!0)))))}function g(a){j&&j(a)}function h(a){return!(!a||!angular.isFunction(a))&&(j=a,k.onMessageReceived(g))}function i(){e()}var j,k=void 0,l={msdkctrl:b,internal:c,"default":b,"native":d};return i(),{sendMessage:f,onMessageReceived:h}}])}(),function(){var a=angular.module("communicationModule");a.factory("nativeMessageHandler",["$window","$location",function(a,b){function c(a){return a.arguments.iframeId=k,a.arguments.productType=l,a.arguments.demandSourceName=n,a.arguments.adType=m,a.arguments.viewType=o,a.adViewId=p,a}function d(b){var c;return c=b&&"string"==typeof b?"ios"===b.toLowerCase():/iP(hone|od|ad)/.test(a.navigator.platform)||"MacIntel"===a.navigator.platform&&a.navigator.maxTouchPoints>1,c?"ios":"android"}function e(a){try{var b=JSON.stringify(c(a))}catch(d){return!1}return q(b),!0}function f(a){j(a)}function g(a){return j=a,window.ssa.onMessageReceived=f,!0}function h(a){"ios"===d(a)?window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.containerMsgHandler&&"function"==typeof window.webkit.messageHandlers.containerMsgHandler.postMessage&&(q=function(a){window.webkit.messageHandlers.containerMsgHandler.postMessage(a)}):"android"===d(a)&&"undefined"!=typeof containerMsgHandler&&"function"==typeof containerMsgHandler.receiveMessageFromExternal&&(q=function(a){containerMsgHandler.receiveMessageFromExternal(a)})}function i(){var a,c,d;a=b.search().productType,c=b.search().demandSourceName,o=b.search().viewType,p=b.search().adViewId,d=b.search().deviceOs,h(d),a&&(k=l=m=a),c&&(n=c)}var j,k,l,m,n,o,p,q=function(){};return i(),{sendMessage:e,onMessageReceived:g}}])}(),function(){var a=angular.module("creativeModule",["models.video","models.timer","models.appInstall","models.postAction","models.notifications","models.social","models.closeButton","models.mute","models.uxTemplate","models.image","models.tracking","models.frameLayout","models.features","models.flow","models.hybrid","featuresModule","models.measurement","models.SKAN","models.simpleOverlayEndCard","adUnitBaseProduct"]);a.factory("creativeService",["$window","$q","baseProduct","video","closeButton","mute","timer","social","postAction","appInstall","uxTemplate","adUnitCallbacksService","fillRateTrackingService","image","tracking","frameLayout","features","flow","hybrid","measurement","productSettingsService","featuresService","SKANModel","simpleOverlayEndCardModel",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){function y(a,b){a&&b&&(J[z(a)]=b)}function z(a){return"creative"+a}function A(a){function b(a,b,c){return u[a]||(u[a]=b.init(c)),u[a]}var c,u={};return c=a.ext,{getType:function(){return c.type},getVideoModel:b.bind(null,"video",d,c),getCloseButtonModel:b.bind(null,"closeButton",e,c),getMuteModel:b.bind(null,"mute",f,c),getTimerModel:b.bind(null,"timer",g,c),getSocialModel:b.bind(null,"social",h,c),getPostActionModel:b.bind(null,"postAction",i,c),getAppInstallModel:b.bind(null,"appInstall",j,c),getCreativeCallbacksObj:b.bind(null,"adUnitCallbacksService",l,c),getFillRateCallbacksObj:b.bind(null,"fillRateTrackingService",m,c),getHybridModel:b.bind(null,"hybrid",s,c),getUxTemplateModel:b.bind(null,"uxTemplate",k,c),getImageModel:b.bind(null,"image",n,c),getTrackingModel:b.bind(null,"tracking",o,c),getFrameLayoutModel:b.bind(null,"frameLayout",p,c),getFeaturesModel:b.bind(null,"features",q,c),getFlowModel:b.bind(null,"flow",r,c),getMeasurementModel:b.bind(null,"measurement",t,c),getSKANModel:b.bind(null,"SKANModel",w,c),getSimpleOverlayEndCardModel:b.bind(null,"simpleOverlayEndCard",x,c)}}function B(a){return!!(a.ext.videoData&&a.ext.videoData.videoSource&&a.ext.videoData.videoSource.vast)}function C(a){var c=b.defer();return a=v.updateFeatureFlagsAccordingToSettings(a),B(a)?c.reject({errMsg:"vast parse fail in ad unit"}):c.resolve(a),c.promise}function D(a,b,c,d){C(a).then(function(a){b=new A(a),y(c,b),d.resolve(b)},function(a){d.reject(a.errMsg)})}function E(a){var c=a.id?a.id:a.crid,d=b.defer();if(!c)return d.reject("Invalid creative, missing creative id"),d.promise;var e=G(c);return e?d.resolve():D(a,e,c,d),d.promise}function F(){J={}}function G(a){return J[z(a)]}function H(){return I||(I=c),I}var I,J={};return{addCreative:E,getCreative:G,getProductCallbacks:H,resetCreativeData:F}}])}(),function(){function a(a){function b(b){if(b){if(b.ext.features||(b.ext.features={}),void 0!==a.isVideoClickable())b.ext.features.isVideoClickable=a.isVideoClickable(),b.ext.features.isSmartVideoClickable=!b.ext.features.isVideoClickable&&a.isSmartVideoClickable();else if(void 0===a.isSmartVideoClickable()||b.ext.features.isVideoClickable){if(b.ext.features.isVideoClickable&&a.getOverrideVideoClickable()){var d=c[a.getOverrideVideoClickable()]||c["default"];angular.extend(b.ext.features,d)}}else b.ext.features.isSmartVideoClickable=a.isSmartVideoClickable(),b.ext.features.isVideoClickable=!1;return b}}var c={1:{isSmartVideoClickable:!1,isVideoClickable:!0,clickOnVideoEnds:!1},2:{isSmartVideoClickable:!0,isVideoClickable:!1,clickOnVideoEnds:!1},3:{isSmartVideoClickable:!1,isVideoClickable:!0,clickOnVideoEnds:!0},4:{isSmartVideoClickable:!0,isVideoClickable:!1,clickOnVideoEnds:!0},"default":{}};return{updateFeatureFlagsAccordingToSettings:b}}a.$inject=["productSettingsService"],angular.module("featuresModule",[]).factory("featuresService",a)}(),function(){function a(a,b){function c(b){function c(){var c=b.SKANData;if(!c)return{};var d={};return angular.forEach(a.params,function(a){c[a]&&(d[a]=c[a])}),d}return{getData:function(){return b.SKANData},getSKANDataForPreloadStoreKit:c}}function d(d){var e={};return e.SKANData=angular.extend({},d&&d[a.SKANData]||{},d&&d[a.SKANData]&&d&&d[a.SKANData][a.StoreKit]||{},b.getSKANData()),new c(angular.copy(e))}return{init:d}}a.$inject=["SK_AD_NETWORK","productSettingsService"],angular.module("models.SKAN",[]).factory("SKANModel",a)}(),function(){function a(a,b,c){function d(b){function d(){e=b.appData||{},e.appIcon&&(e.icon=a.getHDUrl(e.appIcon))}var e,f=function(){return e},g=function(b){var d=[];if(e&&(e.appImages||e.appBackground)){var f=e.appImages,g=e.adAssets,h=e.appBackground&&[e.appBackground],i=f||h;g&&(f=g),f&&!angular.isArray(f)&&(b||(i=[],f.portrait&&f.landscape?i=i.concat(f.portrait,f.landscape):f.both&&(i=f.both)),b===c.PORTRAIT&&(i=f.portrait),b===c.LANDSCAPE&&(i=f.landscape)),angular.forEach(i,function(b,c){d.push(a.getHDUrl(b.url||b))})}return d},h=function(){if(!b.isPreCache){var a=g();if(a&&a.length>0)for(var c=a.length,d=null,e=0;e<c;e++)d=new Image,d.src=a[e]}};return d(),{get:f,getAppImages:g,preFetchAppImages:h}}function e(a){var c={};return c.appData=a.appData,c.isPreCache=b.isPreCache(),new d(angular.copy(c))}return{init:e}}a.$inject=["SSA_Utils","productSettingsService","ORIENTATIONS"],angular.module("models.appInstall",[]).factory("appInstall",a)}(),function(){function a(a,b,c,d,e){function f(e){function f(){return d["default"]}function g(){return q.closeAction===a.hide||q.closeAction===a.buttonHidden}function h(){return d.whiteRound}function i(a){return a===c.PORTRAIT?q.closeUrl.portrait:q.closeUrl.landscape}function j(){return{DEC:q.DEC,X2S:q.X2S,LEB:q.LEB}}function k(){return b.close}function l(){return q}function m(a){return a&&!isNaN(a)&&a>0}function n(a,b){return m(a)&&(b&&a<=b||!b)}function o(){var a=!1,b=e.X2SP;return b&&b>0&&Math.random()<=b&&(a=!0),a}function p(){q={closeAction:e.xButtonAction,skipInTime:0,skipInText:"","class":f(),DEC:0,LEB:!1},q.hideClose=g(),q.DEC=e.DEC||q.DEC,q.LEB=e.LEB||q.LEB,q.X2S=o(),!q.hideClose&&n(e.skipInTime,e.videoTime)&&(q.skipInTime=parseInt(e.skipInTime)||q.skipInTime,q.skipInText=e.skipInText||q.skipInText),e.layoutData&&(q["class"]=e.layoutData.className||f(),q.closeUrl={portrait:e.layoutData.portrait?e.layoutData.portrait.closeButtonUrl:null,landscape:e.layoutData.landscape?e.layoutData.landscape.closeButtonUrl:null})}var q;return p(),{_getCloseDataDefault:f,shouldRemoveXServerFlag:g,get:l,getCloseDataWhite:h,getCustomLayoutCloseUrlByOrientation:i,getEndCardFlags:j,getDefaultCloseAction:k}}function g(a){var b={};b.xButtonAction=e.getXButtonBehavior()||a.xButtonBehavior||a.xButtonAction;var c=e.getSkipInTime();if(a.xButtonData&&a.xButtonData.skipInTime||c){b.skipInTime=c||a.xButtonData.skipInTime;var d=e.getSkipInText();b.skipInText="undefined"!=typeof d?d:a.xButtonData&&a.xButtonData.skipInText||"",a.videoData&&a.videoData.videoTime&&(b.videoTime=a.videoData.videoTime)}return a.layoutData&&(b.layoutData=a.layoutData),b.DEC=e.getDECFlag(),b.X2SP=e.getX2SPFlag(),b.LEB=e.getLEBFlag(),b}function h(a){var b=g(a);return new f(angular.copy(b))}return{init:h}}a.$inject=["X_BUTTON_ACTIONS","CLOSE_BUTTON_STATES","ORIENTATIONS","CLOSE_BUTTON_STYLES","productSettingsService"],angular.module("models.closeButton",[]).factory("closeButton",a)}(),function(){function a(){function a(a){function b(){return i.wiggle}function c(){a&&(i={wiggle:a.featuresData.wiggle,isVideoClickable:a.featuresData.isVideoClickable,isSmartVideoClickable:a.featuresData.isSmartVideoClickable,clickOnVideoEnds:a.featuresData.clickOnVideoEnds,allowHybrid:a.featuresData.allowHybrid,allowNativeEndCard:a.featuresData.allowNativeEndCard})}function d(){return i.isVideoClickable}function e(){return i.clickOnVideoEnds}function f(){return i}function g(){return i.allowHybrid}function h(){return i.allowNativeEndCard}var i={};return c(),{get:f,getShowWiggleFlag:b,isVideoClickable:d,isVideoClickableOnVideoEnds:e,isHybridOnShowEnabled:g,isNativeEndCardEnabled:h}}function b(b){var c={featuresData:b.features,isVast:b.videoData&&b.videoData.isVast};return new a(angular.copy(c))}return{init:b}}angular.module("models.features",[]).factory("features",a)}(),function(){function a(a,c,d,e,f,g){function h(h){function i(){var b=a.getFlowByTemplate(h.type,h.templateId);q=k(h.videoData),l(b)}function j(a){return a.hasOwnProperty(d.htmlURL)}function k(a){if(a&&a.videoSource){var b=a.videoSource,h=Object.keys(b),i=h.length;if(c.shouldSupportPlayableHTMLUrlFlow()){if(j(b))return d.htmlURL;e.trackEvent(f.playableHTMLUrlSourceMismatch,{generalMessage:g.supportHTMLUrlFlowWithMissingKey})}else if(j(b)&&1===i)return e.trackEvent(f.playableHTMLUrlSourceMismatch,{generalMessage:g.supportHTMLUrlFlowOffWithMissingKey}),d.htmlURL;for(var k=0;k<i;k++){var l=h[k];if(b[l]&&l!==d.htmlURL)return l}}}function l(a){if(a&&a.firstFrame&&a.frames){var c,d=a.frames,e=a.firstFrame;for(r.replayFrame=a.replayFrame;e&&d[e];){var f;"videoTypeFrame"===e?(f=d[e][q]||d[e]["default"](),"videoTypeFrame"===a.replayFrame&&(r.replayFrame=f.name)):f=d[e],f=angular.copy(f),e===a.firstFrame&&(f.isFirstFrame=!0,r.firstFrame=f.name);var g=new b(f);r.frames[f.name]=g,c&&c.setNextFrame(g),e=f.next,c=g}}}function m(){return r}function n(){return r.frames[r.firstFrame]}function o(){return r.frames[r.replayFrame]}function p(){return!!o()}var q,r={firstFrame:"",replayFrame:"",frames:{}};return i(),{getData:m,getFirstFrame:n,getReplayFrame:o,hasReplayFrame:p}}function i(a){var b={type:a.type,templateId:parseInt(a.templateid)||0,videoData:a.videoData};return new h(angular.copy(b))}return{init:i}}function b(a){function b(a){e=a}function c(){return e}function d(){return!!e}var e;return angular.extend(a,{getNextFrame:c,hasNextFrame:d,setNextFrame:b}),a}a.$inject=["AdUnitMappingService","productSettingsService","VIDEO_SOURCE_RESPONSE_KEYS","analytics","EXTERNAL_ANALYTICS_CATEGORIES","EXTERNAL_MISMATCH_SOURCE"],angular.module("models.flow",[]).factory("flow",a)}(),function(){function a(a,b,c,d){function e(e){function f(b){return n.frameUrl[b||a.PORTRAIT]}function g(){return n&&n.className}function h(){return n}function i(){return n&&n.html}function j(){return n&&n.frameUrl&&(n.frameUrl[a.PORTRAIT]||n.frameUrl[a.LANDSCAPE])}function k(){return j()?c.partialScreen:b.getLayoutType()}function l(){return b.isTransparentLayout()?d.transparentLayout:""}function m(){e&&(n={className:e.className,frameUrl:{}},n.frameUrl[a.PORTRAIT]=e.portrait?e.portrait.frameUrl:null,n.frameUrl[a.LANDSCAPE]=e.landscape?e.landscape.frameUrl:null,n.html=e.html)}var n=null;return m(),{get:h,getFrameUrlByOrientation:f,getCustomStyleName:g,getCustomLayoutUrl:i,isUsingFrameLayout:j,getLayoutType:k,getTransparentLayoutClass:l}}function f(a){var b={layoutData:a.layoutData};return new e(angular.copy(b.layoutData))}return{init:f}}a.$inject=["ORIENTATIONS","productSettingsService","LAYOUT_TYPE","LAYOUT_CLASS"],angular.module("models.frameLayout",[]).factory("frameLayout",a)}(),function(){function a(a){function b(b){function c(){e=b.shouldInitHybridFlow,d=b.isHybridFlow,g=b.viewUniqueId,f=b.clickTags?b.clickTags.storeAppId:""}var d,e,f,g,h=function(){return d},i=function(){return e||d},j=function(){return d},k=function(a){d=a},l=function(){return g},m=function(){return f},n=function(){return a.showHybridOnClick()};return c(),{shouldHandleHybridFlow:i,isHybridFlow:h,setIsHybrid:k,getViewUniqueId:l,getStoreAppId:m,isHybridDisplay:j,showHybridOnClick:n}}function c(a){return new b(angular.copy(a))}return{init:c}}a.$inject=["productSettingsService"],angular.module("models.hybrid",[]).factory("hybrid",a)}(),function(){function a(a){function b(b){function c(b){return b&&b!==a.PORTRAIT?e():d()}function d(){return h.portrait}function e(){return h.landscape}function f(){return h}function g(){b&&(h={portrait:b.portrait,landscape:b.landscape})}var h;return g(),{get:f,getImagePortrait:d,getImageLandscape:e,getImageByOrientation:c}}function c(a){var c={imageData:a.imageData};return new b(angular.copy(c.imageData))}return{init:c}}a.$inject=["ORIENTATIONS"],angular.module("models.image",[]).factory("image",a)}(),function(){function a(){function a(a){function b(){return c.omid}var c={};return c={omid:a.omid},{isOmidSupportedAd:b}}function b(b){var c={};return c.omid=!!b.ivt&&b.ivt.omid,new a(angular.copy(c))}return{init:b}}angular.module("models.measurement",[]).factory("measurement",a)}(),function(){function a(a,b,c,d,e){function f(a){function f(){return n}function g(){return a.templateId==b.RIS||a.templateId==b.RISFullScreen}function h(){return a.deviceOS===e.ios&&"string"==typeof a.deviceOSVersion&&a.deviceOSVersion.split(".")[0]>9}function i(){var b=a.deviceApiLevel?a.deviceApiLevel:a.deviceOSVersion;return a.deviceOS===e.android&&b>15}function j(){return a.deviceOS===e.ios?h():i()}function k(){return j()&&a.videoPlayer===d.internal&&!g()}function l(a){return c.isRingerSwitchOn()||a}function m(){n={toShow:k(),shouldStartMutedByFlag:a.muteFlag}}var n;return m(),{muteBtnConfig:f,shouldMutedVideo:l}}function g(b){var c=b.videoData?b.videoData.videoType:void 0,d={videoType:b.type,videoPlayer:c,templateId:b.templateid,deviceOS:a.getOS(),deviceOSVersion:a.getOSVersion(),deviceApiLevel:a.getAPILevel(),muteFlag:a.getMuteFlag()};return new f(angular.copy(d))}return{init:g}}a.$inject=["productSettingsService","TEMPLATES","SSA_Utils","VIDEO_TYPES","OPERATING_SYSTEMS"],angular.module("models.mute",[]).factory("mute",a)}(),function(){function a(a,b){function c(){var c=a.service().getDBObj(),f=d(c);return f&&(f.fadeout=e(),f.isLargeText="playableAd"==c.ext.type,f.showNotificationData=b.shouldShowNotifications()),f}function d(a){return a.ext&&a.ext.hasOwnProperty("notificationsData")?a.ext.notificationsData:null}function e(){var b=a.service().getDBObj(),c=3;return b.hasOwnProperty("settings")&&b.settings.hasOwnProperty("notificationFadeOutTime")?c=b.settings.notificationFadeOutTime:b.hasOwnProperty("ext")&&b.ext.hasOwnProperty("notificationsData")&&b.ext.notificationsData.hasOwnProperty("notificationFadeOutTime")&&(c=b.ext.notificationsData.notificationFadeOutTime),c}return{get:c}}a.$inject=["AdUnitDelivery","productSettingsService"],angular.module("models.notifications",[]).factory("notifications",a)}(),function(){function a(a,b,c,d,e,f,g,h,i){function j(j){function k(){return Pa}function l(){return Pa.title}function m(){return!!Pa.clickURL}function n(a){return c.replacePlaceholderWithMap(Pa.clickURL,a)}function o(){return!(!Pa.pixelURL&&!Pa.pixelURLArr)}function p(){return angular.isArray(Pa.pixelURLArr)}function q(){return angular.isArray(Pa.viewURLArr)}function r(a){return c.replaceAllConstPlaceholders(c.replacePlaceholderWithMap(Pa.pixelURL,a))}function s(a){var b=f.etype,d=f.esignature,e=Pa.analyticsUrl+"&"+b+"={{"+b+"}}&"+d+"={{"+d+"}}";return c.replaceAllConstPlaceholders(c.replacePlaceholderWithMap(e,a))}function t(a,b){if(!p())return null;for(var d=[],e=0;e<a.length;e++)d[e]=c.replacePlaceholderWithMap(a[e],b);return d}function u(){return Pa.clickThrough}function v(){return Pa.viewURLArr}function w(){return Pa.clickTracking}function x(){return Pa.engagementClickURL}function y(a,b){return a===e.VIDEO&&ba()?u():n(b)}function z(){return Pa.storeAppId}function A(a){return a===e.VIDEO&&ba()?angular.isDefined(w())&&w().length&&!B():o()}function B(){return Pa.videoPixelFired}function C(){return Pa.postActionFired||Pa.videoPixelFired}function D(a,b){return b===e.VIDEO&&ba()?w():[r(a)]}function E(a){Pa.engagementClickURL&&(Pa.engagementClickURL=c.replacePlaceholderWithMap(Pa.engagementClickURL,a))}function F(){return E(a.getUserClickedAlias(C())),c.extendConstAliasesMap(a.getEngagementClickUrlSupportedPlaceholders()),Pa.engagementClickURL=c.replaceAllConstPlaceholders(Pa.engagementClickURL),Pa.engagementClickURL}function G(){var a=z();return angular.isDefined(a)&&a&&a.length}function H(){return Pa.backgroundLandscape}function I(){return Pa.pixelURLArr}function J(){return j.externalBrowser}function K(){if(j.rawExtData.features&&j.rawExtData.features.hasOwnProperty("externalBrowser"))return j.rawExtData.features.externalBrowser}function L(){return!(!K()&&"CPVX"!==Ra)||K()!==!1&&(void 0===K()&&J()===!0)}function M(a){var b=j.openStrategies.redirect;return a===e.VIDEO&&ba()?b=j.openStrategies.redirect:A(a)?b=g.isStoreKitLoaded()?j.openStrategies.S2SStoreKit:j.openStrategies.S2S:U()&&(b=j.openStrategies.seamless),b}function N(){var a=M(Ra);return a===j.openStrategies.S2SStoreKit?j.openStrategies.clickOpenType.storeKit:a===j.openStrategies.S2S?j.openStrategies.clickOpenType.store:a===j.openStrategies.redirect?j.openStrategies.clickOpenType.redirect:""}function O(a){return a===e.VIDEO&&ba()?S()||j.firePixelStrategies.pixel:a===e.VIDEO&&ca()?j.firePixelStrategies.none:S()||j.firePixelStrategies.none}function P(b){return a.isStoreKitSupported()&&G()&&A(b)}function Q(){return S()||j.firePixelStrategies.pixel}function R(a){var c=M(a);return c===b.S2S||c===b.S2SStoreKit}function S(a){var b;return R(a)&&(b=V()&&"ios"===j.deviceData.os&&j.deviceData.sdkVersion>"5.35"?j.firePixelStrategies["native"]:j.firePixelStrategies.pixel),b}function T(){return j.forkingDelay}function U(){return j.isSeamless}function V(){return null===j.safeClick||!angular.isDefined(j.safeClick)||j.safeClick}function W(){return O()===d.pixel&&"ios"===j.deviceData.os}function X(){return Pa.postActionFired}function Y(){return x()}function Z(){var b="",c=a.getDemandSourceName();return c&&(b=c),b+=a.getProductType()+a.getCRID()+z()}function $(a){Qa=a}function _(){return Qa}function aa(a,b){a===e.VIDEO?Pa.videoPixelFired=b:Pa.postActionFired=b}function ba(){return j.videoData&&j.videoData.isVast}function ca(){return j.isSmartVideoClickable&&o()&&!ba()}function da(){return Pa.externalBrowser}function ea(){return Pa.install}function fa(){var a=[];if(j.callbacks&&j.callbacks.click&&"object"==typeof j.callbacks.click){for(var b=0;b<j.callbacks.click.length;b++)"object"==typeof j.callbacks.click[b]&&a.push(j.callbacks.click[b].url);return a}}function ga(){return j.shouldSupportAF}function ha(a){Sa=a}function ia(){return Sa}function ja(){return{x:Aa(),o:Fa(),b:Ga(),c:Ha()}}function ka(){return j.shouldExtractXYCoordinates}function la(){Pa.clickCounter++}function ma(){return Pa.clickCounter}function na(a){Pa.clickType=a}function oa(){var a=h.getCurrentUTCTimeInMills();Pa.adImpressionTime=a}function pa(){if(!isNaN(Pa.adImpressionTime)){var a=h.getCurrentUTCTimeInMills();return a-Pa.adImpressionTime}return 0}function qa(){var a=h.getCurrentUTCTimeInMills();Pa.endCardDisplayedTime=a}function ra(a){Pa.videoWatchTime=a}function sa(){if(!isNaN(Pa.endCardDisplayedTime)&&0!=Pa.endCardDisplayedTime){var a=h.getCurrentUTCTimeInMills();return a-Pa.endCardDisplayedTime}return 0}function ta(){return{custom_a:Pa.clickType,custom_b:pa(),custom_c:ya(),custom_d:za(),custom_e:Pa.clickCounter,custom_h:Pa.videoWatchTime}}function ua(){return Pa.clickType}function va(){var a=ta();return angular.extend(a,{custom_i:sa()}),a}function wa(){var a={customData:{click:{custom_b:pa(),custom_e:Pa.clickCounter,custom_h:Pa.videoWatchTime,custom_i:sa()}}};return a}function xa(){return{custom_h:Pa.videoWatchTime}}function ya(){if(Pa.coordinates.x&&Pa.coordinates.x!==-1){var a=Pa.coordinates.x;return parseInt(a/i.innerWidth*100)}return-1}function za(){if(Pa.coordinates.y&&Pa.coordinates.y!==-1){var a=Pa.coordinates.y;return parseInt(a/i.innerHeight*100)}return-1}function Aa(){var a="";if(Pa.coordinates.x&&Pa.coordinates.x!==-1&&Pa.coordinates.y&&Pa.coordinates.y!==-1){var b=Pa.coordinates.x,c=Pa.coordinates.y;b=Ba(b)?b:b.toFixed(2),c=Ba(c)?c:c.toFixed(2),a=b+","+c}return a}function Ba(a){return"number"==typeof a&&isFinite(a)&&Math.floor(a)===a}function Ca(a,b){Pa.coordinates.x=a,Pa.coordinates.y=b}function Da(){Ca(-1,-1)}function Ea(){var a=j.rawExtData.callbacks;if(a&&a.impressions)return a.impressions[0].url}function Fa(){return Pa.o||0}function Ga(){return Pa.b||0}function Ha(){return Pa.c||0}function Ia(a){a>Fa()&&(Pa.o=a)}function Ja(a){a>Ga()&&(Pa.b=a)}function Ka(){Pa.c=Ha()+1}function La(){Pa.o=0,Pa.b=0}function Ma(a,b){a?Ja(b):Ia(b)}function Na(a){a?La():Ka()}function Oa(){Ra=j.rawExtData.type,Pa=j.rawExtData.clickTags||j.rawExtData.clickData||{},j.videoData&&ba()&&(Pa.clickThrough=j.videoData.clickThrough,Pa.clickTracking=j.videoData.clickTracking||fa()),Pa.videoPixelFired=!1,Pa.coordinates={},Pa.adImpressionTime=0,Pa.clickCounter=0,Pa.clickType="",Pa.endCardDisplayedTime=0,Pa.videoWatchTime=0,Pa.analyticsUrl=Ea(j)}var Pa,Qa,Ra,Sa=null;return Oa(),{get:k,getPostActionTitle:l,createUrlWithPlaceholderReplaced:n,getClickActionUrl:y,isEndCardImpressionExist:q,isOfferClicked:C,isStoreKitClickStrategy:P,shouldPreloadAppInstallPage:G,getPostActionAppID:z,isClickTrackingExist:o,isClickTrackingArrayExist:p,shouldFirePixel:A,getPixelUrls:D,setPixelFired:aa,getFirePixelStrategy:O,
isPixelFired:X,createCloseUrlWithPlaceholderReplaced:s,replacePlaceholderClickTrackingArray:t,getBackgroundLandscape:H,getEngagementClickUrl:x,shouldOpenInExtBrowser:L,shouldFireEngagementClick:Y,getOpenStrategy:M,getClickOpenType:N,getForkingDelay:T,isSeamless:U,isSafeClick:V,getFireEngagementClickStrategy:Q,shouldDelayFirePixel:W,getEndCardImpressionArray:v,getClickTrackingURLsArray:I,isSmartVideoClickable:ca,getViewUniqueId:Z,assignStoreKitViewIdentifier:$,getStoreKitViewIdentifier:_,getExternalBrowserParam:da,getInstallParam:ea,updateEngagementUrlWithPlacement:E,getUpdatedEngagementUrl:F,isUrlExist:m,shouldSupportAF:ga,setAFToken:ha,getAFToken:ia,getISToken:ja,increaseClickCounter:la,getClickCounter:ma,setClickType:na,setAdImpressionTime:oa,setEndCardDisplayedTime:qa,setVideoWatchTime:ra,getClickDataObject:ta,getClickType:ua,getClickAndEndCardDataObject:va,getAdClosedDataObject:wa,getVideoWatchTime:xa,shouldExtractXYCoordinates:ka,getXYCoordinates:Aa,setCoordinates:Ca,resetCoordinates:Da,getAnalyticsUrl:Ea,getScaledXCoordinate:ya,getScaledYCoordinate:za,setVisibility:Ma,setEnteredForeground:Na}}function k(a){a.clickTags?a.clickTags.clickURL=c.replaceAllConstPlaceholders(a.clickTags.clickURL):a.clickurl=c.replaceAllConstPlaceholders(a.clickurl)}function l(a){if(a.clickTags&&a.clickTags.viewURLArr){for(var b=[],d=0;d<a.clickTags.viewURLArr.length;d++)a.clickTags.viewURLArr[d].url&&b.push(c.replaceAllConstPlaceholders(a.clickTags.viewURLArr[d].url));a.clickTags.viewURLArr=b}}function m(a){a.clickTags.pixelURL=c.replaceAllConstPlaceholders(a.clickTags.pixelURL)}function n(a){for(var b=[],d=0;d<a.clickTags.pixelURLArr.length;d++)a.clickTags.pixelURLArr[d].url&&b.push(c.replaceAllConstPlaceholders(a.clickTags.pixelURLArr[d].url));a.clickTags.pixelURLArr=b}function o(a){a.clickTags&&(a.clickTags.engagementClickURL=c.replaceAllConstPlaceholders(a.clickTags.engagementClickURL))}function p(c){var e=angular.copy(c);k(e),e.clickTags&&e.clickTags.pixelURLArr?n(e):e.clickTags&&e.clickTags.pixelURL&&m(e),l(e),o(e);var f={externalBrowser:a.getSettings().externalBrowser||a.getSettings().openLandingPageInExtBrowser,deviceData:a.getDeviceData(),rawExtData:e,callbacks:e.callbacks,videoData:e.videoData,openStrategies:b,forkingDelay:a.getForkingDelay(),isSeamless:a.isSeamless(),firePixelStrategies:d,safeClick:a.getIsSafeClick(),isSmartVideoClickable:e.features.isSmartVideoClickable,shouldSupportAF:e.features.ccvaf&&a.shouldAddAFIntegration(),shouldExtractXYCoordinates:a.shouldExtractXYCoordinates()};return new j(f)}return{init:p}}a.$inject=["productSettingsService","OPEN_URL_STRATEGIES","placeholderManager","FIRE_PIXEL_STRATEGIES","CLICK_ACTION","URL_QUERY_PARAMS","storeKitService","Date_Utils","$window"],angular.module("models.postAction",[]).factory("postAction",a)}(),function(){function a(a,b,c,d,e,f){function g(b){function f(b){return a.isSimpleOverlayEndCardEnabled()&&b!==d.ignore&&m&&"playableAd"===m.type&&[c.RewardedVideo,c.Interstitial].indexOf(a.getProductType())!==-1&&g()&&!j()&&!!m.appIcon}function g(){return!a.isIOS()||!!m.storeAppId}function h(){return a.isSimpleOverlayEndCardFullyClickable()||!1}function i(){return a.getSimpleOverlayEndCardCTAText()||e.defaultCTAText}function j(){return m.shown}function k(){m.shown=!0}function l(){m=b,m.shown=!1}var m;return l(),{shouldShowSimpleOverlayEndCard:f,isFullCardClickable:h,getSimpleOverlayEndCardCTA:i,setEndCardShown:k}}function h(a){return{type:a.type,appIcon:a.appData&&a.appData.appIcon,storeAppId:a.clickTags&&a.clickTags.storeAppId}}function i(a){var b=h(a);return new g(angular.copy(b))}return{init:i}}a.$inject=["productSettingsService","analytics","PRODUCT_TYPES","CLOSE_BUTTON_STATES","SIMPLE_OVERLAY_END_CARD","SIMPLE_OVERLAY_END_CARD_CATEGORIES"],angular.module("models.simpleOverlayEndCard",[]).factory("simpleOverlayEndCardModel",a)}(),function(){function a(){function a(a){function b(){return d}function c(){d=a.socialData}var d;return c(),{get:b}}function b(b){var c={};return c.socialData=b.socialData,new a(angular.copy(c))}return{init:b}}angular.module("models.social",[]).factory("social",a)}(),function(){function a(){function a(a){function b(){c=a&&a.counterData||{}}var c,d=function(){return c},e=function(){return c.showTimerServerFlag===!0||"true"===c.showTimerServerFlag},f=function(){return c.showTimer},g=function(){return c.completionCountdown};return b(),{get:d,isShowTimerServerFlag:e,getCompletionCountdown:g,getShowTimer:f}}function b(b){var c={};return c.counterData=b.counterData,new a(angular.copy(c))}return{init:b}}angular.module("models.timer",[]).factory("timer",a)}(),function(){function a(){function a(a){function b(){return d}function c(){a&&(d={externallyTracked:"true"===a.externallyTracked||a.externallyTracked===!0})}var d;return c(),{get:b}}function b(b){var c={externallyTracked:b.externallyTracked};return new a(angular.copy(c))}return{init:b}}angular.module("models.tracking",[]).factory("tracking",a)}(),function(){function a(a){function b(a){function b(){return f}function c(){return f.landingId}function d(){return f.templateId}function e(){f={landingId:parseInt(a.landingId)||0,templateId:parseInt(a.templateId)||0}}var f;return e(),{get:b,getLandingId:c,getTemplateId:d}}function c(c){var d={templateId:c.templateid,landingId:a.getSettings().landingId};return new b(angular.copy(d))}return{init:c}}a.$inject=["productSettingsService"],angular.module("models.uxTemplate",[]).factory("uxTemplate",a)}(),function(){function a(a,b,c,d,e,f,g){function h(d){function e(){return d.externalTracking}function h(){return w}function i(){return!!d.unrulyCarousel}function j(){return"true"===d.externallyTracked||d.externallyTracked===!0}function k(a){return a&&a.width&&a.height&&a.width>0&&a.height>0}function l(){var a=w.videoDimensions,b=f.UNDEFINED;return k(a)&&(b=a.width>a.height?f.LANDSCAPE:f.PORTRAIT),b}function m(){return d.unrulyCarousel}function n(a){var c={html:a,disabled:!1};return i()?(c.url=b.getUnrulyObfuscation(),c.html="<div></div>"):c.url=b.getObfuscation(),c}function o(){a.init(e())}function p(){return w.videoType}function q(){w.videoSource&&w.videoSource.videoformat_mp4&&w.videoSource.videoformat_mp4.indexOf("IronSource360_")!==-1&&(w.videoType="ssa-internal-video-player-test")}function r(){var b={url:a.getServiceUrl(d.protocol),callback:a.connect,id:"pusher-script"};return b}function s(){var a=w&&w.videoSource.hasOwnProperty(g.htmlURL)&&w.videoSource.htmlURL.length>0;return d.shouldSupportPlayableHTMLUrlFlow?a:a&&1===Object.keys(w.videoSource).length}function t(){return w.videoTime}function u(){return w.isVast}function v(){w=d.videoData,q(),w.videoBufferPercentage=d.videoBufferPercentage,u()&&(w.vastVideoClickLimit="undefined"!=typeof d.vastVideoClickLimit?d.vastVideoClickLimit:1);var a=d.deviceData.apiLevel?d.deviceData.apiLevel:d.deviceData.osVersion;w.isBufferSupported="ios"==d.deviceData.os||a>=x;var e=p();e===c.internal?w.transparentPoster=b.getTransparent():e===c.external&&(w.obfuscationSettings=n(w.videoSource.html),w.isUnrulyCarousel=i(),w.unrulyData=m())}var w,x=21;return v(),{_getExternallyTrackedData:e,get:h,isExternallyTracked:j,getVideoTime:t,initAdvertiserTrackingService:o,getExternallyTrackingScriptData:r,getVideoOrientation:l,shouldSupportPlayableHTMLUrlFlow:s}}function i(a){if(a.sendPosition&&a.videoData.videoSource&&a.videoData.videoSource.html){var b=a.videoData.videoSource.html;b=e.replacePlaceholderWithMap(b,d.getCreativePositionAlias(a.position)),a.videoData.videoSource.html=b}}function j(a){var b=d.getProtocol();i(a);var c={videoData:a.videoData,externalTracking:a.externalTracking,externallyTracked:a.externallyTracked,unrulyCarousel:a.unrulyCarousel,protocol:b,deviceData:d.getDeviceData(),videoBufferPercentage:d.getSettings().videoBufferPercentage||0,vastVideoClickLimit:d.getSettings().vastVideoClickLimit,shouldSupportPlayableHTMLUrlFlow:d.shouldSupportPlayableHTMLUrlFlow()};return new h(angular.copy(c))}return{init:j}}a.$inject=["AdvertiserTrackingService","assetsService","VIDEO_TYPES","productSettingsService","placeholderManager","ORIENTATIONS","VIDEO_SOURCE_RESPONSE_KEYS"],angular.module("models.video",[]).factory("video",a)}(),function(){var a=angular.module("AdUnit");a.factory("dialogBoxService",["$rootScope","productSettingsService","analytics","DIALOG_BOX_EXIT","DIALOG_BOX_RESUME","DIALOG_BOX_TEXT",function(a,b,c,d,e,f){function g(b){function c(a){return a&&a.onDialogBoxOpen&&a.onDialogBoxClose}function d(a,b){"function"==typeof a&&a(b)}function e(){l=!0,d(b.onDialogBoxOpen)}function f(a,c){angular.isObject(c)&&(l=!1,d(b.onDialogBoxClose,c))}function g(){c(b)&&(j=a.$on("AdController.dialogBoxAboutToClose",f),k=a.$on("AdController.dialogBoxAboutToOpen",e))}function h(){j&&j(),k&&k()}function i(){return l===!0}var j,k,l=!1;return g(),{destroy:h,isDialogBoxOpen:i}}function h(a){return new g(a)}function i(b){a.$emit("ssaDialogBox.openDialog",b),a.$broadcast("ssaDialogBox.openDialog",b)}function j(){var a=o().close||f.noMoreOffers,b=o().yes||f.confirm,c=o().no||f.cancel;m(),n(),i({bodyText:a,confirmLabel:b,cancelLabel:c,confirmCB:k,cancelCB:l})}function k(){a.$emit("AdController.dialogBoxAboutToClose",{shouldResume:!1}),a.$broadcast("AdController.dialogBoxAboutToClose",{shouldResume:!1}),c.trackEvent(d,{}),a.$emit(s),a.$broadcast(s)}function l(){c.trackEvent(e,{}),a.$emit("AdController.dialogBoxAboutToClose",{shouldResume:!0}),a.$broadcast("AdController.dialogBoxAboutToClose",{shouldResume:!0}),a.$broadcast("AdController.showFrame",{shouldResume:!0}),a.$emit("AdController.showFrame",{shouldResume:!0})}function m(){a.$broadcast("AdController.dialogBoxAboutToOpen"),a.$emit("AdController.dialogBoxAboutToOpen")}function n(){a.$emit("AdController.hideFrame"),a.$broadcast("AdController.hideFrame")}function o(){var a=b.getSettings().labels;return a&&a.confirmCloseMsg&&a.confirmCloseMsg.during?a.confirmCloseMsg.during:{}}function p(){return{bodyText:f.noMoreOffers,confirmLabel:f.close,confirmCB:k}}function q(){return{bodyText:"",confirmLabel:f.confirm,cancelLabel:f.cancel,confirmCB:k,cancelCB:l}}function r(a){s=a}var s="AdController.confirmCloseClicked";return{init:h,warningDialogData:q,errorDialogData:p,showDialogBox:i,showDialogBoxDuringAd:j,setNextFrameBehavior:r}}])}(),function(){var a=angular.module("AdUnit");a.factory("disableClickService",["$rootScope","$timeout","productSettingsService","appStateHelper",function(a,b,c,d){function e(){f()&&g()}function f(){return c.shouldDisableClickForXSec()||c.isVideoClickDisabled()}function g(){s=a.$on("AdController.adVisible",h)}function h(a,b){j()}function i(a,b){d.isInBackground(b)&&k()}function j(){u=!0,m()&&!r&&(t=a.$on("AdController.enterBackground",i),r=l(m()))}function k(){n(),o(),u=!1}function l(a){return b(function(){k()},a)}function m(){return 1e3*c.getDisableClickForXSec()}function n(){r&&b.cancel(r)}function o(){p(t),p(s)}function p(a){a&&a()}function q(){return u}var r,s,t,u=!1;return{init:e,isClickDisabled:q}}])}(),function(){var a=angular.module("AdUnit");a.factory("engagementClickService",["adapter","analytics","RV_ANALYTICS_CATEGORIES","CLICK_ACTION","CLICK_EVENTS",function(a,b,c,d,e){function f(e){if(e.shouldFireEngagementClick()){var f=e.getUpdatedEngagementUrl(),arguments={url:f,type:e.getFireEngagementClickStrategy()};e.setPixelFired(d.END_CARD,!0),b.trackEvent(c.engagementClickFired),a.call({method:"FirePixel",arguments:arguments})}}function g(c,d){var e=Date.now(),f=c.getISToken(),g=b.getUUID(f,e),h=c.createCloseUrlWithPlaceholderReplaced({"{{etype}}":d,"{{esignature}}":g}),arguments={url:h,type:c.getFirePixelStrategy()};a.call({method:"FirePixel",arguments:arguments})}return{fire:f,fireClickAdClose:g}}])}(),function(){var a=angular.module("AdUnit");a.factory("dapiCallbacksService",["DAPI_CONNECTION_EVENTS","DAPI_CALLBACK_NAMES","SSA_Utils",function(a,b,c){function d(){c.invokeSafeCB(b.getDapiData,null,o)}function e(){c.invokeSafeCB(b.close,null,o)}function f(){c.invokeSafeCB(b.replay,null,o)}function g(a){c.invokeSafeCB(b.open,a,o)}function h(a){c.invokeSafeCB(b.openStoreUrl,a,o)}function i(a){c.invokeSafeCB(b.useCustomClose,a,o)}function j(){c.invokeSafeCB(b.reward,null,o)}function k(a){a=a.arguments,b[a.eventName]&&c.invokeSafeCB(b[a.eventName],a.data,o)}function l(a){c.invokeSafeCB(b.notifyAssetFailed,a,o)}function m(a){o=a||{}}function n(a){return p[a]||p["default"].bind(null,a)}var o,p={"default":function(){}};return p[a.getDapiData]=d,p[a.close]=e,p[a.replay]=f,p[a.open]=g,p[a.openStoreUrl]=h,p[a.useCustomClose]=i,p[a.reward]=j,p[a.triggerEvent]=k,p[a.notifyAssetFailed]=l,{init:m,getHandler:n}}])}(),function(){var a=angular.module("AdUnit");a.factory("dapiService",["$rootScope","DAPI_CONNECTION_EVENTS","DAPI_CALLBACK_NAMES","GENERAL_EVENTS","productSettingsService","iframeMessageService","externalDataService","SSA_Utils","screenOrientationService","EXTERNAL_API_TYPE","DAPI_ANALYTICS_CATEGORIES","visibilityService","DAPI_MSG_PREFIXES","dapiCallbacksService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(c){function d(){return!!(Q&&Q.clientWidth&&Q.clientHeight)}function i(){d()&&(K.updateScreenSize(Q.clientWidth,Q.clientHeight),f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m))}function k(){i(),f.sendMessage({name:b.adResized,data:K.getScreenSize()},N,m),H()}function o(a,c){var d=!!c.isVisible;K.updateViewability(d);var e={};e.isViewable=d,c.changeReason&&(e.changeReason=c.changeReason),f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m),f.sendMessage({name:b.viewableChange,data:e},N,m)}function p(a,c){K.updateDapiDataCloseButtonVisibility(!c),f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m),f.sendMessage({name:b.closeButtonVisibilityChange,data:{isCloseButtonVisible:K.getDapiAdData().isCloseButtonVisible}},N,m)}function q(a,c){K.updateDapiDataTimeElapsed(c),f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m),f.sendMessage({name:b.timeUpdate,data:{timeElapsed:K.getDapiTimeData().timeElapsed}},N,m)}function r(){P=!0,C(),d()&&(s(),H())}function s(){P&&O&&(K.updateViewability(!0),i(),f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m),f.sendMessage({name:b.viewableChange,data:{isViewable:K.getViewableValue()}},N,m))}function t(){L.connected(),K.updateState(K.getStates().ready),f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m),f.sendMessage({name:b.stateChange,data:K.getState()},N,m),f.sendMessage({name:b.ready,data:{}},N,m)}function u(){M&&f.sendMessage({name:b.getDapiUrl,data:G()},N,m)}function v(a){var b=a.name,c=a.data;return"connected"===b?void t():"getDapiUrl"===a.state?void u():void(c&&c.arguments&&(c.arguments.callback=w(a.data.id),n.getHandler(b).call(null,c)))}function w(a){return!!a&&function(c){f.sendMessage({name:b.handleFunctionCallback,data:{data:c,id:a}},N,m)}}function x(){J=a.$on("visibilityService.onVisibilityChanged",o),I=a.$on("screenOrientation.calculate",function(a,b){k()}),a.$on("Video.TimeTick",q),a.$on("CloseBtn.isHidden",p)}function y(){return!!(c&&c.element&&c.adFrame&&c.callbacks)&&(Q=c.adFrame,L=c.callbacks,N=c.element,M=c.requestDapiUrl||!1,f.setMessageHandler(v,j.dapi),K=g.initModel().getDapiModel(),n.init(L||{},K,N),K.updateDeviceData(),K.updateAdData(c),K.updateAppData(),K.updateCreativeAssets(c.creativeAssets),x(),l.callOnVisible(r),void h.addHandlerToRingerSwitch(B))}function z(a){return!e.getMuteFlag()&&K.getVolumeValue()!==a}function A(){var a=e.getMuteFlag();return a||h.isRingerSwitchOn()?0:100}function B(){var a=h.isRingerSwitchOn()?0:100;z(a)&&D(a)}function C(){var a=A();D(a)}function D(a){K.setVolumeData(a),E()}function E(){f.sendMessage({name:b.updateDapiData,data:K.getDataObject()},N,m),f.sendMessage({name:b.audioVolumeChange,data:K.getVolumeValue()},N,m)}function F(){I(),J&&J(),h.destroyRingerListener()}function G(){return K.getDapiUrl()}function H(){O||(O=!0,s())}var I,J,K,L,M,N,O,P,Q;return y(),{getDapiUrl:G,destroy:F}}function p(a){return new o(a)}return{init:p}}])}(),function(){var a=angular.module("externalDataModule",["models.dapiModel","models.mraidModel"]);a.factory("externalDataService",["mraidModel","dapiModel",function(a,b){function c(){function c(a,b){return d[a]||(d[a]=b.init()),d[a]}var d={};return{getMraidModel:c.bind(null,"mraidModel",a),getDapiModel:c.bind(null,"dapiModel",b)}}function d(){return e||(e=new c),e}var e;return{initModel:d}}])}(),function(){var a=angular.module("AdUnit");a.factory("iframeMessageService",["$window","analytics","EXTERNAL_MESSAGE_CONFIGS","EXTERNAL_API_TYPE","MRAID_ANALYTICS_CATEGORIES","SSA_Utils","DAPI_MSG_PREFIXES","MRAID_MSG_PREFIXES","EXTERNAL_ANALYTICS_CATEGORIES",function(a,b,c,d,e,f,g,h,i){function j(a,b,c){var d=a.data,e=a.name;return b&&e&&"undefined"!=typeof d&&c}function k(a){var b,c,d=a.data,e=d.indexOf(q+g.receive),f=d.indexOf(q+h.receive);if(e!==-1)c=m(d.slice(e+q.length),g),b=o;else{if(f===-1)return;c=m(d.slice(f+q.length),h),b=p}b(c)}function l(){a.addEventListener("message",k,!1)}function m(a,b){var c=[],d=a.split(b.receive);return"undefined"!=typeof d[1]&&(c=JSON&&JSON.parse(d[1])),angular.isObject(c)?c:null}function n(a,b){return q+b+JSON.stringify(a)}var o,p,q="$$";return l(),{sendMessage:function(a,c,d){if(!j(a,c,d))return void b.trackEvent(i.invalidExternalMessage,{generalMessage:JSON.stringify(a)});var e=n({name:a.name,data:a.data},d.send);c.postMessage(e,"*")},setMessageHandler:function(a,b){b===d.dapi?o=a:b===d.mraid&&(p=a)},sendError:function(a,c){b.trackEvent(e.error,{generalMessage:c+" | "+a}),this.sendMessage("error",{message:a,action:c})}}}])}(),function(){function a(a,b,c,d){function e(e){function f(){e&&(D=e.dapiData,E=e.dapiStates,g())}function g(){D.screenSize.width=c.getInnerWidth(),D.screenSize.width=c.getInnerHeight()}function h(){return d.secured+"://"+b.getAssetPathWithoutProtocol()+"dapi/"}function i(){return angular.extend({},D)}function j(){return E}function k(){return h()+D.version+"/dapi.js"}function l(a){D.isViewable=a}function m(a){D.state=a}function n(){return D.state}function o(a,b){D.screenSize.width=a,D.screenSize.height=b}function p(a){D.adData.isCloseButtonVisible=a}function q(a){D.adData.timeData.timeElapsed=a}function r(){return D.screenSize}function s(){return D.isViewable}function t(){return D.deviceData}function u(){var b=a.getDeviceData();D.deviceData.os=b.os,D.deviceData.osVersion=b.osVersion,D.deviceData.apiLevel=b.apiLevel,D.deviceData.deviceId=a.getDeviceId(),D.deviceData.deviceLanguage=a.getDeviceLanguage()}function v(b){var c=a.getRequestOpportunityData();D.adData.opportunityId=c.opportunityId,D.adData.requestId=c.requestId,D.adData.campaignId=a.getCID(),D.adData.bannerId=a.getCRID(),D.adData.creativeId=a.getCreativeId(),D.adData.productType=a.getProductType(),D.adData.isAFAd=!(!b.thirdPartyLibsConfigs||!b.thirdPartyLibsConfigs.supportAF)&&b.thirdPartyLibsConfigs.supportAF,D.adData.shouldExtractXYCoordinates=b.shouldExtractXYCoordinates,D.adData.timeData.duration=b.duration||0,D.adData.timeData.timeElapsed=0,D.adData.isCloseButtonVisible=b.isCloseButtonVisible}function w(){D.appData.appKey=a.getApplicationKey(),D.appData.appOrientation=a.getApplicationOrientation(),D.appData.bundleId=a.getBundleId(),D.appData.userApplicationId=a.getUserApplicationId()}function x(a){D.audioVolume=a}function y(a){D.creativeAssets=a||{}}function z(){return D.audioVolume}function A(){return D}function B(){return D.adData}function C(){return B().timeData}var D={},E={};return f(),{get:A,getDefaultData:i,getStates:j,getDapiUrl:k,updateDeviceData:u,updateAdData:v,updateAppData:w,setVolumeData:x,updateViewability:l,updateState:m,updateDapiDataCloseButtonVisibility:p,updateDapiDataTimeElapsed:q,getDataObject:A,getState:n,updateScreenSize:o,getScreenSize:r,getViewableValue:s,getVolumeValue:z,getDeviceData:t,getDapiAdData:B,getDapiTimeData:C,updateCreativeAssets:y}}function f(){var a={dapiStates:g,dapiData:h};return new e(angular.copy(a))}var g={loading:"loading",ready:"ready",resized:"resized",hidden:"hidden"},h={version:"1.0.18",screenSize:{width:0,height:0},deviceData:{os:"",osVersion:"",deviceId:"",deviceLanguage:""},adData:{opportunityId:"",requestId:"",bannerId:"",creativeId:"",campaignId:"",productType:"",isAFAd:!1,shouldExtractXYCoordinates:!1,timeData:{duration:0,timeElapsed:0},isCloseButtonVisible:null},appData:{appKey:"",appOrientation:"",bundleId:"",userApplicationId:""},creativeAssets:{},state:g.loading,isViewable:!1,audioVolume:0};return{init:f}}a.$inject=["productSettingsService","assetsService","SSA_Utils","PROTOCOL_TYPES"],angular.module("models.dapiModel",[]).factory("dapiModel",a)}(),function(){function a(a,b,c){function d(d){function e(){d&&(D=d.mraidStates,E=d.customClosePositions,F=d.forceOrientations,G=d.placements,H=d.mraidData,f())}function f(){var a=g(),b=h();H.expandProperties.width=a,H.expandProperties.height=b,H.resizeProperties.width=a,H.resizeProperties.height=b,H.screenSize.width=a,H.screenSize.height=b,H.currentPosition.width=a,H.currentPosition.height=b,H.defaultPosition.width=a,H.defaultPosition.height=b}function g(){return a.getInnerWidth()}function h(){return a.getInnerHeight()}function i(){return angular.extend({},H)}function j(){return D}function k(){return H}function l(){return E}function m(){return F}function n(){return G}function o(){return H.screenSize}function p(){return H.expandProperties}function q(){return H.resizeProperties}function r(){return H.orientationProperties}function s(a,b){H.screenSize.width=a,H.screenSize.height=b}function t(){return H.state}function u(a){H.state=a}function v(){return H.isViewable}function w(a){H.isViewable=a}function x(a,b){H.defaultPosition.width=a,H.defaultPosition.height=b}function y(a,b){H.defaultPosition.width=a,H.defaultPosition.height=b}function z(){return H.audioVolume}function A(a){H.audioVolume=a}function B(){var a=b.service,d=a().getTemplateId(),e=c.get(),f=[4,34,5,35];return e.afterData.length>0&&f.indexOf(d)!==-1}function C(){return H.state===D.loading}var D={},E={},F={},G={},H={};return e(),{get:k,getDefaultData:i,getStates:j,getCustomClosePositions:l,getForceOrientations:m,getPlacements:n,getWindowWidthInDIP:g,getWindowHeightInDIP:h,getScreenSize:o,updateScreenSize:s,getCurrentState:t,updateDefaultPositionSize:x,updateCurrentPositionSize:y,getAudioVolume:z,updateCurrentState:u,getIsViewableValue:v,getDataObject:k,getExpandProperties:p,getOrientationProperties:r,updateIsViewableValue:w,updateAudioVolume:A,getResizeProperties:q,notAllowedToUseCustomClose:B,isInLoadingState:C}}function e(){var a={mraidStates:f,customClosePositions:g,forceOrientations:h,placements:i,mraidData:j};return new d(angular.copy(a))}var f={loading:"loading","default":"default",expanded:"expanded",resized:"resized",hidden:"hidden"},g={"top-left":"top-left","top-right":"top-right",center:"center","bottom-left":"bottom-left","bottom-right":"bottom-right","top-center":"top-center","bottom-center":"bottom-center"},h={portrait:"portrait",landscape:"landscape",none:"none"},i={interstitial:"interstitial",inline:"inline"},j={placementType:i.interstitial,expandProperties:{width:0,height:0,useCustomClose:!1,isModal:!0},orientationProperties:{allowOrientationChange:!1,forceOrientation:h.none},resizeProperties:{width:0,height:0,offsetX:0,offsetY:0,customClosePosition:g["top-right"],allowOffscreen:!0},screenSize:{width:0,height:0},currentPosition:{x:0,y:0,width:0,height:0},defaultPosition:{x:0,y:0,width:0,height:0},audioVolume:0,state:f.loading,isViewable:!1};return{init:e}}a.$inject=["SSA_Utils","AdUnitDelivery","notifications"],angular.module("models.mraidModel",[]).factory("mraidModel",a)}(),function(){var a=angular.module("AdUnit");a.factory("mraidCallbacksService",["analytics","MRAID_COMMUNICATION_EVENTS","adapter","SSA_Utils","MRAID_CALLBACK_NAMES","MRAID_ANALYTICS_CATEGORIES",function(a,b,c,d,e,f){function g(){d.invokeSafeCB(e.getMraidData,null,w)}function h(a){d.invokeSafeCB(e.open,a,w)}function i(a){d.invokeSafeCB(e.openStoreUrl,a,w)}function j(a){d.invokeSafeCB(e.expand,a,w)}function k(a){d.invokeSafeCB(e.setExpandProperties,a,w)}function l(a){d.invokeSafeCB(e.useCustomClose,a,w)}function m(){d.invokeSafeCB(e.close,null,w)}function n(a){d.invokeSafeCB(e.setResizeProperties,a,w)}function o(){d.invokeSafeCB(e.resize,null,w)}function p(a){d.invokeSafeCB(e.setOrientationProperties,a,w)}function q(a){d.invokeSafeCB(e.supports,a,w)}function r(a){d.invokeSafeCB(e.log,a,w)}function s(){d.invokeSafeCB(e.reward,null,w)}function t(a){return y[a]}function u(b){if(b){var c=x[b.name];return c?void c.call(null,b.data):void a.trackEvent(f.unknownFunction,{generalMessage:b.name})}}function v(a,b){w=a||{},x=b||{}}var w,x,y={};return y[b.getMraidData]=g,y[b.open]=h,y[b.openStoreUrl]=i,y[b.expand]=j,y[b.setExpandProperties]=k,y[b.useCustomClose]=l,y[b.close]=m,y[b.setResizeProperties]=n,y[b.resize]=o,y[b.setOrientationProperties]=p,y[b.supports]=q,y[b.log]=r,y[b.reward]=s,y[b.generalMessage]=u,{init:v,getHandler:t}}])}(),function(){var a=angular.module("AdUnit");a.factory("mraidService",["$rootScope","$timeout","$window","SSA_Utils","analytics","$interval","EXTERNAL_API_TYPE","MRAID_ANALYTICS_CATEGORIES","LogService","MRAID_MSG_PREFIXES","MRAID_COMMUNICATION_EVENTS","MRAID_STATES","mraidCallbacksService","visibilityService","productSettingsService","externalDataService","iframeMessageService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){function r(c){function n(){if(!(c&&c.callbacks&&c.adFrame))return!1;K=c.callbacks,P=c.adFrame,O=c.element,L=c.adData&&c.adData.closeData,M=c.adData&&c.adData.postAction,N=c.adData&&c.adData.isVpaid,R=p.initModel().getMraidModel(),E=R.getCustomClosePositions(),F=R.getForceOrientations(),G=R.getPlacements();var b=R.getScreenSize();b.width>0&&b.height>0&&(H=!0),J=a.$on("screenOrientation.calculate",function(a,b){x()}),d.callOnVisible(A),Q=a.$on("visibilityService.onVisibilityChanged",r),d.addHandlerToRingerSwitch(u),m.init(K,{1:c.generalCallbacks.vpaidLoaded,2:c.generalCallbacks.vpaidLoadedError,3:c.generalCallbacks.moatStartTracking,4:c.generalCallbacks.moatStopTracking,5:c.generalCallbacks.omidStartSession,6:c.generalCallbacks.omidFinishSession,7:c.generalCallbacks.omidImpressionOccurred,"default":angular.noop}),q.setMessageHandler(w,g.mraid)}function r(a,b){var c=!!b.isVisible;R.updateIsViewableValue(c),q.sendMessage({name:k.updateMraidData,data:R.getDataObject()},O,j),q.sendMessage({name:k.viewableChange,data:c},O,j)}function s(a){return R.getAudioVolume()!==a||o.getMuteFlag()}function t(){var a=o.getMuteFlag();return a||d.isRingerSwitchOn()?0:100}function u(a){var b=t();(s(b)||a)&&(R.updateAudioVolume(b),q.sendMessage({name:k.updateMraidData,data:R.getDataObject()},O,j),q.sendMessage({name:k.audioVolumeChange,data:b},O,j))}function v(){K.connected()}function w(a){return a.name!==l.connected||N?a.name===l.mraidAdLoaded?void B():void m.getHandler(a.name).call(null,a.data):void v()}function x(){if(P&&P.clientWidth&&P.clientHeight){var a=P.clientWidth,b=P.clientHeight;R.updateScreenSize(a,b),R.updateDefaultPositionSize(a,b),R.updateCurrentPositionSize(a,b),q.sendMessage({name:k.updateMraidData,data:R.getDataObject()},O,j),q.sendMessage({name:k.sizeChange,data:R.getScreenSize()},O,j),H||(H=!0,B())}}function y(b){a.$evalAsync(function(){a.$broadcast("SkipIn.Tick",b)})}function z(){if(L&&L.skipInTime){var b=0;S=f(function(){y(b),M&&M.setVideoWatchTime(b),b++},1e3),T=a.$on("skipIn.skipInTimeEnded",function(a,b){f.cancel(S),i.log("ssaMraidAdContainerComponent skipIn timeout interval stop",i.logLevel.trace)})}}function A(a,c){I=!0,z(),U=b(function(){var a={mraidAdLoadedFlag:R&&R.getCurrentState(),adVisibleFlag:I,screenSizeIsSetFlag:H};e.trackEvent(h.adVisibleButNotReady,{generalMessage:JSON.stringify(a)})},V),B()}function B(){I&&H&&(b.cancel(U),C())}function C(){var a=!0,b=R.getStates()["default"];R.updateCurrentState(b),R.updateIsViewableValue(a),q.sendMessage({name:k.updateMraidData,data:R.getDataObject()},O,j),q.sendMessage({name:k.stateChange,data:b},O,j),q.sendMessage({name:k.ready,data:{}},O,j),q.sendMessage({name:k.viewableChange,data:a},O,j),u(!0)}function D(){J(),T&&T(),f.cancel(S)}var E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V=5e3;return n(),{destroy:D}}function s(a){return new r(a)}return{init:s}}])}(),function(){var a=angular.module("AdUnit");a.factory("externalScriptsService",["assetsService",function(a){function b(a){"function"==typeof a&&a()}function c(a){return['<script src="'+a+'"></script>'].join(" ")}function d(){return c(a.getMraidScript())}function e(){return a.getExternalAPIScript()}function f(a,c,d,e){var f=new XMLHttpRequest;f.addEventListener("load",function(){g(a,this.responseText),b(d)}),f.addEventListener("error",function(){b(e)}),f.open("GET",c),f.send()}function g(a,b){var c=i(b);a.srcdoc=c.innerHTML}function h(a){var b=document.createElement("script");return b.type="text/javascript",b.src=a,b}function i(a){var b=document.createElement("html");b.innerHTML=a;var c=h(e()),d=b.getElementsByTagName("head");return d&&d[0]&&d[0].appendChild(c),b}return{getMraidScript:d,getExternalAPIScript:e,injectExternalAPIScript:f}}])}(),function(){var a=angular.module("AdUnit");a.factory("extraOffersService",["$rootScope","END_CARD_FRAMES_FOR_EXTRA_OFFERS",function(a,b){function c(a){return a.name===b.carouselEndCardFrame||a.name===b.fullScreenEndCardFrame||a.name===b.customAdContainerFrame}function d(){var a=angular.element(document.querySelector(".componentContainer")),b=angular.element(document.querySelector("#extraOffers"));b[0].classList.add("extraOffersContainer"),a[0].classList.add("minimizedTopFrame"),f(a),e()}function e(){var a=angular.element(document.querySelector(".extraOffersContainer")),b=angular.element(document.querySelector(".extraOffersLabel"));a[0].addEventListener("scroll",function(a){a.target.scrollLeft>0?b[0].classList.contains("boxShadow")||b[0].classList.add("boxShadow"):0===a.target.scrollLeft&&b[0].classList.contains("boxShadow")&&b[0].classList.remove("boxShadow")})}function f(b){b[0].addEventListener("animationend",function(){a.$broadcast("stretchToFit.recalculate",{cb:function(){a.$broadcast("Carousel.recalculate"),a.$broadcast("ssaLineClamp.recalculate")}})})}function g(a){var b={};return angular.forEach(a,function(a,c){b[c]=a.ext.callbacks.impressions[0].url}),b}return{doesFrameSupportShowingExtraOffersInEndCard:c,minimizeFrameAndPresentExtraOffersContainer:d,buildExtraOffersImpressionsMap:g}}])}(),function(){var a=angular.module("AdUnit");a.factory("fillRateTrackingService",["$rootScope","LogService",function(a,b){function c(c){function d(a,b){if(!a)return"";if(b)for(var c=b.length,d=0;d<c;d++)a=a.replace("{{"+b[d].key+"}}",encodeURIComponent(b[d].value));return a=a.replace(/\{\{[\w\d\s]*\}\}/g,"ok")}function g(c,d){var e={multiplePixels:c,cb:d};a.$broadcast("PixelDirective.FireMultiplePixels",e),b.log("Callbacks: "+JSON.stringify(e),b.logLevel.debug,"event")}function h(c,d){c.cb=d,a.$broadcast("PixelDirective.FirePixel",c),b.log("Callback: "+JSON.stringify(c),b.logLevel.debug,"event")}function i(a,b){var c;return a&&a.url&&(c={url:d(a.url,b),type:a.type}),c}function j(a,b,c){var d,f=e[a],j=!1;if("object"==typeof f)if(f.length>0){for(var k=[],l=0;l<f.length;l++)d=i(f[l],b),d&&(j=!0,k.push(d));g(k,c)}else d=i(f,b),d&&(j=!0,h(d,c));j||"function"!=typeof c||c()}function k(a){j("requestTracking",null,a)}function l(a){var b=[{key:f.eventResult,value:f.hit}];j("responseTracking",b,a)}function m(a,b){var c=[{key:f.eventResult,value:f.miss},{key:f.resultReason,value:a}];j("responseTracking",c,b)}function n(a){if(a&&e)switch(a.trackingType){case"request":k(a.cb);break;case"responseHit":l(a.cb);break;case"responseMiss":m(a.data,a.cb)}}function o(){e=c}return o(),{track:n}}function d(a){return new c(angular.copy(a.callbacks))}var e,f={hit:1,miss:2,eventResult:"eventResult",resultReason:"resultReason"};return{init:d}}])}(),function(){var a=angular.module("AdUnit");a.factory("hybridService",["$rootScope","$q","$timeout","SSA_Utils","analytics","adapter","CLICK_ACTION","productSettingsService","HYBRID_ANALYTICS_CATEGORIES","CLICK_TYPE","HYBRID_SHOW_TYPE","CCVAF_CLICK","AFService","pixelProcessor","pixelService",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){
function p(){a.$on("AdController.hybridCampaignStatusChange",function(a,b){b&&"object"==typeof b&&b.viewUniqueId&&b.viewUniqueId===z.getViewUniqueId()&&z.setIsHybrid(!(!b.status||"success"!==b.status))});var b=a.$on("AdController.appStoreInsideClosed",function(a,c){c&&"object"==typeof c&&c.viewUniqueId&&c.viewUniqueId===z.getViewUniqueId()&&(b(),z.setIsHybrid(!1),s(1,0))});a.$on("AdController.appStoreInsideDisplayHybrid",function(a,b){b&&"object"==typeof b&&b.viewUniqueId&&b.viewUniqueId===z.getViewUniqueId()&&t()&&q(k.hybridOnShow)})}function q(a){e.trackEvent(i.hybridStoreEngaged,{generalmessage:a}),y.setPixelFired(g.END_CARD,!0);var b=y.getPixelUrls({"{{clickType}}":j.HYBRID});if(a===k.hybridOnClick&&y.shouldSupportAF()){var c=m.getToken();b=y.getPixelUrls({"{{ccvaf}}":c}),e.trackEvent(l,{generalMessage:m.getTokenType(c)})}if(b){var d=n.preparePixelUrls({urls:b,isClickSeparationEnabled:h.isClickSeparationEnabled()});o.firePixelsWithDS({urls:d,type:"pixel",at:""})}}function r(a,b,c){y=a,z=b,A=c,p()}function s(a,b){var c=[{viewType:"controller",screenRatio:a},{viewType:"store",screenRatio:b}],d={hybridJson:c,viewUniqueId:z.getViewUniqueId()};f.call({method:"HybridChangeRatio",arguments:d})}function t(){return z.isHybridFlow()&&A.isHybridOnShowEnabled()}function u(){return B&&z&&z.isHybridFlow()&&z.showHybridOnClick()&&!A.isHybridOnShowEnabled()}function v(){B&&(B=!1,s(.3,.7),q(k.hybridOnClick))}function w(){d.callOnVisible(function(){t()?s(.3,.7):u()&&s(.9999,.1111)})}function x(a){z.isHybridFlow()&&(s(0,1),a||e.trackEvent(i.hybridVideoSkip))}var y,z,A,B=!0;return{initHybridFlow:r,flowEnded:x,flowStarted:w,showHybridOnClick:u,handleShowHybridOnClick:v}}])}(),function(){var a=angular.module("AdUnit");a.factory("limitedAreasService",function(){function a(a,d,e,f,g){if(f&&g)return!1;for(var h=c(e),i=0;i<h.length;i++){var j=h[i];if(b(a,d,j))return!0}return!1}function b(a,b,c){var d=c[0],e=c[1],f=c[2],g=c[3];return a>=d&&a<=d+f&&b>=e&&b<=e+g}function c(a){return d(a)?a:[]}function d(a){if(!Array.isArray(a))return!1;for(var b=0;b<a.length;b++){var c=a[b];if(!c||!Array.isArray(c)||4!==c.length)return!1;if(!e(c))return!1}return!0}function e(a){for(var b=0;b<a.length;b++){var c=a[b];if(isNaN(c)||c<0||c>100)return!1}return!0}return{shouldBlockCurrentClick:a}})}(),function(){angular.module("AdUnit").factory("loadExternalFileService",["$window",function(a){function b(b){var c=a.document.createElement("link");c.rel="stylesheet",c.type="text/css",c.href=b,a.document.getElementsByTagName("head")[0].appendChild(c)}return{loadCustomCss:b}}])}(),function(){var a=angular.module("AdUnit");a.factory("loadImageAssetService",["$timeout","LogService",function(a,b){return function(c,d,e){b.log("loadImageAssetService | loadImageAsset "+c,b.logLevel.trace);var f=new Image,g=function(a){return a&&"function"==typeof a};f.onload=function(){b.log("loadImageAssetService | on image load success",b.logLevel.trace),g(d)&&d()},f.onerror=function(){b.log("loadImageAssetService | on image load failed",b.logLevel.trace),g(e)&&e()},a(function(){f.src=c})}}])}(),function(){angular.module("AdUnit").factory("moatService",["$rootScope","adapter","AdUnitDelivery","MOAT_EVENTS","LogService",function(a,b,c,d,e){function f(a,b,d){g(c.service().getMoatData())&&(y={start:!1,firstQuartile:!1,midpoint:!1,thirdQuartile:!1,complete:!1},v=u(a,c.service().getMoatData().ids,b,c.service().getMoatData().publisherCode,d),r())}function g(a){return a&&a.publisherCode&&a.ids}function h(){return!!v}function i(){h()&&(e.log("MOAT | AdUnit | moatService.startTracking()",e.logLevel.trace),j())}function j(){b.call({method:"MOATStartTracking",arguments:{},callback:function(a){}})}function k(){h()&&(e.log("MOAT | AdUnit | moatService.stopTracking()",e.logLevel.trace),v=null,l())}function l(){b.call({method:"MOATStopTracking",arguments:{},callback:function(a){}})}function m(a){h()&&a&&0!==a.length&&angular.forEach(a,function(a){var b=s(a);b&&(y.hasOwnProperty(a.originalName)&&(y[a.originalName]=!0),v.dispatchEvent(b))})}function n(){m([{isMoatEvent:!0,type:d.pause}])}function o(a){a>0&&m([{isMoatEvent:!0,type:d.resume}])}function p(a){h()&&(x=a,q())}function q(){h()&&m([{isMoatEvent:!0,type:d.volumeChange}])}function r(){h()&&b.call({method:"GetDeviceVolume",arguments:{},callback:function(a){a&&a.deviceVolume&&(w=a.deviceVolume)}})}function s(a){if(!a||!a.isVastEvent&&!a.isMoatEvent)return null;if(!a||!a.isVastEvent&&!a.isMoatEvent)return null;var b={type:"",adVolume:x};if(a.isVastEvent){if(!a.originalName||!d.hasOwnProperty(a.originalName)||t(a.originalName))return null;b.type=d[a.originalName]}else a.isMoatEvent&&(b.type=a.type);return b}function t(a){return!!y[a]}function u(a,b,c,d,e){var f=document.createElement("script"),g=[];b={adData:{ids:b,duration:c,url:e},dispatchEvent:function(a){this.sendEvent?(g&&(g.push(a),a=g,g=!1),this.sendEvent(a)):g.push(a)}},c="_moatApi"+Math.floor(1e8*Math.random());var h,i;try{h=a.ownerDocument,i=h.defaultView||h.parentWindow}catch(j){h=document,i=window}return i[c]=b,f.type="text/javascript",a&&a.insertBefore(f,a.childNodes[0]||null),f.src="https://z.moatads.com/"+d+"/moatvideo.js#"+c,b}var v=null,w="0",x=1,y={};return{initMoat:f,startTracking:i,stopTracking:k,notifyStartTracking:j,notifyStopTracking:l,dispatchEvent:m,videoPaused:n,videoPlaying:o,volumeChange:p}}])}(),function(){angular.module("AdUnit").factory("nativeEndCardHelper",["$rootScope","adapter","AFService","analytics","CLICK_TYPE","FIRE_PIXEL_STRATEGIES","CCVAF_CLICK","pixelProcessor","pixelService",function(a,b,c,d,e,f,g,h,i){function j(a){var b=a.getFirePixelStrategy();if(b!==f.none){var e=a.getPixelUrls(m);if(a.shouldSupportAF()){var j=a.getAFToken()||c.getToken();e=a.getPixelUrls(angular.extend({},m,{"{{ccvaf}}":j})),d.trackEvent(g,{generalMessage:c.getTokenType(j)})}var k=h.preparePixelUrls({urls:e,isClickSeparationEnabled:productSettingsService.isClickSeparationEnabled()});i.firePixelsWithDS({urls:k,type:b})}}function k(a,b,c){c&&(a[b]=c)}function l(a){var c=a.createUrlWithPlaceholderReplaced(m),d={url:c,type:"openUrl"};k(d,"appId",a.getPostActionAppID()),k(d,"viewUniqueId",a.getViewUniqueId()),k(d,"viewIdentifier",a.getStoreKitViewIdentifier()),b.call({method:"ActionClick",arguments:d})}var m={"{{clickType}}":e.NATIVE};return{firePixel:j,openStoreKitUrl:l}}])}(),function(){var a=angular.module("AdUnit");a.factory("nativeEndCardService",["$rootScope","adapter","productSettingsService","AFService","nativeEndCardHelper","analytics","NATIVE_END_CARD_EVENTS","END_CARD_FRMAES","ADUNIT_EVENTS",function(a,b,c,d,e,f,g,h,i){function j(a){return!c.shouldDisableNativeEndCard()&&a.isNativeEndCardEnabled()}function k(){e.openStoreKitUrl(p),f.trackEvent(g.nativeEndCardOpened)}function l(){e.firePixel(p),p.shouldDelayFirePixel()?$timeout(k,p.getForkingDelay()):k()}function m(){f.trackEvent(g.nativeEndCardClosed),a.$broadcast("AdUnit.confirmCloseClicked","")}function n(b){p=b,f.trackEvent(g.endCardDisplayed,{currentFrame:h["native"]}),q=!0,a.$broadcast(i.VIDEO_STOP,""),l()}function o(){return q}var p,q=!1;return{isSupported:j,onClose:m,handleFlow:n,isFlowActive:o}}])}(),function(){angular.module("AdUnit").factory("omidService",["adapter","LogService","$rootScope","productSettingsService",function(a,b,c,d){function e(a){b.log("OMID | AdUnit | loadScript.start");var c=document.createElement("script");c.type="text/javascript",c.id="OMIDSDK",c.src=a;try{document.getElementsByTagName("head")[0].appendChild(c)}catch(d){b.log("OMID | AdUnit | err:"+d)}}function f(){b.log("OMID | AdUnit | servieOmidStart");var a=d.getOmidUrl();a&&(b.log("OMID | AdUnit | omidService.foundOmidUrl"),e(a)),b.log("OMID | AdUnit | omidService.endInit")}function g(c){var e=c||{};e.adViewId=d.getAdViewId(),b.log("OMID | AdUnit | omidService.startSession()",b.logLevel.trace),a.call({method:"OMIDStartSession",arguments:e})}function h(){b.log("OMID | AdUnit | omidService.finishSession()",b.logLevel.trace),a.call({method:"OMIDFinishSession",arguments:{}})}function i(c){var d=c||{};b.log("OMID | AdUnit | omidService.impressionOccurred()",b.logLevel.trace),a.call({method:"OMIDImpressionOccurred",arguments:d})}return{startSession:g,finishSession:h,impressionOccurred:i,init:f}}])}(),function(){var a=angular.module("AdUnit");a.factory("pixelProcessor",function(){function a(a){var b={dataScienceUrls:[],mobileMeasurementPartnerUrls:[]};return angular.forEach(a,function(a){b.dataScienceUrls.push(a+"&cInt=2"),b.mobileMeasurementPartnerUrls.push(a+"&cInt=1")}),b}function b(b){return b.isClickSeparationEnabled?a(b.urls):{mobileMeasurementPartnerUrls:b.urls}}return{preparePixelUrls:b}})}(),function(){var a=angular.module("AdUnit");a.factory("pixelService",["$rootScope","productSettingsService","analytics","CLICK_EVENTS",function(a,b,c,d){function e(a){angular.forEach(a.urls,function(b){f({url:b,type:a.type,cb:a.cb,at:a.at})})}function f(a){g(a)}function g(b){a.$broadcast("PixelDirective.FirePixel",b)}function h(){j&&j(),j=void 0}function i(e){function g(a){a&&angular.forEach(a,function(a){f({url:a,type:e.type,cb:e.cb,at:e.at})})}function i(a){return a?void setTimeout(function(){e.shouldSendMmpClickAfterDelay&&e.shouldSendMmpClickAfterDelay()&&g(e.urls.mobileMeasurementPartnerUrls)},a):void g(e.urls.mobileMeasurementPartnerUrls)}if(i(e.mmpClickDelay),!e.shouldPreventDSPixels){if(b.isIOS()){var k=e.urls.dataScienceUrls||[],l=e.urls.mobileMeasurementPartnerUrls||[];c.trackEvent(d.dsClickSplit,{},{custom_b:l.length,custom_c:k.length,custom_e:1,custom_a:b.isClickSeparationEnabled()?"true":"false"})}if(b.isTimeThresholdsAvailable())h(),j=a.$on("DataScience.Click",function(a,f){var h=e.urls.dataScienceUrls,i=e.urls.mobileMeasurementPartnerUrls;g(h),j(),c.trackEvent(d.dsClickSplit,{},{custom_b:i?i.length:0,custom_c:h?h.length:0,custom_e:2,custom_a:b.isClickSeparationEnabled()?"true":"false"})});else if(g(e.urls.dataScienceUrls),b.isIOS()){var k=e.urls.dataScienceUrls,l=e.urls.mobileMeasurementPartnerUrls;c.trackEvent(d.dsClickSplit,{},{custom_b:l?l.length:0,custom_c:k?k.length:0,custom_e:3,custom_a:b.isClickSeparationEnabled()?"true":"false"})}}}var j=void 0;return{firePixel:f,firePixels:e,firePixelsWithDS:i}}])}(),function(){angular.module("AdUnit").factory("placeholderManager",["$rootScope",function(a){function b(a){return c(a,e)}function c(a,b){if(!angular.isString(a))return a;var c,d;for(var e in b)c=b[e],d=new RegExp(e+"|"+encodeURIComponent(e),"i"),a=a.replace(d,angular.isFunction(c)?c():c);return a}function d(a){angular.extend(e,a)}var e={};return a.$on("updatePlaceholderAlias",function(a,b){b&&"object"==typeof b&&d(b)}),{replaceAllConstPlaceholders:b,replacePlaceholderWithMap:c,extendConstAliasesMap:d}}])}(),function(){var a=angular.module("AdUnit");a.factory("productSettingsService",["AdUnitDelivery","SCREEN_TYPES","placeholderManager","OPERATING_SYSTEMS","WEBVIEW_TYPES","DEBOUNCE_CLICK_DURATION","PRODUCT_TYPES","LAYOUT_TYPE","AD_CONTAINER_PRIVACY","SK_AD_NETWORK","STORE_KIT","CONFIG","CALL_TO_ACTION_TEXT",function(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(){return a.service().getSettings()}function o(){return a.service().getProtocol()}function p(){return a.service().getProductType()}function q(){return a.service().getAdType()}function r(){return s()?{dscd:n().dscd}:{}}function s(){return n().dscd&&u()}function t(){return u()?jb()?{qt:n().quatro||l.quatroDefault,aecskqt:n().aecskqt||l.quatroDefault}:{qt:n().quatro||l.quatroDefault}:{}}function u(){return w(d.ios)}function v(){return w(d.android)}function w(a){return qb.os===a}function x(){return a.service().getQualityClick()}function y(){var b=a.service().getQualityClick();return b&&b.cSep}function z(b){return a.service().getRequestOpportunityData(b)}function A(){return a.service().getDemandSourceName()}function B(){return a.service().isSecuredProtocol()}function C(){var a=n().precache;return"true"===a||a===!0}function D(){var a=n().preload;return"true"===a||a===!0}function E(){return n().deviceType||b.PHONE}function F(){return n().hasNotch||!1}function G(){return n().customCss}function H(){return n().appKey}function I(){return n().appOrientation}function J(){return n().deviceId}function K(){return n().userApplicationId}function L(){return n().deviceLanguage}function M(){return n().bundleId}function N(){return n().placementId}function O(){return n().sdkAbName}function P(){return a.service().getSessionDepth()}function Q(){return a.service().getForkingDelay()}function R(){var b=fa();return a.service().isSeamless()&&b.os===d.ios&&b.webviewType===e.ui}function S(){return n().isVideoClickable}function T(){return n().hybridOnClick||!1}function U(){return n().isSmartVideoClickable}function V(){return a.service().getIsSafeClick()}function W(){return void 0===n().blockSwipeFromScreenBottom||n().blockSwipeFromScreenBottom}function X(){return{"{{placementId}}":N()}}function Y(){return{"{{ssaSessionDepth}}":P()}}function Z(){return{"{{sdkAbName}}":O()}}function $(a){return{"{{in}}":a||!1}}function _(a){return{"{{uC}}":a||!1}}function aa(a){return{"{Position}":a}}function ba(){var a;try{a=encodeURIComponent(navigator.userAgent)}catch(b){a=""}return void 0===typeof a?{"[[wvua]]":""}:{"[[wvua]]":a}}function ca(){return angular.extend({},_(),$())}function da(){return angular.extend({},X(),Y(),Z(),ba())}function ea(){var a=n().linksData;return angular.forEach(a,function(a,b){a&&a.url&&(a.url=c.replaceAllConstPlaceholders(a.url))}),a}function fa(){if(!qb){var b=a.service();qb={os:b.getProperties().os,osVersion:b.getProperties().osv,apiLevel:b.getProperties().apilvl,sdkVersion:b.getProperties().sdkv,webviewType:b.getProperties().webviewType}}return qb}function ga(){return fa().os}function ha(){return fa().osVersion}function ia(){return fa().apiLevel}function ja(){return a.service().getCRID()}function ka(){return a.service().getCID()}function la(){return f}function ma(){return n().warmupUrls||n().warmupUrlsNew}function na(){return n().DEC}function oa(){return n().X2SP}function pa(){return n().LEB}function qa(){return n().skipInTime}function ra(){return n().skipInText}function sa(){return n().xButtonBehavior}function ta(){return p()!==g.Banner}function ua(){return n().disableNativeEndCard}function va(){return n().overrideVideoClickable}function wa(){return n().isTransparentLayout||!1}function xa(){return n().shouldStartMuted}function ya(){var a=n().shouldClickToStoreWithReferrer;return null===a||!angular.isDefined(a)||a}function za(){return n().privacyLinkUrl}function Aa(){return a.service().getCreativeId()}function Ba(){return ja()+"_"+Aa()}function Ca(a){return a+"_"+Aa()}function Da(){return n().shouldReportMOATVolumeOne}function Ea(){return n().removeTranslateZOnCloseButton||!1}function Fa(){return p()===g.Banner?h.bannerLayout:h.fullScreen}function Ga(){return p()!==g.Banner}function Ha(){return n().noClickInCarousel||!1}function Ia(){return n().partialScreenWidthPercentage||!1}function Ja(){return n().ccvaf||!1}function Ka(){return n().supportPlayableHTMLUrlFlow||!1}function La(){return n().adContainerInfoText||i.defaultText}function Ma(){return(n().fullScreenIntermediate||!1)&&E()===b.PHONE}function Na(){return n().rewardStatusLinkInHeader||!1}function Oa(){return n().omidUrl}function Pa(){return a.service().getAdViewId()}function Qa(){return n()[j.SKANData]||{}}function Ra(){return n()[k.clickGraceTimeForStoreKitLoading]}function Sa(){return p()!==g.Banner&&u()}function Ta(){return n().enableXY||!1}function Ua(){return n().allowCallToAction||!1}function Va(){return n().callToActionDelay||3}function Wa(){return n().blockVideoClick||!1}function Xa(){var a=n().callToActionText;return a&&"string"==typeof a&&a.length<=12?a:m.defaultText}function Ya(){return n().cw1||!1}function Za(){return n().cw2||0}function $a(){return n().cw3||!1}function _a(){return n().cw4||!1}function ab(){return n().cw5||!1}function bb(){return n().cw6||!1}function cb(){return n().cw7||!1}function db(){return eb()>0&&qb.os===d.ios&&"playableAd"!==q()}function eb(){return n().vnc||0}function fb(){return n()[k.loadingRetryAttempts]||0}function gb(){return p()===g.Banner?[]:n().lca||[]}function hb(){return n().lcaxv||!1}function ib(){return n().enableSKOverlay&&n().skOverlaySupported}function jb(){return u()&&n().hasOwnProperty(k.aecsk)&&y()}function kb(){return 1e3*n()[k.aecsk]||0}function lb(){return jb()?1e3*n()[k.aecskcd]||0:0}function mb(){return n().enableSimpleEndCard}function nb(){return n().isSimpleEndCardClickable}function ob(){return n().simpleEndCardCTA}function pb(){return n().SKOaecsk||!1}var qb;return{getSettings:n,getProtocol:o,getProductType:p,getDemandSourceName:A,getRequestOpportunityData:z,getQualityClick:x,getThresholds:r,isTimeThresholdsAvailable:s,isIOS:u,isAndroid:v,isClickSeparationEnabled:y,isSecuredProtocol:B,isPreCache:C,isPreload:D,getCustomCss:G,getDeviceData:fa,getUserApplicationId:K,getOS:ga,getOSVersion:ha,getAPILevel:ia,getScreenType:E,getPlacementId:N,getLinksData:ea,getSupportedPlaceholderAliasesMap:da,getCreativePositionAlias:aa,getUserAgentAlias:ba,getCRID:ja,getSessionDepth:P,getCID:ka,getForkingDelay:Q,isSeamless:R,isVideoClickable:S,isSmartVideoClickable:U,getIsSafeClick:V,getBlockSwipeFromScreenBottom:W,getDebounceClickConfig:la,shouldWarmupUrls:ma,getDECFlag:na,getX2SPFlag:oa,getLEBFlag:pa,getSkipInTime:qa,getSkipInText:ra,getXButtonBehavior:sa,getInteractionAlias:$,getUserClickedAlias:_,getEngagementClickUrlSupportedPlaceholders:ca,isStoreKitSupported:ta,shouldDisableNativeEndCard:ua,getOverrideVideoClickable:va,isTransparentLayout:wa,getMuteFlag:xa,getApplicationKey:H,getApplicationOrientation:I,getDeviceId:J,getDeviceLanguage:L,getBundleId:M,hasNotch:F,showHybridOnClick:T,getPrivacyLinkUrl:za,shouldClickToStoreWithReferrer:ya,getCreativeId:Aa,getCombinedBannerAndCreativeId:Ba,getCombinedIdWithBannerId:Ca,shouldReportMOATVolumeOne:Da,shouldRemoveTranslateZOnCloseButton:Ea,getLayoutType:Fa,shouldShowNotifications:Ga,getPartialScreenWidthPercentage:Ia,shouldAddAFIntegration:Ja,shouldSupportPlayableHTMLUrlFlow:Ka,getAdContainerInfoText:La,showFullScreenIntermediate:Ma,isRewardsStatusLinkOn:Na,getOmidUrl:Oa,getAdViewId:Pa,getSKANData:Qa,getClickGraceTimeForStoreKitLoading:Ra,shouldReportAdSessionEnded:Sa,shouldExtractXYCoordinates:Ta,isCallToActionEnabled:Ua,getCallToActionText:Xa,getCallToActionDelay:Va,isVideoClickDisabled:Wa,getStoreKitLoadingRetryAttempts:fb,isClickWrapperEnabled:Ya,showWrapperForXSec:Za,shouldEnableClickableAdWithWrapper:$a,shouldEnableFullWrapperClickable:_a,shouldBackgroundClickCloseWrapper:ab,shouldFireClickOnOpeningClickWrapper:bb,shouldEnableXWhenWrapperOpen:cb,noClickInCarousel:Ha,shouldDisableClickForXSec:db,getDisableClickForXSec:eb,getLimitedAreasList:gb,getLimitedClickableAreasWhenXHidden:hb,getQuatroConfig:t,shouldEnableSKOverlay:ib,shouldDisplayAutoStoreKitOnEndCard:jb,getDelayForStoreKitOnEndCardVisible:kb,getClickDelayForAutoStoreKitOnEndCard:lb,isSimpleOverlayEndCardEnabled:mb,isSimpleOverlayEndCardFullyClickable:nb,getSimpleOverlayEndCardCTAText:ob,shouldShowOverlayOnAECSK:pb}}])}(),function(){var a=angular.module("AdUnit");a.factory("PusherProviderService",["$rootScope","LogService",function(a,b){var c={},d={url:"//js.pusher.com/2.2/pusher.min.js"},e={},f=!1,g=function(){var c=(new Date).getTime();e.bind("connected",function(){var d=(new Date).getTime(),e=d-c;b.log("AdUnit.pusherconnected. Connection time: "+e+". Total load time: "+(d-a.mainControllerLoadTime),b.logLevel.trace)}),e.bind("initialized",function(){b.log("AdUnit.pusherinitialized",b.logLevel.trace)}),e.bind("unavailable",function(){b.log("AdUnit.pusherunavailable",b.logLevel.trace)}),e.bind("disconnected",function(){b.log("AdUnit.pusherdisconnected",b.logLevel.trace)}),e.bind("connecting",function(){b.log("AdUnit.pusherconnecting",b.logLevel.trace)}),e.bind("failed",function(){b.log("AdUnit.pusherfailed",b.logLevel.trace)})},h=function(c){b.log("AdUnit.pushercompletion: bannerid->"+c.bannerId+" config.id->"+d.id,b.logLevel.trace),d.id==c.bannerId&&(c.useVideoDuration=d.useVideoDuration,c.trackedOnPlay=d.trackedOnPlay,a.$broadcast("AdvertiserTracking.ExternallyTracked",c))};return{init:function(a){angular.extend(d,a)},connect:function(){f||(c=new Pusher(d.key,{encrypted:!0}),e=c.connection,g(),f=!0);var a=c.channel(d.channel);a||(a=c.subscribe(d.channel),a.bind("completion",h))},getServiceUrl:function(a){return(a||"https:")+d.url}}}])}(),function(){var a=angular.module("AdUnit");a.factory("screenOrientationService",["$window","$rootScope","$timeout","SSA_Utils","analytics","GENERAL_EVENTS",function(a,b,c,d,e,f){function g(){return d.getInnerWidth()>0&&d.getInnerHeight()>0}function h(){return!!g()&&d.getWindowOrientation()}function i(){return!!g()&&{innerWidth:d.getInnerWidth(),innerHeight:d.getInnerHeight()}}function j(){var a=d.getWindowOrientation(),c=d.getInnerWidth(),e=d.getInnerHeight();b.$broadcast("screenOrientation.calculate",{orientation:a,innerWidth:c,innerHeight:e})}function k(){g()?(o&&c.cancel(o),j()):n=c(k,100)}function l(){n&&c.cancel(n),o&&c.cancel(o),o=c(function(){e.trackEvent(f.resizeTimeout,{}),j()},1e4),k()}function m(){a.addEventListener("resize",l),d.callOnVisible(l)}var n,o,p={};return p.getScreenOrientation=h,p.getScreenSize=i,m(),p}])}(),function(){var a=angular.module("AdUnit");a.factory("seamlessOpenStoreService",["$rootScope","$timeout","adapter","productSettingsService","analytics","RV_ANALYTICS_CATEGORIES","CLOSE_BUTTON_EVENTS",function(a,b,c,d,e,f,g){function h(a,b,c){var e,f=d.getDeviceData();return e="ios"===f.os?j(a,b,c):i(a,b,c)}function i(a,b,d){c.call({method:"ActionClick",arguments:{type:"openUrl",url:a,method:"store"},callback:function(){angular.isFunction(b)&&b()}})}function j(c,d,h){function i(a){l(),m(o),p&&p(),q&&q(),b.cancel(j),angular.isFunction(a)&&a()}var j,n=1e4;k(!0);var o="hiddenIframe-"+Date.now();j=b(function(){e.trackTimingStop(f.failedOpenStoreWithSeamless,{eNameStart:f.handlePostActionClick}),i(h)},n);var p=a.$on("AdController.viewableChange",function(a,b){b&&!b.isViewable&&(e.trackTimingStop(f.seamlessSuccess,{eNameStart:f.handlePostActionClick}),i(d))}),q=a.$on(g.closeButtonClicked,function(a,b){i(h)}),r={type:"htmlElement",htmlElement:'<iframe id="'+o+'" style="display: none;" frameborder="0" scrolling="no" src="'+c+'"></iframe>'};return a.$broadcast("PixelDirective.FirePixel",r),o}function k(c){o=!0,b(function(){a.$broadcast("ssaSpinner.show",{showOverlay:c})})}function l(){o=!1,b(function(){a.$broadcast("ssaSpinner.hide")})}function m(a){if(a){var b=document.getElementById(a);b&&b.parentNode.removeChild(b)}}function n(){o&&e.trackTimingStop(f.exitBeforeStoreOpened,{eNameStart:f.handlePostActionClick})}var o;return{openStoreUrl:h,removeIframeFromDomById:m,closeClicked:n}}])}(),function(){var a=angular.module("ssaBackButton",[]);a.constant("BACK_BUTTON_STATES",{defaultBehavior:"default",adunitResponsibility:"adunitResponsibility"}),a.constant("BACK_BUTTON_EVENTS",{backButtonPressedFromSDKController:"AdController.backButtonPressed",setBackButtonState:"setBackButtonState",notifySDKControllerToClose:"closeAdunit",backButtonPressedEvent:"backButtonPressed"}),a.factory("BackButtonService",["$rootScope","adapter","BACK_BUTTON_EVENTS","BACK_BUTTON_STATES","X_BUTTON_ACTIONS",function(a,b,c,d,e){function f(a){var b;return b=a===e.hide||a===e.buttonHidden?d.adunitResponsibility:j()}function g(a,d){m=a,n=d||angular.noop,b.call({method:c.setBackButtonState,arguments:{state:m}})}function h(a){g(d.adunitResponsibility,a)}function i(){b.call({method:c.notifySDKControllerToClose,arguments:{}})}function j(){return d.defaultBehavior}function k(){return m}function l(){return n}var m=d.defaultBehavior,n=angular.noop;return a.$on(c.backButtonPressedFromSDKController,function(){n()}),{setStateAndAction:g,setAdunitResponsibilityAndAction:h,notifySDKControllerToCloseAdunit:i,getState:k,getHandler:l,getDefaultBackAction:j,getBackActionForFirstFrame:f}}])}(),function(){var a=angular.module("AdUnit");a.factory("skOverlayService",["$rootScope","qualityClickService","adapter","analytics","timerService","productSettingsService","SK_OVERLAY_EVENTS",function(a,b,c,d,e,f,g){function h(){return f.shouldEnableSKOverlay()}function i(a,b){d.trackEvent(a,{},b)}function j(){h()&&k()}function k(){function b(b,e){p(e)&&(r=a.$on("AdController.overlayCreateSuccess",c),s=a.$on("AdController.overlayCreateFailed",d),y.startCreateOverlay(),i(g.overlayCreate,{generalmessage:e.advertisedAppId}))}function c(a,b){if(p(b)){var c={generalmessage:b.advertisedAppId,timingvalue:y.endCreateOverlay()};i(g.overlayCreateSuccess,c),l()}}function d(a,b){if(p(b)){var c={generalmessage:b.advertisedAppId,callfailreason:b.errMsg,timingvalue:y.endCreateOverlay()};i(g.overlayCreateFailed,c),n()}}q=a.$on("AdController.overlayCreateCalled",b)}function l(){function b(a,b){p(b)&&(y.startShowOverlay(),i(g.overlayVisible,{generalmessage:b.advertisedAppId}))}function c(a,b){if(p(b)){var c={generalmessage:b.advertisedAppId,timingvalue:y.endShowOverlay()};i(g.overlayVisibleSuccess,c)}}function d(a,b){if(p(b)){var c={generalmessage:b.advertisedAppId,callfailreason:b.errMsg,timingvalue:y.endShowOverlay()};i(g.overlayVisibleFailed,c)}}function e(a,b){if(p(b)){var c={generalmessage:b.advertisedAppId,custom_b:b.userDismissible?1:0,custom_c:b.dismissInitiatedSource};i(g.overlayDismissed,c)}}t=a.$on("AdController.overlayVisibleCalled",b),u=a.$on("AdController.overlayVisibleSuccess",c),v=a.$on("AdController.overlayVisibleFailed",d),w=a.$on("AdController.overlayDismissed",e)}function m(){n()}function n(){o(q),o(r),o(s),o(t),o(u),o(v),o(w),o(x)}function o(a){a&&a()}function p(a){return a}var q,r,s,t,u,v,w,x,y=e.create(e.Type.OVERLAY);return{init:j,release:m}}])}(),function(){var a=angular.module("AdUnit");a.factory("qualityClickService",["$rootScope","$timeout","analytics","adapter","pixelService","CLICK_EVENTS","placeholderManager","timerService","appStateHelper","CLICK_TYPE",function(a,b,c,d,e,f,g,h,i,j){function k(a,b){return a&&a.qt&&!!b}function l(){return 1e3*m()}function m(){return J.aecskqt&&I===j.AECSK?J.aecskqt:J.qt?J.qt:-1}function n(b){k(b.qc,b.qualityClickUrl)&&(J=b.qc,L=b.qualityClickUrl,D=a.$on("StoreKitService.StoreKitClosed",function(a,b){C(),M.c(),B()}),E=a.$on("StoreKitService.StoreKitOpened",function(a,b){C(),z(),K++,M.o(),I=b.clickType,H=o(l())}))}function o(a){if(!(a<0))return b(function(){C(),B(),A(),p({qt:m(),openStoreKitCounter:K,timestamp:Date.now()}),K=0},a)}function p(a){s({"{{qc}}":a.qt}),r({custom_b:a.qt,custom_c:a.openStoreKitCounter,custom_d:M.s(a.timestamp),custom_f:M.v(a.timestamp)}),t()}function q(a){return g.replaceAllConstPlaceholders(g.replacePlaceholderWithMap(L+"&qc={{qc}}",a))}function r(a){c.trackEvent(f.qualityClick,{},a)}function s(a){e.firePixel({url:q(a),type:"native"})}function t(){d.call({method:"qcTriggered",arguments:{}})}function u(){k(J,L)&&(J=void 0,C(),A(),B())}function v(a,b){i.isInBackground(b)&&(M.b(),C())}function w(a,b){if(i.isInForeground(b)&&M.e()){M.f();var c=x(Date.now());c>=0&&(C(),H=o(c))}}function x(a){return l()-M.v(a)}function y(a){a&&a()}function z(){B(),F=a.$on("AdController.enterBackground",v),G=a.$on("AdController.enterForeground",w)}function A(){y(D),y(E)}function B(){y(F),y(G)}function C(){H&&b.cancel(H),H=void 0}var D,E,F,G,H,I,J,K=0,L="",M=h.create(h.Type.K);return{init:n,release:u}}])}(),function(){var a=angular.module("AdUnit");a.factory("storeKitClickService",["$rootScope","storeKitService","productSettingsService","analytics","OPERATING_SYSTEMS","STORE_KIT_EVENTS","STORE_KIT","LogService",function(a,b,c,d,e,f,g,h){function i(){l&&(h.log("storeKitClickService | ad closed during click grace timeout",h.logLevel.trace),l=!1,clearTimeout(k),d.trackEvent(f.storekitClickFailed,null,{generalMessage:g.adClosedDuringGracePeriod}))}function j(i,j,m){var n=parseInt(c.getClickGraceTimeForStoreKitLoading());return"function"!=typeof i?angular.noop:j&&c.getOS()===e.ios&&n?function(){if(b.isStoreKitLoaded())return i.apply(m,arguments);if(l)return h.log("storeKitClickService | click grace timeout is already running, click blocked",h.logLevel.trace),angular.noop;var c=a.$on("appInstallPageLoaded",function(){h.log("storeKitClickService | StoreKit became loaded during click grace timeout",h.logLevel.trace),l=!1,clearTimeout(k),c(),i.apply(m,arguments)});l=!0,h.log("storeKitClickService | start click grace timeout - StoreKit is not loaded yet",h.logLevel.trace),k=setTimeout(function(){h.log("storeKitClickService | click grace timeout popped",h.logLevel.trace),l=!1,c&&c(),d.trackEvent(f.storekitClickFailed,null,{generalMessage:g.storeKitGracePeriodEnded})},n)}:i}var k,l=!1;return{storeKitReadyClickActionWrapper:j,onAdClosed:i}}])}(),function(){var a=angular.module("AdUnit");a.factory("storeKitService",["$rootScope","$timeout","adapter","analytics","productSettingsService","nativeEndCardService","LogService","storeKitStateService","appStateHelper","STORE_KIT","STORE_KIT_EVENTS","STORE_KIT_ERROR_REASONS",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(a){return e.isStoreKitSupported()&&a.shouldPreloadAppInstallPage()}function n(b){a.$broadcast("StoreKitService.StoreKitOpened",b)}function o(b){a.$broadcast("StoreKitService.StoreKitClosed",b)}function p(a,b,c){return a&&a.viewUniqueId&&(a.viewUniqueId===b||a.viewUniqueId===c)}function q(){return+new Date+""+Math.random()}function r(b,g){function i(a){return!!a.shouldPreloadStoreKitOnStoreKitClose}function s(){F(),G(),h.release()}function t(b){p(b,C,w)&&(y=!!b.isLoaded,z=!1,b.isLoaded?(a.$broadcast("appInstallPageLoaded"),E&&E(),d.trackEvent(k.storekitLoaded,null,{})):d.trackEvent(k.storekitLoadFailed,null,{callfailreason:b.errMsg?b.errMsg:l.storekitLoadFailedMissingErrorMessage,generalMessage:b[j.currentLoadRetryAttempt]}))}function v(a){var b=x.getClickAndEndCardDataObject();angular.extend(b,h.close()),a.errMsg&&(b.callfailreason=a.errMsg),d.trackEvent(k.storekitClosed,{},b)}if(m(b)){b.assignStoreKitViewIdentifier(q());var w=b.getViewUniqueId(),C=b.getStoreKitViewIdentifier();x=b;var D=g.getSKANDataForPreloadStoreKit(),E=a.$on("AdController.appStoreLoadingTimeout",function(a,b){p(b,C,w)&&d.trackEvent(k.storekitLoadFailed,null,{callfailreason:b.errMsg,generalmessage:b[j.currentLoadRetryAttempt]})}),F=a.$on("AdController.appStoreInsideVisible",function(a,c){p(c,C,w)&&(B=!0,A=!0,d.trackEvent(k.storekitOpened,null,x.getClickAndEndCardDataObject()),h.open(x),n({storeKitOpen:u(),clickType:b.getClickType()}))}),G=a.$on("AdController.appStoreInsideClosed",function(a,c){p(c,C,w)&&(i(c)&&s(),v(c),h.release(),A=!1,f.isFlowActive()?f.onClose():(o({storeKitOpen:u()}),i(c)&&(y=!1,r(b,g))))});z=!0;var H={appId:b.getPostActionAppID(),viewUniqueId:w,viewIdentifier:C,loadRetryAttempts:e.getStoreKitLoadingRetryAttempts()};c.call({method:"PreloadAppInstallPage",arguments:angular.extend({},H,D),callback:t})}}function s(a,b){(y||b)&&(y=!1,c.call({method:"ClearAppPage",arguments:{viewUniqueId:a.getViewUniqueId(),viewIdentifier:a.getStoreKitViewIdentifier()}}))}function t(){return y}function u(){return A}function v(a){return!!f.isSupported(a)&&(!!t()||(d.trackEvent(k.nativeEndCardFail,null,{callFailReason:l.notLoaded}),!1))}function w(a){f.handleFlow(a)}var x,y=!1,z=!1,A=!1,B=!1,C=a.$on("AdController.enterForeground",function(a,b){"active=true"===b&&!y&&z&&x&&(z=!1,s(x,!0),C())});return{isSupported:m,preloadAppInstallPage:r,clearStoreKit:s,isStoreKitLoaded:t,isStoreKitVisible:u,isReadyToDisplay:v,handleFlow:w}}])}(),function(){var a=angular.module("AdUnit");a.factory("storeKitStateService",["$rootScope","analytics","appStateHelper","timerService",function(a,b,c,d){function e(a){o(),v=a,y.o(),g()}function f(){var a=y.c();return n(a)}function g(){s=a.$on("AdController.enterForeground",h),t=a.$on("AdController.enterBackground",i),u=a.$on("AdController.viewableChangeInSK",j)}function h(a,b){w=c.isInForeground(b)&&y.e(),w&&y.f()}function i(a,b){c.isInBackground(b)&&y.b()}function j(a,b){c.isVisible(b)?k():l()}function k(){if(!w&&y.g()){var a=y.a(Date.now());v.setVisibility(!0,a)}}function l(){x++,1!==x&&(y.t(),2===x&&m(),
v.setEnteredForeground(!1))}function m(){var a=y.k(y.g());v.setVisibility(!1,a)}function n(a){return{timingvalue:a.tt,custom_f:a.tv}}function o(){p(),q()}function p(){r(s),r(t),r(u)}function q(){v=void 0,w=!1,x=0}function r(a){a&&a()}var s,t,u,v,w=!1,x=0,y=d.create(d.Type.K);return{open:e,close:f,release:o}}])}(),function(){var a=angular.module("AdUnit");a.factory("storeKitTimerService",["$rootScope","$timeout","analytics","CLICK_EVENTS","timerService","appStateHelper",function(a,b,c,d,e,f){function g(){return B?1e3*B.dscd:-1}function h(a){return a&&a.dscd>0}function i(b){h(b.timeThresholds)&&(B=b.timeThresholds,w=a.$on("StoreKitService.StoreKitClosed",function(a,b){v(),D.c(),u()}),x=a.$on("StoreKitService.StoreKitOpened",function(a,b){v(),s(),C++,D.o(),A=j(g())}))}function j(a){if(!(a<0))return b(function(){v(),u();var a=Date.now();k({openStoreKitCounter:C,timestamp:a,totalSessionTime:D.s(a),totalVisibleTime:D.v(a)})},a)}function k(a){m({openStoreKitCounter:a.openStoreKitCounter,totalSessionTime:a.totalSessionTime,totalVisibleTime:a.totalVisibleTime}),l({custom_c:a.openStoreKitCounter,custom_d:a.totalSessionTime,custom_f:a.totalVisibleTime})}function l(a){c.trackEvent(d.skClickDelay,{},a)}function m(b){a.$broadcast("DataScience.Click",b)}function n(){h(B)&&(B=void 0,v(),t(),u())}function o(a,b){f.isInBackground(b)&&(D.b(),v())}function p(a,b){if(f.isInForeground(b)&&D.e()){D.f();var c=q(Date.now());c>=0&&(v(),A=j(c))}}function q(a){return g()-D.v(a)}function r(a){a&&a()}function s(){u(),y=a.$on("AdController.enterBackground",o),z=a.$on("AdController.enterForeground",p)}function t(){r(w),r(x)}function u(){r(y),r(z)}function v(){A&&b.cancel(A),A=void 0}var w,x,y,z,A,B,C=0,D=e.create(e.Type.K);return{init:i,release:n}}])}(),function(){angular.module("AdUnit").factory("timerService",function(){function a(){function a(){o=Date.now(),q=0,p=0}function b(a){return a-o-q}function c(a){return a-o}function d(a){return a-r}function e(a){return a-o}function f(a){q+=a}function g(a){return p>0?a-p:0}function h(){p=Date.now()}function i(){f(g(Date.now())),p=0}function j(){return r=Date.now()}function k(){var a=l(Date.now());return p=0,q=0,o=0,r=0,a}function l(a){return{tt:c(a),tv:b(a)}}function m(){return p>0}function n(){return r}var o=0,p=0,q=0,r=0;return{o:a,c:k,v:b,s:c,k:e,b:h,f:i,t:j,a:d,g:n,e:m}}function b(){function a(){e=Date.now()}function b(){var a=Date.now()-e;return e=0,a}function c(){f=Date.now()}function d(){var a=Date.now()-f;return f=0,a}var e=0,f=0;return{startCreateOverlay:a,endCreateOverlay:b,startShowOverlay:c,endShowOverlay:d}}function c(){return{create:function(c){return c===this.Type.K?new a:c===this.Type.OVERLAY?new b:void 0},Type:Object.freeze({K:"k",OVERLAY:"overlay"})}}return c()})}(),function(){angular.module("AdUnit").factory("urlWarmUpService",["$window","$rootScope","SSA_Utils","WARMUP_STRATEGY","HTML_TAG_WARMUP_ATTRIBUTE","FIRE_PIXEL_STRATEGIES",function(a,b,c,d,e,f){function g(a){a&&c.addHandlerToAdVisible(function(){angular.forEach(a,function(a,b){var c=new RegExp("^(http|https)://","i");if(c.test(a)){var e=a.split("?")[0];e&&h(e,d.FIRE_PIXEL)}})})}function h(a,c){if(c===d.HTML_TAG){var g=document.createElement("link");g.rel=e.preconnect,g.href=a,document.head.appendChild(g)}else{var h={url:a,type:f.pixel};b.$broadcast("PixelDirective.FirePixel",h)}}return{startWarmupUrls:g}}])}(),function(){angular.module("AdUnit").constant("SEGMENTS_REPOSITORY",{storeKitTiming:{secInStoreKit0To5:106,secInStoreKit5To10:107,secInStoreKit10To15:108,secInStoreKit15To30:109,secInStoreKit30AndUp:110}})}(),function(){var a=angular.module("AdUnit");a.factory("segmentationService",["$rootScope","AdControllerService","SEGMENTATION",function(a,b,c){function d(){i(),a.$on(c.events.receivedFromController.updateUserSegments,function(a,b){Array.isArray(b.segments)&&e(b.segments)})}function e(a){m=[];for(var b=0;b<a.length;b++)m.push(a[b])}function f(a,b){j(a,b)}function g(a){k(a)}function h(){return m}function i(){var d=a.$on("AdController."+c.events.sendToController.getSegmentsSuccessCallback,function(a,b){var c=b.segments;Array.isArray(c)&&0!==c.length&&(e(c),d())});b.sdkControllerEvent({event:c.events.sendToController.getSegments,getSegmentsCallback:c.events.sendToController.getSegmentsSuccessCallback})}function j(a,d){b.sdkControllerEvent({event:c.events.sendToController.addSegment,segment:a,segmentGroup:d})}function k(a){b.sdkControllerEvent({event:c.events.sendToController.clearSegmentFromGroup,segmentGroup:a})}function l(){return{"{{segments}}":h().toString()}}var m=[];return{init:d,addSegment:f,clearSegmentFromGroup:g,getUserSegmentsArray:h,getSegmentsPlaceholderAlias:l,setSegments:e}}])}(),function(){angular.module("AdUnit").factory("visibilityService",["$rootScope","SSA_Utils","OPEN_URL_STRATEGIES","LogService",function(a,b,c,d){function e(){l=a.$on("AdController.adVisible",h),a.$on("AdController.viewableChange",f)}function f(a,b){if(!b)return void d.log("visibilityService | AdController.viewableChange | no message object was found",d.logLevel.trace);if(b.webview===c.secondary)return void d.log("visibilityService | AdController.viewableChange | ignoring viewableChange event for secondary webview",d.logLevel.trace);m=b.isViewable===!0||"true"===b.isViewable;var e={isVisible:m};b.changeReason&&(e.changeReason=b.changeReason),g(e)}function g(b){a.$broadcast("visibilityService.onVisibilityChanged",b)}function h(a,b){n=!0,m=!0,l();for(var c=0;c<o.length;c++)o[0](a,b),o.splice(0,1)}function i(a){o.push(a)}function j(a){n?a():i(a)}function k(a){angular.isFunction(a)&&j(a)}var l,m=!1,n=!1,o=[];return{isAdCurrentlyVisible:m,isAdDisplayed:n,callOnVisible:k,initListeners:e}}])}();